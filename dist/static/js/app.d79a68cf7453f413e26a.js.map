{"version":3,"sources":["webpack:///static/js/app.d79a68cf7453f413e26a.js","webpack:///./src/components/Demo.vue","webpack:///./src/components/photoPicker/icon_content_n_pc.png","webpack:///./static/tyService.js","webpack:///./src/assets/测试公众号二维码.jpg","webpack:///./src/components/Demo.vue?c96f","webpack:///./src/components/photoPicker/PhotoPicker.vue","webpack:///./src/App.vue","webpack:///./src/main.js","webpack:///./static/megapic-image.js","webpack:///src/App.vue","webpack:///src/components/photoPicker/PhotoPicker.vue","webpack:///./src/router/index.js","webpack:///./src/App.vue?4131","webpack:///src/components/Demo.vue","webpack:///./src/components/photoPicker/PhotoPicker.vue?ff37","webpack:///./static/wxJsComponent.js"],"names":["webpackJsonp","26cW","module","__webpack_exports__","__webpack_require__","injectStyle","ssrContext","__WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_13_5_0_vue_loader_lib_selector_type_script_index_0_Demo_vue__","__WEBPACK_IMPORTED_MODULE_1__node_modules_13_5_0_vue_loader_lib_template_compiler_index_id_data_v_1f804480_hasScoped_true_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_13_5_0_vue_loader_lib_selector_type_template_index_0_Demo_vue__","normalizeComponent","__vue_styles__","Component","2Y24","exports","8CGt","$","tyService","appId","this","commonRequest","requestType","isAsync","addtionalUrl","jsonData","callback","url","console","log","ajax","type","async","data","dataType","headers","Content-Type","success","result","JSON","stringify","errcode","error","XMLHttpRequest","textStatus","errorThrown","status","getWXConfigAccessToken","appid","secret","warn","accessTokenUrl","getWXConfigTicket","accessToken","jsapiTicketUrl","getWXConfigSignature","ticket","noncestr","timestamp","pageUrl","str","sha1","activeStatus","nonceStr","signature","coreSha1","blockArray","x","w","Array","a","b","c","d","e","i","length","olda","oldb","oldc","oldd","olde","j","rol","t","safeAdd","sha1Ft","sha1Kt","y","lsw","num","cnt","alignSHA1","nblk","blks","charCodeAt","binb2hex","binarray","hexTab","hexcase","charAt","s","8mmz","p","AwZn","render","_vm","_h","$createElement","_c","_self","staticClass","_v","attrs","src","qrImg","width","height","alt","_l","item","index","on","click","$event","deleteImg","imgs","addMoreImg","addImg","_e","ref","hidden","onLoadLocalIds","staticRenderFns","esExports","H3lr","__WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_13_5_0_vue_loader_lib_selector_type_script_index_0_PhotoPicker_vue__","__WEBPACK_IMPORTED_MODULE_1__node_modules_13_5_0_vue_loader_lib_template_compiler_index_id_data_v_359280eb_hasScoped_true_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_13_5_0_vue_loader_lib_selector_type_template_index_0_PhotoPicker_vue__","KtrQ","M93x","__WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_13_5_0_vue_loader_lib_selector_type_script_index_0_App_vue__","__WEBPACK_IMPORTED_MODULE_1__node_modules_13_5_0_vue_loader_lib_template_compiler_index_id_data_v_f715737c_hasScoped_false_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_13_5_0_vue_loader_lib_selector_type_template_index_0_App_vue__","NHnr","Object","defineProperty","value","__WEBPACK_IMPORTED_MODULE_0_vue__","__WEBPACK_IMPORTED_MODULE_1__App__","__WEBPACK_IMPORTED_MODULE_2__router__","__WEBPACK_IMPORTED_MODULE_3_mint_ui__","__WEBPACK_IMPORTED_MODULE_3_mint_ui___default","n","__WEBPACK_IMPORTED_MODULE_4_mint_ui_lib_style_css__","config","productionTip","use","el","router","h","QEa4","detectSubsampling","img","iw","naturalWidth","naturalHeight","canvas","document","createElement","ctx","getContext","drawImage","getImageData","detectVerticalSquash","ih","sy","ey","py","ratio","renderImageToDataURL","options","doSquash","renderImageToCanvas","toDataURL","quality","save","transformCoordinate","orientation","tmpCanvas","tmpCtx","vertSquashRatio","dw","Math","ceil","dh","dy","sx","dx","clearRect","restore","translate","scale","rotate","PI","MegaPixImage","srcImage","window","Blob","Image","URL","createObjectURL","webkitURL","Error","blob","_this","onload","listeners","imageLoadListeners","len","prototype","target","push","imgWidth","imgHeight","maxWidth","maxHeight","opt","k","tagName","toLowerCase","onrender","T4DX","__WEBPACK_IMPORTED_MODULE_0_eruda__","__WEBPACK_IMPORTED_MODULE_0_eruda___default","name","created","body","appendChild","init","container","tool","Y6LL","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_get_iterator__","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_get_iterator___default","__WEBPACK_IMPORTED_MODULE_1__static_wxJsComponent_js__","__WEBPACK_IMPORTED_MODULE_2_mint_ui__","iosWeixin","isAndroid","navigator","userAgent","indexOf","isIOS","isSafari","selectedPhotoNum","maxPhotoNum","photoList","methods","setCurrentPhotoNum","setLimitPhotoNum","pickPhoto","showWeixinPicker","getElementById","loadPhotoInfo","localIdOrFile","isWeixinJs","loadImageWithUrl","sourceImage","localId","originWidth","originHeight","getImageBase64Data","photoData","imageWidth","imageHeight","localData","loadAndCompressInputImageData","fileName","loadPhotoListInfo","photoUrlList","that","loadItem","photoItem","slice","avaiNum","localIds","$emit","message","duration","onPickedPhotos","event","files","currentTarget","fileItem","photos","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","next","done","err","return","mounted","YaEn","__WEBPACK_IMPORTED_MODULE_1_vue_router__","__WEBPACK_IMPORTED_MODULE_2__components_Demo__","routes","path","component","Z32g","ffUS","id","kouS","__WEBPACK_IMPORTED_MODULE_0__photoPicker_PhotoPicker_vue__","__WEBPACK_IMPORTED_MODULE_1_mint_ui__","imgData","components","photo-picker","title","showCancelButton","then","action","splice","$refs","tyPhotoPicker","debug","concat","localDataList","o1al","sw+w","accept","change","uVNh","__WEBPACK_IMPORTED_MODULE_0__tyService_js__","wx","EXIF","wxJsComponent","configHistory","initConfig","configData","jsApiList","hasError","res","ready","hasAuthorized","currentTime","round","Date","getTime","pageKey","lastTime","pageConfig2","wxJSConfig","location","href","split","signURL","replace","isSuccess","pageConfig","count","chooseImage","sizeType","sourceType","complete","fail","failed","previewImage","photoUrl","current","urls","loadLocalPhotoData","getLocalImgData","loadLocalPhotoListData","dataList","resItem","getLocalFileURL","file","info","dataURL","size","getData","getTag","reader","FileReader","readAsDataURL","image","expectWidth","expectHeight","base64","parseInt","imgScale","imgUrl","cxt","rotateImg","direction","step","degree","yrGq"],"mappings":"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","file":"static/js/app.d79a68cf7453f413e26a.js","sourcesContent":["webpackJsonp([1],{\n\n/***/ \"26cW\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_13_5_0_vue_loader_lib_selector_type_script_index_0_Demo_vue__ = __webpack_require__(\"kouS\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__node_modules_13_5_0_vue_loader_lib_template_compiler_index_id_data_v_1f804480_hasScoped_true_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_13_5_0_vue_loader_lib_selector_type_template_index_0_Demo_vue__ = __webpack_require__(\"AwZn\");\nfunction injectStyle (ssrContext) {\n  __webpack_require__(\"o1al\")\n}\nvar normalizeComponent = __webpack_require__(\"XAIM\")\n/* script */\n\n/* template */\n\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-1f804480\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_13_5_0_vue_loader_lib_selector_type_script_index_0_Demo_vue__[\"a\" /* default */],\n  __WEBPACK_IMPORTED_MODULE_1__node_modules_13_5_0_vue_loader_lib_template_compiler_index_id_data_v_1f804480_hasScoped_true_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_13_5_0_vue_loader_lib_selector_type_template_index_0_Demo_vue__[\"a\" /* default */],\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Component.exports);\n\n\n/***/ }),\n\n/***/ \"2Y24\":\n/***/ (function(module, exports) {\n\nmodule.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAYAAADDPmHLAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMDY3IDc5LjE1Nzc0NywgMjAxNS8wMy8zMC0yMzo0MDo0MiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTUgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjhGNzFGQUMyQjdGMzExRTdCRjMwRDhEQTY4MDNBRTVDIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjhGNzFGQUMzQjdGMzExRTdCRjMwRDhEQTY4MDNBRTVDIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6OEY3MUZBQzBCN0YzMTFFN0JGMzBEOERBNjgwM0FFNUMiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6OEY3MUZBQzFCN0YzMTFFN0JGMzBEOERBNjgwM0FFNUMiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz60Iy/8AAABxElEQVR42uzcQU7CQBSA4WJYinILOYIHIBxAbsPe4+gBCGHNohcwXoIQ9zgmY0KItLGLaTvzfcnb0I1O/9Ti4k3quj5XFOvOEQgAASAABIAAEAACQAAIAAEgAASAABAAAkAACAABIAAEgAAQAAIYn88w6zCPcdbxs+JMC/ydP8I8hzlefPYeZh/mEObJEyBvm6ub/+sYr/kTkLldw7WtAPJ3arj2JQAEgAAQAAJAAAgAASAABIAAEAACQAAIAAEgAASAABAAAkAACAABIAAEgAAQAAJAAAiAggO43Mkz6Xna9P3zJd1ZlGJH0F87ebjtZ4FFsp1FKZ4AGze/kyQ7i1IEsHMvO9vmEACFvwQuHXNnqxwCeA0zdy//bR7PbvQBLOLb7EuYmfvaahbP6hDPbvRfA6v4VeZtIAfc9r+As3cABIAAEAACQAAIAAEgAASAABAAAkAACAABIAAEgAAQAAJAAAgAASAABIAAEAACQAAIAAH07qHh2r0A8te0s2glgPzd2lmUZCePAPp3vbMo6U6eoZlWZRrSziJPAASAABAAAkAACAABIAAEgAAQAAJAAAgAASAABIAAEAACQAAIgK6+BRgAAUMpKcJwzJgAAAAASUVORK5CYII=\"\n\n/***/ }),\n\n/***/ \"8CGt\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n\n\nvar $ = __webpack_require__(\"bXvV\")\n\nvar tyService = new function () {\n  var appId = ''\n  // 接口前半段\n  var baseUrl = 'https://api.weixin.qq.com'\n  // 获取AccessToken\n  var accessTokenUrl = '/cgi-bin/token'\n  // 获取jsapi_ticket\n  var jsapiTicketUrl = '/cgi-bin/ticket/getticket'\n  // 发送请求\n  this.commonRequest = function (requestType, isAsync, addtionalUrl, jsonData, callback) {\n    var url = baseUrl + addtionalUrl\n    console.log('commonRequest #url:' + url + '#isAsync:' + isAsync + '#jsonData:' + jsonData)\n    $.ajax({\n      type: requestType,\n      url: url,\n      async: isAsync,\n      data: jsonData,\n      dataType: 'JSON',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      success: function (result) {\n        console.log('commonRequest success url:' + url + ' 结果：' + JSON.stringify(result))\n        if (result && result.errcode === 0) {\n          if (callback) {\n            callback(true, result)\n          }\n        } else {\n          if (callback) {\n            callback(false, result)\n          }\n        }\n      },\n      error: function (XMLHttpRequest, textStatus, errorThrown) {\n        console.log('commonRequest error url:' + url + ' 失败：' + XMLHttpRequest.status)\n        console.log(XMLHttpRequest)\n        console.log(textStatus)\n        console.log(errorThrown)\n        if (callback) {\n          callback(false)\n        }\n      }\n    })\n  }\n  // 获取微信AccessToken（实际开发中，应该由后台获取AccessToken）\n  this.getWXConfigAccessToken = function (appid, secret, callback) {\n    appId = appid\n    console.warn('getWXConfigAccessToken')\n    this.commonRequest('GET', false, (accessTokenUrl + '?grant_type=client_credential' + '&appid=' + appid + '&secret=' + secret), '', function (success, result) {\n      if (success) {\n        if (callback) {\n          callback(true, result.data)\n        }\n      } else {\n        if (callback) {\n          callback(false)\n        }\n      }\n    })\n  }\n\n  // 获取微信jsapi_ticket（实际开发中，应该由后台获取jsapi_ticket）\n  this.getWXConfigTicket = function (accessToken, callback) {\n    console.warn('getWXConfigTicket')\n    this.commonRequest('GET', false, (jsapiTicketUrl + '?type=jsapi' + '&access_token=' + accessToken), '', function (success, result) {\n      if (success) {\n        if (callback) {\n          callback(true, result.data)\n        }\n      } else {\n        if (callback) {\n          callback(false)\n        }\n      }\n    })\n  }\n\n  // 获取微信config签名（实际开发中，应该由后台实现生成签名的逻辑）\n  this.getWXConfigSignature = function (ticket, noncestr, timestamp, pageUrl, callback) {\n    console.warn('getWXConfigSignature:' + pageUrl)\n    var str = 'jsapi_ticket=' + ticket + '&noncestr=' + noncestr + '&timestamp=' + timestamp + '&url=' + pageUrl\n    var sha1 = this.sha1(str)\n    if (sha1) {\n      var response = {\n        'activeStatus': true,\n        'appId': appId,\n        'timestamp': timestamp,\n        'nonceStr': noncestr,\n        'signature': sha1\n      }\n      callback(true, response)\n    } else {\n      callback(false)\n    }\n  }\n\n  // SHA-1算法（实际开发中，应该由后台实现SHA-1算法）\n  this.sha1 = function (str) {\n    hexSha1(str)\n\n    var hexcase = 0  /* hex output format. 0 - lowercase 1 - uppercase */\n    function hexSha1 (s) {\n      return binb2hex(coreSha1(alignSHA1(s)))\n    }\n\n    /*\n     *\n     * Calculate the SHA-1 of an array of big-endian words, and a bit length\n     *\n     */\n    function coreSha1 (blockArray) {\n      var x = blockArray // append padding\n      var w = Array(80)\n      var a = 1732584193\n      var b = -271733879\n      var c = -1732584194\n      var d = 271733878\n      var e = -1009589776\n      for (var i = 0; i < x.length; i += 16) { // 每次处理512位 16*32\n        var olda = a\n        var oldb = b\n        var oldc = c\n        var oldd = d\n        var olde = e\n        for (var j = 0; j < 80; j++) { // 对每个512位进行80步操作\n          if (j < 16) {\n            w[j] = x[i + j]\n          } else {\n            w[j] = rol(w[j - 3] ^ w[j - 8] ^ w[j - 14] ^ w[j - 16], 1)\n          }\n          var t = safeAdd(safeAdd(rol(a, 5), sha1Ft(j, b, c, d)), safeAdd(safeAdd(e, w[j]), sha1Kt(j)))\n          e = d\n          d = c\n          c = rol(b, 30)\n          b = a\n          a = t\n        }\n        a = safeAdd(a, olda)\n        b = safeAdd(b, oldb)\n        c = safeAdd(c, oldc)\n        d = safeAdd(d, oldd)\n        e = safeAdd(e, olde)\n      }\n      return [a, b, c, d, e]\n    }\n\n    /*\n     *\n     * 返回对应F函数的值\n     *\n     */\n    function sha1Ft (t, b, c, d) {\n      if (t < 20) {\n        return (b & c) | ((~b) & d)\n      }\n      if (t < 40) {\n        return b ^ c ^ d\n      }\n      if (t < 60) {\n        return (b & c) | (b & d) | (c & d)\n      }\n      return b ^ c ^ d // t<80\n    }\n\n    /*\n     * 返回对应的Kt值\n     *\n     */\n    function sha1Kt (t) {\n      return (t < 20) ? 1518500249 : (t < 40) ? 1859775393 : (t < 60) ? -1894007588 : -899497514\n    }\n\n    /*\n     *\n     * 将32位数拆成高16位和低16位分别进行相加，从而实现 MOD 2^32 的加法\n     *\n     */\n    function safeAdd (x, y) {\n      var lsw = (x & 0xFFFF) + (y & 0xFFFF)\n      var msw = (x >> 16) + (y >> 16) + (lsw >> 16)\n      return (msw << 16) | (lsw & 0xFFFF)\n    }\n\n    /*\n     *\n     * 32位二进制数循环左移\n     *\n     */\n    function rol (num, cnt) {\n      return (num << cnt) | (num >>> (32 - cnt))\n    }\n\n    /*\n     *\n     * The standard SHA1 needs the input string to fit into a block\n     * This function align the input string to meet the requirement\n     *\n     */\n    function alignSHA1 (str) {\n      var nblk = ((str.length + 8) >> 6) + 1\n      var blks = new Array(nblk * 16)\n      for (var i = 0; i < nblk * 16; i++) {\n        blks[i] = 0\n      }\n      for (i = 0; i < str.length; i++) {\n        blks[i >> 2] |= str.charCodeAt(i) << (24 - (i & 3) * 8)\n      }\n      blks[i >> 2] |= 0x80 << (24 - (i & 3) * 8)\n      blks[nblk * 16 - 1] = str.length * 8\n      return blks\n    }\n\n    /*\n     *\n     * Convert an array of big-endian words to a hex string.\n     *\n     */\n    function binb2hex (binarray) {\n      var hexTab = hexcase ? '0123456789ABCDEF' : '0123456789abcdef'\n      var str = ''\n      for (var i = 0; i < binarray.length * 4; i++) {\n        str += hexTab.charAt((binarray[i >> 2] >> ((3 - i % 4) * 8 + 4)) & 0xF) + hexTab.charAt((binarray[i >> 2] >> ((3 - i % 4) * 8)) & 0xF)\n      }\n      return str\n    }\n  }\n}\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (tyService);\n\n\n/***/ }),\n\n/***/ \"8mmz\":\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__.p + \"static/img/测试公众号二维码.f327aa5.jpg\";\n\n/***/ }),\n\n/***/ \"AwZn\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nvar render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"demo\"},[_c('div',{staticClass:\"title\"},[_vm._v(\"\\n    TYPhotoPicker4\\n  \")]),_vm._v(\" \"),_c('div',{staticClass:\"tip\"},[_vm._v(\"\\n    1. 能够在微信之外运行，但主要还是为了在微信页面内调用相册选择器而设计的 \"),_c('br'),_vm._v(\"\\n    2. 在微信中使用，由于iOS平台中的图片转码缓慢，所以弃用调用微信js，通过设置PhotoPicker.iosWeixin也能够调用微信JS \"),_c('br'),_vm._v(\"\\n    关注这个微信号：关注后才允许调用weixin-js-sdk \"),_c('br'),_vm._v(\" \"),_c('img',{attrs:{\"src\":_vm.qrImg,\"width\":\"200\",\"height\":\"200\",\"alt\":\"\"}}),_vm._v(\" \"),_c('br'),_vm._v(\"\\n    因为测试账号限制了只允许被100人关注, 当发现不能在微信中运行的时候请来到下面，自行申请测试账号， \"),_c('br'),_vm._v(\"\\n    申请微信测试公众号：https://mp.weixin.qq.com/debug/cgi-bin/sandbox?t=sandbox/login \"),_c('br'),_vm._v(\"\\n    申请账号之后填写测试域名（一个测试账号允许有一个域名调用weixin-js-sdk），并调整wxJsComponen中对appid、secret的赋值\\n  \")]),_vm._v(\" \"),_c('div',{staticClass:\"item\"},[_c('div',{staticClass:\"question\"},[_vm._v(\"\\n      请选择图片：\\n    \")]),_vm._v(\" \"),_c('div',{staticClass:\"display-flex-box flex-wrap\"},[_vm._l((_vm.imgs),function(item,index){return _c('div',{staticClass:\"img-box\"},[_c('img',{staticClass:\"img shrink-none\",attrs:{\"src\":item},on:{\"click\":function($event){_vm.deleteImg(index)}}})])}),_vm._v(\" \"),(_vm.imgs.length < 10)?_c('div',{staticClass:\"img-box background-none\"},[_c('img',{staticClass:\"img shrink-none\",attrs:{\"src\":_vm.addMoreImg},on:{\"click\":_vm.addImg}})]):_vm._e(),_vm._v(\" \"),_c('photo-picker',{ref:\"tyPhotoPicker\",attrs:{\"hidden\":\"true\"},on:{\"onLoadLocalIds\":_vm.onLoadLocalIds}})],2)])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\n/* harmony default export */ __webpack_exports__[\"a\"] = (esExports);\n\n/***/ }),\n\n/***/ \"H3lr\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_13_5_0_vue_loader_lib_selector_type_script_index_0_PhotoPicker_vue__ = __webpack_require__(\"Y6LL\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__node_modules_13_5_0_vue_loader_lib_template_compiler_index_id_data_v_359280eb_hasScoped_true_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_13_5_0_vue_loader_lib_selector_type_template_index_0_PhotoPicker_vue__ = __webpack_require__(\"sw+w\");\nfunction injectStyle (ssrContext) {\n  __webpack_require__(\"Z32g\")\n}\nvar normalizeComponent = __webpack_require__(\"XAIM\")\n/* script */\n\n/* template */\n\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-359280eb\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_13_5_0_vue_loader_lib_selector_type_script_index_0_PhotoPicker_vue__[\"a\" /* default */],\n  __WEBPACK_IMPORTED_MODULE_1__node_modules_13_5_0_vue_loader_lib_template_compiler_index_id_data_v_359280eb_hasScoped_true_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_13_5_0_vue_loader_lib_selector_type_template_index_0_PhotoPicker_vue__[\"a\" /* default */],\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Component.exports);\n\n\n/***/ }),\n\n/***/ \"KtrQ\":\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ \"M93x\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_13_5_0_vue_loader_lib_selector_type_script_index_0_App_vue__ = __webpack_require__(\"T4DX\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__node_modules_13_5_0_vue_loader_lib_template_compiler_index_id_data_v_f715737c_hasScoped_false_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_13_5_0_vue_loader_lib_selector_type_template_index_0_App_vue__ = __webpack_require__(\"ffUS\");\nfunction injectStyle (ssrContext) {\n  __webpack_require__(\"KtrQ\")\n}\nvar normalizeComponent = __webpack_require__(\"XAIM\")\n/* script */\n\n/* template */\n\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_13_5_0_vue_loader_lib_selector_type_script_index_0_App_vue__[\"a\" /* default */],\n  __WEBPACK_IMPORTED_MODULE_1__node_modules_13_5_0_vue_loader_lib_template_compiler_index_id_data_v_f715737c_hasScoped_false_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_13_5_0_vue_loader_lib_selector_type_template_index_0_App_vue__[\"a\" /* default */],\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Component.exports);\n\n\n/***/ }),\n\n/***/ \"NHnr\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_vue__ = __webpack_require__(\"I+zW\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__App__ = __webpack_require__(\"M93x\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__router__ = __webpack_require__(\"YaEn\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_mint_ui__ = __webpack_require__(\"gxss\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_mint_ui___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_mint_ui__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_mint_ui_lib_style_css__ = __webpack_require__(\"yrGq\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_mint_ui_lib_style_css___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4_mint_ui_lib_style_css__);\n\n\n\n\n\n\n__WEBPACK_IMPORTED_MODULE_0_vue__[\"default\"].config.productionTip = false;\n\n__WEBPACK_IMPORTED_MODULE_0_vue__[\"default\"].use(__WEBPACK_IMPORTED_MODULE_3_mint_ui___default.a);\n\n/* eslint-disable no-new */\nnew __WEBPACK_IMPORTED_MODULE_0_vue__[\"default\"]({\n  el: '#app',\n  router: __WEBPACK_IMPORTED_MODULE_2__router__[\"a\" /* default */],\n  render: function render(h) {\n    return h(__WEBPACK_IMPORTED_MODULE_1__App__[\"a\" /* default */]);\n  }\n});\n\n/***/ }),\n\n/***/ \"QEa4\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/**\n * Mega pixel image rendering library for iOS6 Safari\n *\n * Fixes iOS6 Safari's image file rendering issue for large size image (over mega-pixel),\n * which causes unexpected subsampling when drawing it in canvas.\n * By using this library, you can safely render the image with proper stretching.\n *\n * Copyright (c) 2012 Shinichi Tomita <shinichi.tomita@gmail.com>\n * Released under the MIT license\n */\n \n// (function() {\n\n\t/**\n\t * Detect subsampling in loaded image.\n\t * In iOS, larger images than 2M pixels may be subsampled in rendering.\n\t */\n\tfunction detectSubsampling(img) {\n\t\tvar iw = img.naturalWidth,\n\t\t\tih = img.naturalHeight;\n\t\tif (iw * ih > 1024 * 1024) { // subsampling may happen over megapixel image\n\t\t\tvar canvas = document.createElement('canvas');\n\t\t\tcanvas.width = canvas.height = 1;\n\t\t\tvar ctx = canvas.getContext('2d');\n\t\t\tctx.drawImage(img, -iw + 1, 0);\n\t\t\t// subsampled image becomes half smaller in rendering size.\n\t\t\t// check alpha channel value to confirm image is covering edge pixel or not.\n\t\t\t// if alpha value is 0 image is not covering, hence subsampled.\n\t\t\treturn ctx.getImageData(0, 0, 1, 1).data[3] === 0;\n\t\t} else {\n\t\t\treturn false;\n\t\t}\n\t}\n\n\t/**\n\t * Detecting vertical squash in loaded image.\n\t * Fixes a bug which squash image vertically while drawing into canvas for some images.\n\t */\n\tfunction detectVerticalSquash(img, iw, ih) {\n\t\tvar canvas = document.createElement('canvas');\n\t\tcanvas.width = 1;\n\t\tcanvas.height = ih;\n\t\tvar ctx = canvas.getContext('2d');\n\t\tctx.drawImage(img, 0, 0);\n\t\tvar data = ctx.getImageData(0, 0, 1, ih).data;\n\t\t// search image edge pixel position in case it is squashed vertically.\n\t\tvar sy = 0;\n\t\tvar ey = ih;\n\t\tvar py = ih;\n\t\twhile (py > sy) {\n\t\t\tvar alpha = data[(py - 1) * 4 + 3];\n\t\t\tif (alpha === 0) {\n\t\t\t\tey = py;\n\t\t\t} else {\n\t\t\t\tsy = py;\n\t\t\t}\n\t\t\tpy = (ey + sy) >> 1;\n\t\t}\n\t\tvar ratio = (py / ih);\n\t\treturn (ratio === 0) ? 1 : ratio;\n\t}\n\n\t/**\n\t * Rendering image element (with resizing) and get its data URL\n\t */\n\tfunction renderImageToDataURL(img, options, doSquash) {\n\t\tvar canvas = document.createElement('canvas');\n\t\trenderImageToCanvas(img, canvas, options, doSquash);\n\t\treturn canvas.toDataURL(\"image/jpeg\", options.quality || 0.8);\n\t}\n\n\t/**\n\t * Rendering image element (with resizing) into the canvas element\n\t */\n\tfunction renderImageToCanvas(img, canvas, options, doSquash) {\n\t\tvar iw = img.naturalWidth,\n\t\t\tih = img.naturalHeight;\n\t\tvar width = options.width,\n\t\t\theight = options.height;\n\t\tvar ctx = canvas.getContext('2d');\n\t\tctx.save();\n\t\ttransformCoordinate(canvas, ctx, width, height, options.orientation);\n\t\tvar subsampled = detectSubsampling(img);\n\t\tif (subsampled) {\n\t\t\tiw /= 2;\n\t\t\tih /= 2;\n\t\t}\n\t\tvar d = 1024; // size of tiling canvas\n\t\tvar tmpCanvas = document.createElement('canvas');\n\t\ttmpCanvas.width = tmpCanvas.height = d;\n\t\tvar tmpCtx = tmpCanvas.getContext('2d');\n\t\tvar vertSquashRatio = doSquash ? detectVerticalSquash(img, iw, ih) : 1;\n\t\tvar dw = Math.ceil(d * width / iw);\n\t\tvar dh = Math.ceil(d * height / ih / vertSquashRatio);\n\t\tvar sy = 0;\n\t\tvar dy = 0;\n\t\twhile (sy < ih) {\n\t\t\tvar sx = 0;\n\t\t\tvar dx = 0;\n\t\t\twhile (sx < iw) {\n\t\t\t\ttmpCtx.clearRect(0, 0, d, d);\n\t\t\t\ttmpCtx.drawImage(img, -sx, -sy);\n\t\t\t\tctx.drawImage(tmpCanvas, 0, 0, d, d, dx, dy, dw, dh);\n\t\t\t\tsx += d;\n\t\t\t\tdx += dw;\n\t\t\t}\n\t\t\tsy += d;\n\t\t\tdy += dh;\n\t\t}\n\t\tctx.restore();\n\t\ttmpCanvas = tmpCtx = null;\n\t}\n\n\t/**\n\t * Transform canvas coordination according to specified frame size and orientation\n\t * Orientation value is from EXIF tag\n\t */\n\tfunction transformCoordinate(canvas, ctx, width, height, orientation) {\n\t\tswitch (orientation) {\n\t\t\tcase 5:\n\t\t\tcase 6:\n\t\t\tcase 7:\n\t\t\tcase 8:\n\t\t\t\tcanvas.width = height;\n\t\t\t\tcanvas.height = width;\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tcanvas.width = width;\n\t\t\t\tcanvas.height = height;\n\t\t}\n\t\tswitch (orientation) {\n\t\t\tcase 2:\n\t\t\t\t// horizontal flip\n\t\t\t\tctx.translate(width, 0);\n\t\t\t\tctx.scale(-1, 1);\n\t\t\t\tbreak;\n\t\t\tcase 3:\n\t\t\t\t// 180 rotate left\n\t\t\t\tctx.translate(width, height);\n\t\t\t\tctx.rotate(Math.PI);\n\t\t\t\tbreak;\n\t\t\tcase 4:\n\t\t\t\t// vertical flip\n\t\t\t\tctx.translate(0, height);\n\t\t\t\tctx.scale(1, -1);\n\t\t\t\tbreak;\n\t\t\tcase 5:\n\t\t\t\t// vertical flip + 90 rotate right\n\t\t\t\tctx.rotate(0.5 * Math.PI);\n\t\t\t\tctx.scale(1, -1);\n\t\t\t\tbreak;\n\t\t\tcase 6:\n\t\t\t\t// 90 rotate right\n\t\t\t\tctx.rotate(0.5 * Math.PI);\n\t\t\t\tctx.translate(0, -height);\n\t\t\t\tbreak;\n\t\t\tcase 7:\n\t\t\t\t// horizontal flip + 90 rotate right\n\t\t\t\tctx.rotate(0.5 * Math.PI);\n\t\t\t\tctx.translate(width, -height);\n\t\t\t\tctx.scale(-1, 1);\n\t\t\t\tbreak;\n\t\t\tcase 8:\n\t\t\t\t// 90 rotate left\n\t\t\t\tctx.rotate(-0.5 * Math.PI);\n\t\t\t\tctx.translate(-width, 0);\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\n\t/**\n\t * MegaPixImage class\n\t */\n\tfunction MegaPixImage(srcImage) {\n\t\tif (window.Blob && srcImage instanceof Blob) {\n\t\t\tvar img = new Image();\n\t\t\tvar URL = window.URL && window.URL.createObjectURL ? window.URL :\n\t\t\t\twindow.webkitURL && window.webkitURL.createObjectURL ? window.webkitURL :\n\t\t\t\tnull;\n\t\t\tif (!URL) {\n\t\t\t\tthrow Error(\"No createObjectURL function found to create blob url\");\n\t\t\t}\n\t\t\timg.src = URL.createObjectURL(srcImage);\n\t\t\tthis.blob = srcImage;\n\t\t\tsrcImage = img;\n\t\t}\n\t\tif (!srcImage.naturalWidth && !srcImage.naturalHeight) {\n\t\t\tvar _this = this;\n\t\t\tsrcImage.onload = function() {\n\t\t\t\tvar listeners = _this.imageLoadListeners;\n\t\t\t\tif (listeners) {\n\t\t\t\t\t_this.imageLoadListeners = null;\n\t\t\t\t\tfor (var i = 0, len = listeners.length; i < len; i++) {\n\t\t\t\t\t\tlisteners[i]();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\t\tthis.imageLoadListeners = [];\n\t\t}\n\t\tthis.srcImage = srcImage;\n\t}\n\n\t/**\n\t * Rendering megapix image into specified target element\n\t */\n\tMegaPixImage.prototype.render = function(target, options) {\n\t\tif (this.imageLoadListeners) {\n\t\t\tvar _this = this;\n\t\t\tthis.imageLoadListeners.push(function() {\n\t\t\t\t_this.render(target, options)\n\t\t\t});\n\t\t\treturn;\n\t\t}\n\t\toptions = options || {};\n\t\tvar imgWidth = this.srcImage.naturalWidth,\n\t\t\timgHeight = this.srcImage.naturalHeight,\n\t\t\twidth = options.width,\n\t\t\theight = options.height,\n\t\t\tmaxWidth = options.maxWidth,\n\t\t\tmaxHeight = options.maxHeight,\n\t\t\tdoSquash = !this.blob || this.blob.type === 'image / jpeg';\n\t\tif (width && !height) {\n\t\t\theight = (imgHeight * width / imgWidth) << 0;\n\t\t} else if (height && !width) {\n\t\t\twidth = (imgWidth * height / imgHeight) << 0;\n\t\t} else {\n\t\t\twidth = imgWidth;\n\t\t\theight = imgHeight;\n\t\t}\n\t\tif (maxWidth && width > maxWidth) {\n\t\t\twidth = maxWidth;\n\t\t\theight = (imgHeight * width / imgWidth) << 0;\n\t\t}\n\t\tif (maxHeight && height > maxHeight) {\n\t\t\theight = maxHeight;\n\t\t\twidth = (imgWidth * height / imgHeight) << 0;\n\t\t}\n\t\tvar opt = {\n\t\t\twidth: width,\n\t\t\theight: height\n\t\t};\n\t\tfor (var k in options) opt[k] = options[k];\n\n\t\tvar tagName = target.tagName.toLowerCase();\n\t\tif (tagName === 'img') {\n\t\t\ttarget.src = renderImageToDataURL(this.srcImage, opt, doSquash);\n\t\t} else if (tagName === 'canvas') {\n\t\t\trenderImageToCanvas(this.srcImage, target, opt, doSquash);\n\t\t}\n\t\tif (typeof this.onrender === ' function') {\n\t\t\tthis.onrender(target);\n\t\t}\n\t};\n\n\t/**\n\t * Export class to global\n\t */\n// \tif (typeof define === ' function' && define.amd) {\n// \t\tdefine([], function() {\n// \t\t\treturn MegaPixImage;\n// \t\t}); // for AMD loader\n// \t} else {\n// \t\tthis.MegaPixImage = MegaPixImage;\n// \t}\n// })();\n\nmodule.exports = MegaPixImage;\n\n\n/***/ }),\n\n/***/ \"T4DX\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_eruda__ = __webpack_require__(\"Gnhh\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_eruda___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_eruda__);\n//\n//\n//\n//\n//\n//\n\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n  name: 'app',\n  created: function created() {\n    // 日志查看\n    var el = document.createElement('div');\n    document.body.appendChild(el);\n    __WEBPACK_IMPORTED_MODULE_0_eruda___default.a.init({\n      container: el,\n      tool: ['console', 'elements']\n    });\n  }\n});\n\n/***/ }),\n\n/***/ \"Y6LL\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_get_iterator__ = __webpack_require__(\"u6qr\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_get_iterator___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_get_iterator__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__static_wxJsComponent_js__ = __webpack_require__(\"uVNh\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_mint_ui__ = __webpack_require__(\"gxss\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_mint_ui___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_mint_ui__);\n\n//\n//\n//\n//\n//\n//\n//\n\n// var wxJsComponent = require('../../../static/wxJsComponent.js')\n\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n  name: 'PhotoPicker',\n  data: function data() {\n    return {\n      iosWeixin: false, // ios是否使用微信js sdk选取图片\n      isAndroid: navigator.userAgent.toLowerCase().indexOf('android') !== -1,\n      isIOS: navigator.userAgent.toLowerCase().indexOf('iphone os') !== -1,\n      isSafari: navigator.userAgent.toLowerCase().indexOf('safari') !== -1,\n      selectedPhotoNum: 0, // 已经选取的图片张数\n      maxPhotoNum: 9, // 最大图片张数限制 默认9张，参考微信的最大限制\n      photoList: []\n    };\n  },\n\n  methods: {\n    // 设置已经选择的图片张数\n    setCurrentPhotoNum: function setCurrentPhotoNum(num) {\n      if (num) {\n        this.selectedPhotoNum = num;\n      }\n    },\n    // 设置最大可选张数\n    setLimitPhotoNum: function setLimitPhotoNum(num) {\n      if (num) {\n        this.maxPhotoNum = num;\n      }\n    },\n    // 选取图片点击事件\n    pickPhoto: function pickPhoto() {\n      // 清空图片列表\n      this.photoList = [];\n      // android使用微信js接口选图片\n      if (this.isAndroid || this.iosWeixin) {\n        console.warn('pickPhoto1');\n        this.showWeixinPicker();\n      } else {\n        // 使用系统input选图片\n        console.warn('pickPhoto3');\n        document.getElementById('photo-picker-input').click();\n      }\n    },\n    // 加载图片信息\n    loadPhotoInfo: function loadPhotoInfo(localIdOrFile, isWeixinJs, callback) {\n      if (!isWeixinJs) {\n        if (this.isIOS || this.isSafari) {\n          __WEBPACK_IMPORTED_MODULE_1__static_wxJsComponent_js__[\"a\" /* default */].loadAndCompressInputImageData(localIdOrFile, function (photoData, imageWidth, imageHeight) {\n            if (callback) {\n              console.warn('wxJsComponent.loadAndCompressInputImageData imageWidth:' + imageWidth + ', imageHeight:' + imageHeight);\n              callback({ 'isWeixinJs': false, 'fileName': localIdOrFile.name, 'localData': photoData, 'originWidth': imageWidth, 'originHeight': imageHeight });\n            }\n          });\n        } else {\n          __WEBPACK_IMPORTED_MODULE_1__static_wxJsComponent_js__[\"a\" /* default */].loadAndCompressInputImageData(localIdOrFile, function (photoData, imageWidth, imageHeight) {\n            if (callback) {\n              console.warn('wxJsComponent.loadAndCompressInputImageData imageWidth:' + imageWidth + ', imageHeight:' + imageHeight);\n              callback({ 'isWeixinJs': false, 'fileName': localIdOrFile.name, 'localData': photoData, 'originWidth': imageWidth, 'originHeight': imageHeight });\n            }\n          });\n        }\n      } else {\n        if (this.isAndroid) {\n          __WEBPACK_IMPORTED_MODULE_1__static_wxJsComponent_js__[\"a\" /* default */].loadImageWithUrl(localIdOrFile, function (sourceImage) {\n            if (callback) {\n              callback({ 'isWeixinJs': true, 'localId': localIdOrFile, 'originWidth': sourceImage.width, 'originHeight': sourceImage.height });\n            }\n          });\n        } else {\n          __WEBPACK_IMPORTED_MODULE_1__static_wxJsComponent_js__[\"a\" /* default */].getImageBase64Data(localIdOrFile, function (photoData, imageWidth, imageHeight) {\n            if (callback) {\n              callback({ 'isWeixinJs': true, 'localId': localIdOrFile, 'localData': photoData, 'originWidth': imageWidth, 'originHeight': imageHeight });\n            }\n          });\n        }\n      }\n    },\n    // 加载图片信息\n    loadPhotoListInfo: function loadPhotoListInfo(photoUrlList, isWeixinJs, callback) {\n      if (photoUrlList && photoUrlList.length) {\n        var that = this;\n        var loadItem = photoUrlList[0];\n        this.loadPhotoInfo(loadItem, isWeixinJs, function (photoItem) {\n          that.photoList.push(photoItem);\n          if (photoUrlList.length > 1) {\n            that.loadPhotoListInfo(photoUrlList.slice(1), isWeixinJs, callback);\n          } else {\n            if (callback) {\n              callback(); // 全部加载完\n            }\n          }\n        });\n      } else {\n        if (callback) {\n          callback();\n        }\n      }\n    },\n    // 微信Js选图片\n    showWeixinPicker: function showWeixinPicker() {\n      console.log('onTapShowMore');\n      var that = this;\n      var avaiNum = this.maxPhotoNum - this.selectedPhotoNum;\n      __WEBPACK_IMPORTED_MODULE_1__static_wxJsComponent_js__[\"a\" /* default */].pickPhoto(function (success, localIds) {\n        if (success) {\n          if (localIds && localIds.length) {\n            that.loadPhotoListInfo(localIds, true, function () {\n              that.$emit('onLoadLocalIds', that.photoList);\n              that.photoList = null;\n            });\n          }\n        } else {\n          Object(__WEBPACK_IMPORTED_MODULE_2_mint_ui__[\"Toast\"])({\n            message: '添加图片失败',\n            duration: 600\n          });\n        }\n      }, avaiNum);\n    },\n    // 系统input选取图片\n    onPickedPhotos: function onPickedPhotos(event) {\n      var files = event.currentTarget.files;\n      console.log('onPickedPhotos');\n      var that = this;\n      if (files && files.length) {\n        // 限制图片张数\n        if (files.length + this.selectedPhotoNum > this.maxPhotoNum) {\n          // alert('最多可以选取' + this.maxPhotoNum + '张图片')\n          Object(__WEBPACK_IMPORTED_MODULE_2_mint_ui__[\"Toast\"])({\n            message: '最多可以选取' + this.maxPhotoNum + '张图片',\n            duration: 600\n          });\n          return;\n        }\n        var photos = [];\n        var fileItem;\n        var _iteratorNormalCompletion = true;\n        var _didIteratorError = false;\n        var _iteratorError = undefined;\n\n        try {\n          for (var _iterator = __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_get_iterator___default()(files), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n            fileItem = _step.value;\n\n            photos.push(fileItem);\n          }\n        } catch (err) {\n          _didIteratorError = true;\n          _iteratorError = err;\n        } finally {\n          try {\n            if (!_iteratorNormalCompletion && _iterator.return) {\n              _iterator.return();\n            }\n          } finally {\n            if (_didIteratorError) {\n              throw _iteratorError;\n            }\n          }\n        }\n\n        this.loadPhotoListInfo(photos, false, function () {\n          that.$emit('onLoadLocalIds', that.photoList);\n        });\n      }\n    }\n  },\n  mounted: function mounted() {},\n  created: function created() {}\n});\n\n/***/ }),\n\n/***/ \"YaEn\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_vue__ = __webpack_require__(\"I+zW\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_vue_router__ = __webpack_require__(\"1eSk\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__components_Demo__ = __webpack_require__(\"26cW\");\n\n\n\n\n__WEBPACK_IMPORTED_MODULE_0_vue__[\"default\"].use(__WEBPACK_IMPORTED_MODULE_1_vue_router__[\"a\" /* default */]);\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (new __WEBPACK_IMPORTED_MODULE_1_vue_router__[\"a\" /* default */]({\n  routes: [{\n    path: '/',\n    name: 'Demo',\n    component: __WEBPACK_IMPORTED_MODULE_2__components_Demo__[\"a\" /* default */]\n  }]\n}));\n\n/***/ }),\n\n/***/ \"Z32g\":\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ \"ffUS\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nvar render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('router-view')],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\n/* harmony default export */ __webpack_exports__[\"a\"] = (esExports);\n\n/***/ }),\n\n/***/ \"kouS\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__photoPicker_PhotoPicker_vue__ = __webpack_require__(\"H3lr\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_mint_ui__ = __webpack_require__(\"gxss\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_mint_ui___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_mint_ui__);\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n  name: 'Demo',\n  data: function data() {\n    return {\n      isWeixinJs: false, // 是否在调用微信Js\n      addMoreImg: __webpack_require__(\"2Y24\"),\n      imgs: [], // 界面展示的图片本地地址\n      imgData: [], // 需要上传图片的数据\n      // http://mmbiz.qpic.cn/mmbiz_jpg/52qI3slqMgEQ0sucicop1LAYAjTTc7GBecpTxGYn6jBXpw3P8xoh2O1AwsPrAgHzSqmgk8EQnjicAhm0OTJ2M9tA/0\n      qrImg: __webpack_require__(\"8mmz\")\n    };\n  },\n\n  components: {\n    'photo-picker': __WEBPACK_IMPORTED_MODULE_0__photoPicker_PhotoPicker_vue__[\"a\" /* default */]\n  },\n  methods: {\n    deleteImg: function deleteImg(index) {\n      var that = this;\n      Object(__WEBPACK_IMPORTED_MODULE_1_mint_ui__[\"MessageBox\"])({\n        title: '提示',\n        message: '是否删除图片',\n        showCancelButton: true\n      }).then(function (action) {\n        if (action === 'cancel') {\n          return;\n        }\n        that.imgs.splice(index, 1);\n        that.imgData.splice(index, 1);\n      }, function (error) {\n        console.log(error);\n      });\n    },\n    addImg: function addImg() {\n      console.log('addImg');\n      // 设置最多选10张图片\n      this.$refs.tyPhotoPicker.setLimitPhotoNum(10);\n      // 已经选择的图片张数\n      this.$refs.tyPhotoPicker.setCurrentPhotoNum(this.imgs.length);\n      this.$refs.tyPhotoPicker.pickPhoto();\n    },\n    onLoadLocalIds: function onLoadLocalIds(photos) {\n      // 图片选择完毕走这里\n      console.debug('onLoadLocalIds====');\n      console.debug(photos);\n      this.imgData = this.imgData.concat(photos);\n      this.isWeixinJs = photos[0].isWeixinJs;\n      if (this.isWeixinJs) {\n        // console.debug('使用微信SDK')\n        var localIds = [];\n        for (var j = 0; j < photos.length; j++) {\n          localIds.push(photos[j].localId);\n        }\n        this.imgs = this.imgs.concat(localIds); // 安卓是localId，iOS是base64\n        console.debug('this.imgs----');\n        console.debug(this.imgs);\n      } else {\n        // console.debug('不使用微信SDK')\n        var localDataList = [];\n        for (var i = 0; i < photos.length; i++) {\n          if (photos[i].localData) {\n            localDataList.push(photos[i].localData);\n          }\n        }\n        this.imgs = this.imgs.concat(localDataList); // 安卓是localId，iOS是base64\n        console.debug('this.imgs----');\n        console.debug(this.imgs);\n      }\n    }\n  }\n});\n\n/***/ }),\n\n/***/ \"o1al\":\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ \"sw+w\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nvar render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"photo-picker-container\"},[_c('input',{attrs:{\"id\":\"photo-picker-input\",\"hidden\":\"true\",\"name\":\"file\",\"type\":\"file\",\"accept\":\"image/*\"},on:{\"change\":function($event){_vm.onPickedPhotos($event)}}})])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\n/* harmony default export */ __webpack_exports__[\"a\"] = (esExports);\n\n/***/ }),\n\n/***/ \"uVNh\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__tyService_js__ = __webpack_require__(\"8CGt\");\n\n// 微信js sdk鉴权组件\nvar wx = __webpack_require__(\"C/he\")\n\nvar EXIF = __webpack_require__(\"SWMY\")\nvar MegaPixImage = __webpack_require__(\"QEa4\")\n\nvar wxJsComponent = new function () {\n  // 记录配置成功的信息历史\n  this.configHistory = {}\n\n  // 获取访问接口授权\n  this.initConfig = function (configData, callback) {\n    console.warn('initConfig1' + JSON.stringify(configData))\n    if (configData.activeStatus) { // 返回值有效且为激活状态\n      console.warn('initConfig2')\n      var appid = configData.appId\n      var timestamp = configData.timestamp\n      var nonceStr = configData.nonceStr\n      var signature = configData.signature\n      wx.config({\n        debug: true, // 开启调试模式,调用的所有api的返回值会在客户端alert出来，若要查看传入的参数，可以在pc端打开，参数信息会通过log打出，仅在pc端时才会打印。\n        appId: appid, // 必填，企业号的唯一标识，此处填写企业号corpid\n        timestamp: timestamp, // 必填，生成签名的时间戳\n        nonceStr: nonceStr, // 必填，生成签名的随机串\n        signature: signature, // 必填，签名，见附录1\n        jsApiList: ['chooseImage', 'previewImage']\n        // jsApiList: ['checkJsApi'] // 必填，需要使用的JS接口列表，所有JS接口列表见附录2\n      })\n    }\n    var hasError = false\n    wx.error(function (res) {\n      hasError = true\n      console.warn('wx.error:' + JSON.stringify(res))\n      if (callback) {\n        // 如果报错，直接返回false\n        callback(false)\n        callback = null\n      }\n      // config信息验证失败会执行error函数，如签名过期导致验证失败，具体错误信息可以打开config的debug模式查看，也可以在返回的res参数中查看，对于SPA可以在这里更新签名。\n    })\n    wx.ready(function () {\n      console.warn('wx.ready hasError:' + hasError)\n      if (callback) {\n        callback(!hasError)\n      }\n    })\n  }\n\n  this.hasAuthorized = function (pageUrl) {\n    var currentTime = Math.round(new Date().getTime() / 1000)\n    if (navigator.userAgent.toLowerCase().indexOf('iphone os') !== -1) {\n      for (var pageKey in this.configHistory) {\n        if (this.configHistory[pageKey] && this.configHistory[pageKey].lastTime && this.configHistory[pageKey].success) {\n          // 如果这个页面已经获取过config\n          if ((currentTime - this.configHistory[pageKey].lastTime) < 60 * 60 * 1.5) {\n            // 距离上次获取config不超过1.5小时，直接调用接口\n            console.log('wxJSConfig ios has history:' + pageKey)\n            return true\n          } else {\n            this.configHistory[pageKey] = null\n          }\n        }\n        break\n      }\n    } else {\n      // android\n      var pageConfig2 = this.configHistory[pageKey]\n      if (pageConfig2 && pageConfig2.lastTime && pageConfig2.success) {\n        // 如果这个页面已经获取过config\n        if ((currentTime - pageConfig2.lastTime) < 60 * 60 * 1.5) {\n          // 距离上次获取config不超过1.5小时，直接调用接口\n          console.log('wxJSConfig android has history:' + pageUrl)\n          return true\n        } else {\n          this.configHistory[pageKey] = null\n        }\n      }\n    }\n    return false\n  }\n\n  // 访问微信jssdk鉴权\n  this.wxJSConfig = function (callback) {\n    var pageUrl = window.location.href.split('#')[0]\n    console.log('wxJSConfig window.location.href1:' + pageUrl)\n    if (this.hasAuthorized(pageUrl)) {\n      if (callback) {\n        callback(true)\n      }\n      return\n    }\n    var that = this\n    var signURL = pageUrl.replace(/&/g, '%26') // 给链接中所有的&uri编码 encodeURIComponent\n    var appid = 'wxcfd35355d34a1894'\n    var secret = 'c99b4935724d9b4f3c725a94d59a7640'\n    // 获取AccessToken(有效期7200秒，每日200次): 'https://api.weixin.qq.com/cgi-bin/token?grant_type=client_credential&appid=APPID&secret=APPSECRET'\n    // 用AccessToken获取tikcet(有效期7200秒)： 'https://api.weixin.qq.com/cgi-bin/ticket/getticket?access_token=ACCESS_TOKEN&type=jsapi'\n    // 用用AccessToken获取tikcet生成signature：\n    // noncestr=Wm3WZYTPz0wzccnW\n    // jsapi_ticket=sM4AOVdWfPE4DxkXGEs8VMCPGGVi4C3VM0P37wVUCFvkVAy_90u5h9nbSlYy3-Sl-HhTdfl2fzFy1AOcHKP7qg\n    // timestamp=1414587457\n    // url=http://mp.weixin.qq.com?params=value\n    // jsapi_ticket=sM4AOVdWfPE4DxkXGEs8VMCPGGVi4C3VM0P37wVUCFvkVAy_90u5h9nbSlYy3-Sl-HhTdfl2fzFy1AOcHKP7qg&noncestr=Wm3WZYTPz0wzccnW&timestamp=1414587457&url=http://mp.weixin.qq.com?params=value\n    // 进行sha1签名: 得到0f9de62fce790f9a083d5c99e95740ceb90c27ed\n    var accessToken = ''\n    __WEBPACK_IMPORTED_MODULE_0__tyService_js__[\"a\" /* default */].getWXConfigAccessToken(appid, secret, function (isSuccess, result) {\n      if (isSuccess) {\n        accessToken = result\n        console.debug(result)\n      }\n    })\n    var ticket = ''\n    __WEBPACK_IMPORTED_MODULE_0__tyService_js__[\"a\" /* default */].getWXConfigTicket(accessToken, function (isSuccess, result) {\n      if (isSuccess) {\n        console.debug(result)\n        ticket = result\n      }\n    })\n    var noncestr = 'Wm3WZYTPz0wzccnW'\n    var timestamp = new Date()\n    __WEBPACK_IMPORTED_MODULE_0__tyService_js__[\"a\" /* default */].getWXConfigSignature(ticket, noncestr, timestamp, signURL, function (isSuccess, result) {\n      if (isSuccess) {\n        console.log('获取签名 success:' + JSON.stringify(result))\n        // 请求config\n        that.initConfig(result, function (success) {\n          console.log('initConfig 11:' + success)\n          if (success) {\n            // 签名成功，缓存获取配置记录\n            if (pageUrl) {\n              var pageConfig = {}\n              pageConfig.success = true\n              pageConfig.lastTime = Math.round(new Date().getTime() / 1000)\n              that.configHistory[pageUrl] = pageConfig\n            }\n          } else {\n            // 如果签名失败，删除记录\n            var pageConfig2 = that.configHistory[pageUrl]\n            if (pageConfig2 && pageUrl) {\n              that.configHistory[pageUrl] = null\n            }\n          }\n          // 调用回调\n          if (callback) {\n            callback(success)\n          }\n        })\n      } else {\n        console.log('获取签名 fail:' + result)\n        if (callback) {\n          callback(false)\n        }\n      }\n    })\n  }\n\n  // 选择照片\n  this.pickPhoto = function (callback, count) {\n    if (!count || count > 9) {\n      count = 9\n    }\n    console.log('pickPhoto:' + count)\n    this.wxJSConfig(function (success) {\n      console.log('pickPhoto wxJSConfig2:' + success)\n      wx.chooseImage({\n        count: count, // 默认9\n        sizeType: ['original', 'compressed'], // 可以指定是原图还是压缩图，默认二者都有\n        sourceType: ['album', 'camera'], // 可以指定来源是相册还是相机，默认二者都有\n        success: function (res) {\n          if (callback) {\n            callback(true, res.localIds)\n          }\n        },\n        error: function () {\n          console.warn('####chooseImage error')\n        },\n        complete: function () {\n          console.warn('####chooseImage complete')\n        },\n        fail: function () {\n          console.warn('####chooseImage fail')\n        },\n        failed: function () {\n          console.warn('####chooseImage failed')\n        }\n      })\n    })\n  }\n\n  // 查看图片大图\n  this.previewImage = function (photoUrl, photoUrlList) {\n    photoUrlList = photoUrlList || [photoUrl]\n    wx.previewImage({\n      current: photoUrl, // 当前显示图片的http链接\n      urls: photoUrlList // 需要预览的图片http链接列表\n    })\n  }\n\n  // 读取本地图片数据\n  this.loadLocalPhotoData = function (localId, callback) {\n    this.wxJSConfig(function (success) {\n      if (success) {\n        wx.getLocalImgData({\n          localId: localId, // 图片的localID\n          success: function (res) {\n            var localData = res.localData // localData是图片的base64数据，可以用img标签显示\n            if (callback) {\n              callback(true, localData)\n            }\n          }\n        })\n      } else {\n        if (callback) {\n          callback(false)\n        }\n      }\n    })\n  }\n\n  // 读取本地图片数据\n  this.loadLocalPhotoListData = function (localIds, callback, dataList) {\n    if (localIds && localIds.length) {\n      dataList = dataList || []\n      var that = this\n      var loadItem = localIds[0]\n      this.loadLocalPhotoData(loadItem, function (success, data) {\n        var resItem = {}\n        resItem.localId = loadItem\n        resItem.data = data\n        dataList.push(resItem)\n        if (localIds.length > 1) {\n          if (callback) {\n            callback(false, resItem) // 转完一个走一次\n          }\n          that.loadLocalPhotoListData(localIds.slice(1), callback, dataList)\n        } else {\n          if (callback) {\n            callback(true, resItem) // 全部转换完\n          }\n        }\n      })\n    } else { // localId不存在\n      if (callback) {\n        callback(false)\n      }\n    }\n  }\n\n  // 获取input file的文件地址\n  this.getLocalFileURL = function (file) {\n    var url = null\n    if (window.createObjectURL !== undefined) { // basic\n      url = window.createObjectURL(file)\n    } else if (window.URL !== undefined) { // mozilla(firefox)兼容火狐\n      url = window.URL.createObjectURL(file)\n    } else if (window.webkitURL !== undefined) { // webkit or chrome\n      url = window.webkitURL.createObjectURL(file)\n    }\n    return url\n  }\n\n  // 读取图片base64数据，和图片宽高\n  this.loadImageWithUrl = function (url, callback) {\n    var sourceImage = new Image()\n    sourceImage.onload = function () {\n      if (callback) {\n        callback(sourceImage)\n      }\n      sourceImage = null\n    }\n    sourceImage.src = url\n  }\n\n  // 读取图片base64数据，和图片宽高\n  this.getImageBase64Data = function (url, callback) {\n    this.loadImageWithUrl(url, function (sourceImage) {\n      var imageWidth = sourceImage.width\n      var imageHeight = sourceImage.height\n      console.info('resizeImage width:' + imageWidth)\n      console.info('resizeImage height:' + imageHeight)\n      var canvas = document.createElement('canvas')\n      canvas.width = imageWidth\n      canvas.height = imageHeight\n\n      canvas.getContext('2d').drawImage(sourceImage, 0, 0, imageWidth, imageHeight)\n      var dataURL = canvas.toDataURL('image/jpeg')\n      if (callback) {\n        callback(dataURL, imageWidth, imageHeight)\n      }\n      canvas = null\n      dataURL = null\n    })\n  }\n  // 加载input选取的图片信息，压缩图片\n  this.loadAndCompressInputImageData = function (file, callback) {\n    console.warn('loadAndCompressInputImageData:' + file.name + ', size:' + file.size)\n    var orientation\n    var that = this\n    EXIF.getData(file, function () {\n      orientation = EXIF.getTag(file, 'Orientation')\n      console.warn('EXIF.getData orientation:' + orientation)\n    })\n    var reader = new FileReader()\n    reader.readAsDataURL(file)\n    reader.onload = function (e) {\n      var image = new Image()\n      image.src = e.target.result\n      image.onload = function () {\n        var expectWidth = this.naturalWidth\n        var expectHeight = this.naturalHeight\n        // 适当压缩图片，规范尺寸\n        if (this.naturalWidth > this.naturalHeight && this.naturalWidth > 800) {\n          expectWidth = 800\n          expectHeight = expectWidth * this.naturalHeight / this.naturalWidth\n        } else if (this.naturalHeight > this.naturalWidth && this.naturalHeight > 1200) {\n          expectHeight = 1200\n          expectWidth = expectHeight * this.naturalWidth / this.naturalHeight\n        }\n        var canvas = document.createElement('canvas')\n        var ctx = canvas.getContext('2d')\n        canvas.width = expectWidth\n        canvas.height = expectHeight\n        ctx.drawImage(this, 0, 0, expectWidth, expectHeight)\n        // 修复ios上传图片的时候 被旋转的问题\n        var base64 = null\n        if (orientation && orientation !== 1) {\n          var mpImg = new MegaPixImage(image)\n          mpImg.render(canvas, {\n            maxWidth: 800,\n            maxHeight: 1200,\n            quality: 0.8,\n            orientation: orientation\n          })\n        }\n        base64 = canvas.toDataURL('image/jpeg', 0.8)\n        var fileLength = parseInt(base64.length - (base64.length / 8) * 2)\n        if (fileLength / 1024000 > 1) { // 如果图片仍然大于1M，压缩图片\n          // 压缩图片\n          that.imgScale(base64, 4, callback)\n        } else {\n          if (callback) {\n            callback(base64, canvas.width, canvas.height)\n          }\n        }\n      }\n    }\n  }\n  // 压缩图片\n  this.imgScale = function (imgUrl, quality, callback) {\n    console.warn('imgScale')\n    var img = new Image()\n    var canvas = document.createElement('canvas')\n    var cxt = canvas.getContext('2d')\n    img.src = imgUrl\n    img.onload = function () {\n      // 缩放后图片的宽高\n      var width = img.naturalWidth / quality\n      var height = img.naturalHeight / quality\n      canvas.width = width\n      canvas.height = height\n      cxt.drawImage(this, 0, 0, width, height)\n      if (callback) {\n        callback(canvas.toDataURL('image/jpeg'), width, height)\n      }\n    }\n  }\n  // 选择图片方向\n  this.rotateImg = function (img, direction, canvas) { // 图片旋转\n    console.warn('rotateImg1:' + direction)\n    var minStep = 0\n    var maxStep = 3\n    if (img === null) return\n    var height = img.height\n    var width = img.width\n    var step = 2\n    if (step === null) {\n      step = minStep\n    }\n    if (direction === 'right') {\n      step++\n      step > maxStep && (step = minStep)\n    } else {\n      step--\n      step < minStep && (step = maxStep)\n    }\n    console.warn('rotateImg2')\n    var degree = step * 90 * Math.PI / 180\n    var ctx = canvas.getContext('2d')\n    console.warn('rotateImg3')\n    switch (step) {\n      case 0:\n        canvas.width = width\n        canvas.height = height\n        ctx.drawImage(img, 0, 0)\n        break\n      case 1:\n        canvas.width = height\n        canvas.height = width\n        ctx.rotate(degree)\n        ctx.drawImage(img, 0, -height)\n        break\n      case 2:\n        canvas.width = width\n        canvas.height = height\n        ctx.rotate(degree)\n        ctx.drawImage(img, -width, -height)\n        break\n      case 3:\n        canvas.width = height\n        canvas.height = width\n        ctx.rotate(degree)\n        ctx.drawImage(img, -width, 0)\n        break\n    }\n    console.warn('rotateImg6')\n  }\n}\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (wxJsComponent);\n\n\n/***/ }),\n\n/***/ \"yrGq\":\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ })\n\n},[\"NHnr\"]);\n\n\n// WEBPACK FOOTER //\n// static/js/app.d79a68cf7453f413e26a.js","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/.3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../node_modules/.13.5.0@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-1f804480\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../node_modules/.13.5.0@vue-loader/lib/selector?type=styles&index=0!./Demo.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/.13.5.0@vue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!babel-loader!../../node_modules/.13.5.0@vue-loader/lib/selector?type=script&index=0!./Demo.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/.13.5.0@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-1f804480\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":\\\"src\\\",\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/.13.5.0@vue-loader/lib/selector?type=template&index=0!./Demo.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-1f804480\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/Demo.vue\n// module id = 26cW\n// module chunks = 1","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAYAAADDPmHLAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMDY3IDc5LjE1Nzc0NywgMjAxNS8wMy8zMC0yMzo0MDo0MiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTUgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjhGNzFGQUMyQjdGMzExRTdCRjMwRDhEQTY4MDNBRTVDIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjhGNzFGQUMzQjdGMzExRTdCRjMwRDhEQTY4MDNBRTVDIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6OEY3MUZBQzBCN0YzMTFFN0JGMzBEOERBNjgwM0FFNUMiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6OEY3MUZBQzFCN0YzMTFFN0JGMzBEOERBNjgwM0FFNUMiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz60Iy/8AAABxElEQVR42uzcQU7CQBSA4WJYinILOYIHIBxAbsPe4+gBCGHNohcwXoIQ9zgmY0KItLGLaTvzfcnb0I1O/9Ti4k3quj5XFOvOEQgAASAABIAAEAACQAAIAAEgAASAABAAAkAACAABIAAEgAAQAAIYn88w6zCPcdbxs+JMC/ydP8I8hzlefPYeZh/mEObJEyBvm6ub/+sYr/kTkLldw7WtAPJ3arj2JQAEgAAQAAJAAAgAASAABIAAEAACQAAIAAEgAASAABAAAkAACAABIAAEgAAQAAJAAAiAggO43Mkz6Xna9P3zJd1ZlGJH0F87ebjtZ4FFsp1FKZ4AGze/kyQ7i1IEsHMvO9vmEACFvwQuHXNnqxwCeA0zdy//bR7PbvQBLOLb7EuYmfvaahbP6hDPbvRfA6v4VeZtIAfc9r+As3cABIAAEAACQAAIAAEgAASAABAAAkAACAABIAAEgAAQAAJAAAgAASAABIAAEAACQAAIAAH07qHh2r0A8te0s2glgPzd2lmUZCePAPp3vbMo6U6eoZlWZRrSziJPAASAABAAAkAACAABIAAEgAAQAAJAAAgAASAABIAAEAACQAAIgK6+BRgAAUMpKcJwzJgAAAAASUVORK5CYII=\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/photoPicker/icon_content_n_pc.png\n// module id = 2Y24\n// module chunks = 1","'use strict'\n\nvar $ = require('jquery')\n\nvar tyService = new function () {\n  var appId = ''\n  // 接口前半段\n  var baseUrl = 'https://api.weixin.qq.com'\n  // 获取AccessToken\n  var accessTokenUrl = '/cgi-bin/token'\n  // 获取jsapi_ticket\n  var jsapiTicketUrl = '/cgi-bin/ticket/getticket'\n  // 发送请求\n  this.commonRequest = function (requestType, isAsync, addtionalUrl, jsonData, callback) {\n    var url = baseUrl + addtionalUrl\n    console.log('commonRequest #url:' + url + '#isAsync:' + isAsync + '#jsonData:' + jsonData)\n    $.ajax({\n      type: requestType,\n      url: url,\n      async: isAsync,\n      data: jsonData,\n      dataType: 'JSON',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      success: function (result) {\n        console.log('commonRequest success url:' + url + ' 结果：' + JSON.stringify(result))\n        if (result && result.errcode === 0) {\n          if (callback) {\n            callback(true, result)\n          }\n        } else {\n          if (callback) {\n            callback(false, result)\n          }\n        }\n      },\n      error: function (XMLHttpRequest, textStatus, errorThrown) {\n        console.log('commonRequest error url:' + url + ' 失败：' + XMLHttpRequest.status)\n        console.log(XMLHttpRequest)\n        console.log(textStatus)\n        console.log(errorThrown)\n        if (callback) {\n          callback(false)\n        }\n      }\n    })\n  }\n  // 获取微信AccessToken（实际开发中，应该由后台获取AccessToken）\n  this.getWXConfigAccessToken = function (appid, secret, callback) {\n    appId = appid\n    console.warn('getWXConfigAccessToken')\n    this.commonRequest('GET', false, (accessTokenUrl + '?grant_type=client_credential' + '&appid=' + appid + '&secret=' + secret), '', function (success, result) {\n      if (success) {\n        if (callback) {\n          callback(true, result.data)\n        }\n      } else {\n        if (callback) {\n          callback(false)\n        }\n      }\n    })\n  }\n\n  // 获取微信jsapi_ticket（实际开发中，应该由后台获取jsapi_ticket）\n  this.getWXConfigTicket = function (accessToken, callback) {\n    console.warn('getWXConfigTicket')\n    this.commonRequest('GET', false, (jsapiTicketUrl + '?type=jsapi' + '&access_token=' + accessToken), '', function (success, result) {\n      if (success) {\n        if (callback) {\n          callback(true, result.data)\n        }\n      } else {\n        if (callback) {\n          callback(false)\n        }\n      }\n    })\n  }\n\n  // 获取微信config签名（实际开发中，应该由后台实现生成签名的逻辑）\n  this.getWXConfigSignature = function (ticket, noncestr, timestamp, pageUrl, callback) {\n    console.warn('getWXConfigSignature:' + pageUrl)\n    var str = 'jsapi_ticket=' + ticket + '&noncestr=' + noncestr + '&timestamp=' + timestamp + '&url=' + pageUrl\n    var sha1 = this.sha1(str)\n    if (sha1) {\n      var response = {\n        'activeStatus': true,\n        'appId': appId,\n        'timestamp': timestamp,\n        'nonceStr': noncestr,\n        'signature': sha1\n      }\n      callback(true, response)\n    } else {\n      callback(false)\n    }\n  }\n\n  // SHA-1算法（实际开发中，应该由后台实现SHA-1算法）\n  this.sha1 = function (str) {\n    hexSha1(str)\n\n    var hexcase = 0  /* hex output format. 0 - lowercase 1 - uppercase */\n    function hexSha1 (s) {\n      return binb2hex(coreSha1(alignSHA1(s)))\n    }\n\n    /*\n     *\n     * Calculate the SHA-1 of an array of big-endian words, and a bit length\n     *\n     */\n    function coreSha1 (blockArray) {\n      var x = blockArray // append padding\n      var w = Array(80)\n      var a = 1732584193\n      var b = -271733879\n      var c = -1732584194\n      var d = 271733878\n      var e = -1009589776\n      for (var i = 0; i < x.length; i += 16) { // 每次处理512位 16*32\n        var olda = a\n        var oldb = b\n        var oldc = c\n        var oldd = d\n        var olde = e\n        for (var j = 0; j < 80; j++) { // 对每个512位进行80步操作\n          if (j < 16) {\n            w[j] = x[i + j]\n          } else {\n            w[j] = rol(w[j - 3] ^ w[j - 8] ^ w[j - 14] ^ w[j - 16], 1)\n          }\n          var t = safeAdd(safeAdd(rol(a, 5), sha1Ft(j, b, c, d)), safeAdd(safeAdd(e, w[j]), sha1Kt(j)))\n          e = d\n          d = c\n          c = rol(b, 30)\n          b = a\n          a = t\n        }\n        a = safeAdd(a, olda)\n        b = safeAdd(b, oldb)\n        c = safeAdd(c, oldc)\n        d = safeAdd(d, oldd)\n        e = safeAdd(e, olde)\n      }\n      return [a, b, c, d, e]\n    }\n\n    /*\n     *\n     * 返回对应F函数的值\n     *\n     */\n    function sha1Ft (t, b, c, d) {\n      if (t < 20) {\n        return (b & c) | ((~b) & d)\n      }\n      if (t < 40) {\n        return b ^ c ^ d\n      }\n      if (t < 60) {\n        return (b & c) | (b & d) | (c & d)\n      }\n      return b ^ c ^ d // t<80\n    }\n\n    /*\n     * 返回对应的Kt值\n     *\n     */\n    function sha1Kt (t) {\n      return (t < 20) ? 1518500249 : (t < 40) ? 1859775393 : (t < 60) ? -1894007588 : -899497514\n    }\n\n    /*\n     *\n     * 将32位数拆成高16位和低16位分别进行相加，从而实现 MOD 2^32 的加法\n     *\n     */\n    function safeAdd (x, y) {\n      var lsw = (x & 0xFFFF) + (y & 0xFFFF)\n      var msw = (x >> 16) + (y >> 16) + (lsw >> 16)\n      return (msw << 16) | (lsw & 0xFFFF)\n    }\n\n    /*\n     *\n     * 32位二进制数循环左移\n     *\n     */\n    function rol (num, cnt) {\n      return (num << cnt) | (num >>> (32 - cnt))\n    }\n\n    /*\n     *\n     * The standard SHA1 needs the input string to fit into a block\n     * This function align the input string to meet the requirement\n     *\n     */\n    function alignSHA1 (str) {\n      var nblk = ((str.length + 8) >> 6) + 1\n      var blks = new Array(nblk * 16)\n      for (var i = 0; i < nblk * 16; i++) {\n        blks[i] = 0\n      }\n      for (i = 0; i < str.length; i++) {\n        blks[i >> 2] |= str.charCodeAt(i) << (24 - (i & 3) * 8)\n      }\n      blks[i >> 2] |= 0x80 << (24 - (i & 3) * 8)\n      blks[nblk * 16 - 1] = str.length * 8\n      return blks\n    }\n\n    /*\n     *\n     * Convert an array of big-endian words to a hex string.\n     *\n     */\n    function binb2hex (binarray) {\n      var hexTab = hexcase ? '0123456789ABCDEF' : '0123456789abcdef'\n      var str = ''\n      for (var i = 0; i < binarray.length * 4; i++) {\n        str += hexTab.charAt((binarray[i >> 2] >> ((3 - i % 4) * 8 + 4)) & 0xF) + hexTab.charAt((binarray[i >> 2] >> ((3 - i % 4) * 8)) & 0xF)\n      }\n      return str\n    }\n  }\n}\n\nexport default tyService\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./static/tyService.js\n// module id = 8CGt\n// module chunks = 1","module.exports = __webpack_public_path__ + \"static/img/测试公众号二维码.f327aa5.jpg\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/assets/测试公众号二维码.jpg\n// module id = 8mmz\n// module chunks = 1","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"demo\"},[_c('div',{staticClass:\"title\"},[_vm._v(\"\\n    TYPhotoPicker4\\n  \")]),_vm._v(\" \"),_c('div',{staticClass:\"tip\"},[_vm._v(\"\\n    1. 能够在微信之外运行，但主要还是为了在微信页面内调用相册选择器而设计的 \"),_c('br'),_vm._v(\"\\n    2. 在微信中使用，由于iOS平台中的图片转码缓慢，所以弃用调用微信js，通过设置PhotoPicker.iosWeixin也能够调用微信JS \"),_c('br'),_vm._v(\"\\n    关注这个微信号：关注后才允许调用weixin-js-sdk \"),_c('br'),_vm._v(\" \"),_c('img',{attrs:{\"src\":_vm.qrImg,\"width\":\"200\",\"height\":\"200\",\"alt\":\"\"}}),_vm._v(\" \"),_c('br'),_vm._v(\"\\n    因为测试账号限制了只允许被100人关注, 当发现不能在微信中运行的时候请来到下面，自行申请测试账号， \"),_c('br'),_vm._v(\"\\n    申请微信测试公众号：https://mp.weixin.qq.com/debug/cgi-bin/sandbox?t=sandbox/login \"),_c('br'),_vm._v(\"\\n    申请账号之后填写测试域名（一个测试账号允许有一个域名调用weixin-js-sdk），并调整wxJsComponen中对appid、secret的赋值\\n  \")]),_vm._v(\" \"),_c('div',{staticClass:\"item\"},[_c('div',{staticClass:\"question\"},[_vm._v(\"\\n      请选择图片：\\n    \")]),_vm._v(\" \"),_c('div',{staticClass:\"display-flex-box flex-wrap\"},[_vm._l((_vm.imgs),function(item,index){return _c('div',{staticClass:\"img-box\"},[_c('img',{staticClass:\"img shrink-none\",attrs:{\"src\":item},on:{\"click\":function($event){_vm.deleteImg(index)}}})])}),_vm._v(\" \"),(_vm.imgs.length < 10)?_c('div',{staticClass:\"img-box background-none\"},[_c('img',{staticClass:\"img shrink-none\",attrs:{\"src\":_vm.addMoreImg},on:{\"click\":_vm.addImg}})]):_vm._e(),_vm._v(\" \"),_c('photo-picker',{ref:\"tyPhotoPicker\",attrs:{\"hidden\":\"true\"},on:{\"onLoadLocalIds\":_vm.onLoadLocalIds}})],2)])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/.13.5.0@vue-loader/lib/template-compiler?{\"id\":\"data-v-1f804480\",\"hasScoped\":true,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/.13.5.0@vue-loader/lib/selector.js?type=template&index=0!./src/components/Demo.vue\n// module id = AwZn\n// module chunks = 1","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/.3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../../node_modules/.13.5.0@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-359280eb\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../node_modules/.13.5.0@vue-loader/lib/selector?type=styles&index=0!./PhotoPicker.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/.13.5.0@vue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/.13.5.0@vue-loader/lib/selector?type=script&index=0!./PhotoPicker.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/.13.5.0@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-359280eb\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":\\\"src\\\",\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/.13.5.0@vue-loader/lib/selector?type=template&index=0!./PhotoPicker.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-359280eb\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/photoPicker/PhotoPicker.vue\n// module id = H3lr\n// module chunks = 1","function injectStyle (ssrContext) {\n  require(\"!!../node_modules/.3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../node_modules/.13.5.0@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-f715737c\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../node_modules/.13.5.0@vue-loader/lib/selector?type=styles&index=0!./App.vue\")\n}\nvar normalizeComponent = require(\"!../node_modules/.13.5.0@vue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!babel-loader!../node_modules/.13.5.0@vue-loader/lib/selector?type=script&index=0!./App.vue\"\n/* template */\nimport __vue_template__ from \"!!../node_modules/.13.5.0@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-f715737c\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":\\\"src\\\",\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../node_modules/.13.5.0@vue-loader/lib/selector?type=template&index=0!./App.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/App.vue\n// module id = M93x\n// module chunks = 1","import Vue from 'vue'\nimport App from './App'\nimport router from './router'\nimport MintUI from 'mint-ui'\nimport 'mint-ui/lib/style.css'\n\nVue.config.productionTip = false\n\nVue.use(MintUI)\n\n/* eslint-disable no-new */\nnew Vue({\n  el: '#app',\n  router,\n  render: h => h(App)\n})\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.js","/**\n * Mega pixel image rendering library for iOS6 Safari\n *\n * Fixes iOS6 Safari's image file rendering issue for large size image (over mega-pixel),\n * which causes unexpected subsampling when drawing it in canvas.\n * By using this library, you can safely render the image with proper stretching.\n *\n * Copyright (c) 2012 Shinichi Tomita <shinichi.tomita@gmail.com>\n * Released under the MIT license\n */\n 'use strict'\n// (function() {\n\n\t/**\n\t * Detect subsampling in loaded image.\n\t * In iOS, larger images than 2M pixels may be subsampled in rendering.\n\t */\n\tfunction detectSubsampling(img) {\n\t\tvar iw = img.naturalWidth,\n\t\t\tih = img.naturalHeight;\n\t\tif (iw * ih > 1024 * 1024) { // subsampling may happen over megapixel image\n\t\t\tvar canvas = document.createElement('canvas');\n\t\t\tcanvas.width = canvas.height = 1;\n\t\t\tvar ctx = canvas.getContext('2d');\n\t\t\tctx.drawImage(img, -iw + 1, 0);\n\t\t\t// subsampled image becomes half smaller in rendering size.\n\t\t\t// check alpha channel value to confirm image is covering edge pixel or not.\n\t\t\t// if alpha value is 0 image is not covering, hence subsampled.\n\t\t\treturn ctx.getImageData(0, 0, 1, 1).data[3] === 0;\n\t\t} else {\n\t\t\treturn false;\n\t\t}\n\t}\n\n\t/**\n\t * Detecting vertical squash in loaded image.\n\t * Fixes a bug which squash image vertically while drawing into canvas for some images.\n\t */\n\tfunction detectVerticalSquash(img, iw, ih) {\n\t\tvar canvas = document.createElement('canvas');\n\t\tcanvas.width = 1;\n\t\tcanvas.height = ih;\n\t\tvar ctx = canvas.getContext('2d');\n\t\tctx.drawImage(img, 0, 0);\n\t\tvar data = ctx.getImageData(0, 0, 1, ih).data;\n\t\t// search image edge pixel position in case it is squashed vertically.\n\t\tvar sy = 0;\n\t\tvar ey = ih;\n\t\tvar py = ih;\n\t\twhile (py > sy) {\n\t\t\tvar alpha = data[(py - 1) * 4 + 3];\n\t\t\tif (alpha === 0) {\n\t\t\t\tey = py;\n\t\t\t} else {\n\t\t\t\tsy = py;\n\t\t\t}\n\t\t\tpy = (ey + sy) >> 1;\n\t\t}\n\t\tvar ratio = (py / ih);\n\t\treturn (ratio === 0) ? 1 : ratio;\n\t}\n\n\t/**\n\t * Rendering image element (with resizing) and get its data URL\n\t */\n\tfunction renderImageToDataURL(img, options, doSquash) {\n\t\tvar canvas = document.createElement('canvas');\n\t\trenderImageToCanvas(img, canvas, options, doSquash);\n\t\treturn canvas.toDataURL(\"image/jpeg\", options.quality || 0.8);\n\t}\n\n\t/**\n\t * Rendering image element (with resizing) into the canvas element\n\t */\n\tfunction renderImageToCanvas(img, canvas, options, doSquash) {\n\t\tvar iw = img.naturalWidth,\n\t\t\tih = img.naturalHeight;\n\t\tvar width = options.width,\n\t\t\theight = options.height;\n\t\tvar ctx = canvas.getContext('2d');\n\t\tctx.save();\n\t\ttransformCoordinate(canvas, ctx, width, height, options.orientation);\n\t\tvar subsampled = detectSubsampling(img);\n\t\tif (subsampled) {\n\t\t\tiw /= 2;\n\t\t\tih /= 2;\n\t\t}\n\t\tvar d = 1024; // size of tiling canvas\n\t\tvar tmpCanvas = document.createElement('canvas');\n\t\ttmpCanvas.width = tmpCanvas.height = d;\n\t\tvar tmpCtx = tmpCanvas.getContext('2d');\n\t\tvar vertSquashRatio = doSquash ? detectVerticalSquash(img, iw, ih) : 1;\n\t\tvar dw = Math.ceil(d * width / iw);\n\t\tvar dh = Math.ceil(d * height / ih / vertSquashRatio);\n\t\tvar sy = 0;\n\t\tvar dy = 0;\n\t\twhile (sy < ih) {\n\t\t\tvar sx = 0;\n\t\t\tvar dx = 0;\n\t\t\twhile (sx < iw) {\n\t\t\t\ttmpCtx.clearRect(0, 0, d, d);\n\t\t\t\ttmpCtx.drawImage(img, -sx, -sy);\n\t\t\t\tctx.drawImage(tmpCanvas, 0, 0, d, d, dx, dy, dw, dh);\n\t\t\t\tsx += d;\n\t\t\t\tdx += dw;\n\t\t\t}\n\t\t\tsy += d;\n\t\t\tdy += dh;\n\t\t}\n\t\tctx.restore();\n\t\ttmpCanvas = tmpCtx = null;\n\t}\n\n\t/**\n\t * Transform canvas coordination according to specified frame size and orientation\n\t * Orientation value is from EXIF tag\n\t */\n\tfunction transformCoordinate(canvas, ctx, width, height, orientation) {\n\t\tswitch (orientation) {\n\t\t\tcase 5:\n\t\t\tcase 6:\n\t\t\tcase 7:\n\t\t\tcase 8:\n\t\t\t\tcanvas.width = height;\n\t\t\t\tcanvas.height = width;\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tcanvas.width = width;\n\t\t\t\tcanvas.height = height;\n\t\t}\n\t\tswitch (orientation) {\n\t\t\tcase 2:\n\t\t\t\t// horizontal flip\n\t\t\t\tctx.translate(width, 0);\n\t\t\t\tctx.scale(-1, 1);\n\t\t\t\tbreak;\n\t\t\tcase 3:\n\t\t\t\t// 180 rotate left\n\t\t\t\tctx.translate(width, height);\n\t\t\t\tctx.rotate(Math.PI);\n\t\t\t\tbreak;\n\t\t\tcase 4:\n\t\t\t\t// vertical flip\n\t\t\t\tctx.translate(0, height);\n\t\t\t\tctx.scale(1, -1);\n\t\t\t\tbreak;\n\t\t\tcase 5:\n\t\t\t\t// vertical flip + 90 rotate right\n\t\t\t\tctx.rotate(0.5 * Math.PI);\n\t\t\t\tctx.scale(1, -1);\n\t\t\t\tbreak;\n\t\t\tcase 6:\n\t\t\t\t// 90 rotate right\n\t\t\t\tctx.rotate(0.5 * Math.PI);\n\t\t\t\tctx.translate(0, -height);\n\t\t\t\tbreak;\n\t\t\tcase 7:\n\t\t\t\t// horizontal flip + 90 rotate right\n\t\t\t\tctx.rotate(0.5 * Math.PI);\n\t\t\t\tctx.translate(width, -height);\n\t\t\t\tctx.scale(-1, 1);\n\t\t\t\tbreak;\n\t\t\tcase 8:\n\t\t\t\t// 90 rotate left\n\t\t\t\tctx.rotate(-0.5 * Math.PI);\n\t\t\t\tctx.translate(-width, 0);\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\n\t/**\n\t * MegaPixImage class\n\t */\n\tfunction MegaPixImage(srcImage) {\n\t\tif (window.Blob && srcImage instanceof Blob) {\n\t\t\tvar img = new Image();\n\t\t\tvar URL = window.URL && window.URL.createObjectURL ? window.URL :\n\t\t\t\twindow.webkitURL && window.webkitURL.createObjectURL ? window.webkitURL :\n\t\t\t\tnull;\n\t\t\tif (!URL) {\n\t\t\t\tthrow Error(\"No createObjectURL function found to create blob url\");\n\t\t\t}\n\t\t\timg.src = URL.createObjectURL(srcImage);\n\t\t\tthis.blob = srcImage;\n\t\t\tsrcImage = img;\n\t\t}\n\t\tif (!srcImage.naturalWidth && !srcImage.naturalHeight) {\n\t\t\tvar _this = this;\n\t\t\tsrcImage.onload = function() {\n\t\t\t\tvar listeners = _this.imageLoadListeners;\n\t\t\t\tif (listeners) {\n\t\t\t\t\t_this.imageLoadListeners = null;\n\t\t\t\t\tfor (var i = 0, len = listeners.length; i < len; i++) {\n\t\t\t\t\t\tlisteners[i]();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\t\tthis.imageLoadListeners = [];\n\t\t}\n\t\tthis.srcImage = srcImage;\n\t}\n\n\t/**\n\t * Rendering megapix image into specified target element\n\t */\n\tMegaPixImage.prototype.render = function(target, options) {\n\t\tif (this.imageLoadListeners) {\n\t\t\tvar _this = this;\n\t\t\tthis.imageLoadListeners.push(function() {\n\t\t\t\t_this.render(target, options)\n\t\t\t});\n\t\t\treturn;\n\t\t}\n\t\toptions = options || {};\n\t\tvar imgWidth = this.srcImage.naturalWidth,\n\t\t\timgHeight = this.srcImage.naturalHeight,\n\t\t\twidth = options.width,\n\t\t\theight = options.height,\n\t\t\tmaxWidth = options.maxWidth,\n\t\t\tmaxHeight = options.maxHeight,\n\t\t\tdoSquash = !this.blob || this.blob.type === 'image / jpeg';\n\t\tif (width && !height) {\n\t\t\theight = (imgHeight * width / imgWidth) << 0;\n\t\t} else if (height && !width) {\n\t\t\twidth = (imgWidth * height / imgHeight) << 0;\n\t\t} else {\n\t\t\twidth = imgWidth;\n\t\t\theight = imgHeight;\n\t\t}\n\t\tif (maxWidth && width > maxWidth) {\n\t\t\twidth = maxWidth;\n\t\t\theight = (imgHeight * width / imgWidth) << 0;\n\t\t}\n\t\tif (maxHeight && height > maxHeight) {\n\t\t\theight = maxHeight;\n\t\t\twidth = (imgWidth * height / imgHeight) << 0;\n\t\t}\n\t\tvar opt = {\n\t\t\twidth: width,\n\t\t\theight: height\n\t\t};\n\t\tfor (var k in options) opt[k] = options[k];\n\n\t\tvar tagName = target.tagName.toLowerCase();\n\t\tif (tagName === 'img') {\n\t\t\ttarget.src = renderImageToDataURL(this.srcImage, opt, doSquash);\n\t\t} else if (tagName === 'canvas') {\n\t\t\trenderImageToCanvas(this.srcImage, target, opt, doSquash);\n\t\t}\n\t\tif (typeof this.onrender === ' function') {\n\t\t\tthis.onrender(target);\n\t\t}\n\t};\n\n\t/**\n\t * Export class to global\n\t */\n// \tif (typeof define === ' function' && define.amd) {\n// \t\tdefine([], function() {\n// \t\t\treturn MegaPixImage;\n// \t\t}); // for AMD loader\n// \t} else {\n// \t\tthis.MegaPixImage = MegaPixImage;\n// \t}\n// })();\n\nmodule.exports = MegaPixImage;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./static/megapic-image.js\n// module id = QEa4\n// module chunks = 1","<template>\n  <div id=\"app\">\n    <router-view/>\n  </div>\n</template>\n\n<script>\nimport eruda from 'eruda'\n\nexport default {\n  name: 'app',\n  created: function () {\n    // 日志查看\n    var el = document.createElement('div')\n    document.body.appendChild(el)\n    eruda.init({\n      container: el,\n      tool: ['console', 'elements']\n    })\n  }\n}\n</script>\n\n<style>\n#app {\n  font-family: 'Avenir', Helvetica, Arial, sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  text-align: center;\n  color: #2c3e50;\n  margin-top: 60px;\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/App.vue","<!-- 图片选择控件 -->\n<template>\n  <div class=\"photo-picker-container\">\n    <input id=\"photo-picker-input\" hidden=\"true\" name=\"file\" type=\"file\" v-on:change=\"onPickedPhotos($event)\" accept=\"image/*\">\n  </div>\n</template>\n\n<script>\n// var wxJsComponent = require('../../../static/wxJsComponent.js')\nimport wxJsComponent from '../../../static/wxJsComponent.js'\nimport {Toast} from 'mint-ui'\n\nexport default {\n  name: 'PhotoPicker',\n  data () {\n    return {\n      iosWeixin: false, // ios是否使用微信js sdk选取图片\n      isAndroid: navigator.userAgent.toLowerCase().indexOf('android') !== -1,\n      isIOS: navigator.userAgent.toLowerCase().indexOf('iphone os') !== -1,\n      isSafari: navigator.userAgent.toLowerCase().indexOf('safari') !== -1,\n      selectedPhotoNum: 0, // 已经选取的图片张数\n      maxPhotoNum: 9, // 最大图片张数限制 默认9张，参考微信的最大限制\n      photoList: []\n    }\n  },\n  methods: {\n    // 设置已经选择的图片张数\n    setCurrentPhotoNum: function (num) {\n      if (num) {\n        this.selectedPhotoNum = num\n      }\n    },\n    // 设置最大可选张数\n    setLimitPhotoNum: function (num) {\n      if (num) {\n        this.maxPhotoNum = num\n      }\n    },\n    // 选取图片点击事件\n    pickPhoto: function () {\n      // 清空图片列表\n      this.photoList = []\n      // android使用微信js接口选图片\n      if (this.isAndroid || this.iosWeixin) {\n        console.warn('pickPhoto1')\n        this.showWeixinPicker()\n      } else {\n        // 使用系统input选图片\n        console.warn('pickPhoto3')\n        document.getElementById('photo-picker-input').click()\n      }\n    },\n    // 加载图片信息\n    loadPhotoInfo: function (localIdOrFile, isWeixinJs, callback) {\n      if (!isWeixinJs) {\n        if (this.isIOS || this.isSafari) {\n          wxJsComponent.loadAndCompressInputImageData(localIdOrFile, function (photoData, imageWidth, imageHeight) {\n            if (callback) {\n              console.warn('wxJsComponent.loadAndCompressInputImageData imageWidth:' + imageWidth + ', imageHeight:' + imageHeight)\n              callback({'isWeixinJs': false, 'fileName': localIdOrFile.name, 'localData': photoData, 'originWidth': imageWidth, 'originHeight': imageHeight})\n            }\n          })\n        } else {\n          wxJsComponent.loadAndCompressInputImageData(localIdOrFile, function (photoData, imageWidth, imageHeight) {\n            if (callback) {\n              console.warn('wxJsComponent.loadAndCompressInputImageData imageWidth:' + imageWidth + ', imageHeight:' + imageHeight)\n              callback({'isWeixinJs': false, 'fileName': localIdOrFile.name, 'localData': photoData, 'originWidth': imageWidth, 'originHeight': imageHeight})\n            }\n          })\n        }\n      } else {\n        if (this.isAndroid) {\n          wxJsComponent.loadImageWithUrl(localIdOrFile, function (sourceImage) {\n            if (callback) {\n              callback({'isWeixinJs': true, 'localId': localIdOrFile, 'originWidth': sourceImage.width, 'originHeight': sourceImage.height})\n            }\n          })\n        } else {\n          wxJsComponent.getImageBase64Data(localIdOrFile, function (photoData, imageWidth, imageHeight) {\n            if (callback) {\n              callback({'isWeixinJs': true, 'localId': localIdOrFile, 'localData': photoData, 'originWidth': imageWidth, 'originHeight': imageHeight})\n            }\n          })\n        }\n      }\n    },\n    // 加载图片信息\n    loadPhotoListInfo: function (photoUrlList, isWeixinJs, callback) {\n      if (photoUrlList && photoUrlList.length) {\n        var that = this\n        var loadItem = photoUrlList[0]\n        this.loadPhotoInfo(loadItem, isWeixinJs, function (photoItem) {\n          that.photoList.push(photoItem)\n          if (photoUrlList.length > 1) {\n            that.loadPhotoListInfo(photoUrlList.slice(1), isWeixinJs, callback)\n          } else {\n            if (callback) {\n              callback() // 全部加载完\n            }\n          }\n        })\n      } else {\n        if (callback) {\n          callback()\n        }\n      }\n    },\n    // 微信Js选图片\n    showWeixinPicker: function () {\n      console.log('onTapShowMore')\n      var that = this\n      var avaiNum = this.maxPhotoNum - this.selectedPhotoNum\n      wxJsComponent.pickPhoto(function (success, localIds) {\n        if (success) {\n          if (localIds && localIds.length) {\n            that.loadPhotoListInfo(localIds, true, function () {\n              that.$emit('onLoadLocalIds', that.photoList)\n              that.photoList = null\n            })\n          }\n        } else {\n          Toast({\n            message: '添加图片失败',\n            duration: 600\n          })\n        }\n      }, avaiNum)\n    },\n    // 系统input选取图片\n    onPickedPhotos: function (event) {\n      var files = event.currentTarget.files\n      console.log('onPickedPhotos')\n      var that = this\n      if (files && files.length) {\n        // 限制图片张数\n        if (files.length + this.selectedPhotoNum > this.maxPhotoNum) {\n          // alert('最多可以选取' + this.maxPhotoNum + '张图片')\n          Toast({\n            message: '最多可以选取' + this.maxPhotoNum + '张图片',\n            duration: 600\n          })\n          return\n        }\n        var photos = []\n        var fileItem\n        for (fileItem of files) {\n          photos.push(fileItem)\n        }\n        this.loadPhotoListInfo(photos, false, function () {\n          that.$emit('onLoadLocalIds', that.photoList)\n        })\n      }\n    }\n  },\n  mounted: function () {\n  },\n  created: function () {\n  }\n}\n</script>\n\n<style scoped>\n.photo-picker-container {\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/photoPicker/PhotoPicker.vue","import Vue from 'vue'\nimport Router from 'vue-router'\nimport Demo from '@/components/Demo'\n\nVue.use(Router)\n\nexport default new Router({\n  routes: [\n    {\n      path: '/',\n      name: 'Demo',\n      component: Demo\n    }\n  ]\n})\n\n\n\n// WEBPACK FOOTER //\n// ./src/router/index.js","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('router-view')],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/.13.5.0@vue-loader/lib/template-compiler?{\"id\":\"data-v-f715737c\",\"hasScoped\":false,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/.13.5.0@vue-loader/lib/selector.js?type=template&index=0!./src/App.vue\n// module id = ffUS\n// module chunks = 1","<template>\n  <div class=\"demo\">\n    <div class=\"title\">\n      TYPhotoPicker4\n    </div>\n    <div class=\"tip\">\n      1. 能够在微信之外运行，但主要还是为了在微信页面内调用相册选择器而设计的 <br>\n      2. 在微信中使用，由于iOS平台中的图片转码缓慢，所以弃用调用微信js，通过设置PhotoPicker.iosWeixin也能够调用微信JS <br>\n      关注这个微信号：关注后才允许调用weixin-js-sdk <br>\n      <img :src=\"qrImg\" width=\"200\" height=\"200\" alt=\"\"> <br>\n      因为测试账号限制了只允许被100人关注, 当发现不能在微信中运行的时候请来到下面，自行申请测试账号， <br>\n      申请微信测试公众号：https://mp.weixin.qq.com/debug/cgi-bin/sandbox?t=sandbox/login <br>\n      申请账号之后填写测试域名（一个测试账号允许有一个域名调用weixin-js-sdk），并调整wxJsComponen中对appid、secret的赋值\n    </div>\n    <div class=\"item\">\n      <div class=\"question\">\n        请选择图片：\n      </div>\n      <div class=\"display-flex-box flex-wrap\">\n        <div v-for=\"(item, index) in imgs\" class=\"img-box\">\n          <img :src=\"item\" class=\"img shrink-none\" @click=\"deleteImg(index)\">\n        </div>\n        <div v-if=\"imgs.length < 10\" class=\"img-box background-none\">\n          <img :src=\"addMoreImg\" class=\"img shrink-none\" @click=\"addImg\">\n        </div>\n        <photo-picker ref=\"tyPhotoPicker\" hidden=\"true\" @onLoadLocalIds=\"onLoadLocalIds\"></photo-picker>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport PhotoPicker from './photoPicker/PhotoPicker.vue'\nimport { MessageBox } from 'mint-ui'\n\nexport default {\n  name: 'Demo',\n  data () {\n    return {\n      isWeixinJs: false, // 是否在调用微信Js\n      addMoreImg: require('./photoPicker/icon_content_n_pc.png'),\n      imgs: [], // 界面展示的图片本地地址\n      imgData: [], // 需要上传图片的数据\n      // http://mmbiz.qpic.cn/mmbiz_jpg/52qI3slqMgEQ0sucicop1LAYAjTTc7GBecpTxGYn6jBXpw3P8xoh2O1AwsPrAgHzSqmgk8EQnjicAhm0OTJ2M9tA/0\n      qrImg: require('../assets/测试公众号二维码.jpg')\n    }\n  },\n  components: {\n    'photo-picker': PhotoPicker\n  },\n  methods: {\n    deleteImg: function (index) {\n      var that = this\n      MessageBox({\n        title: '提示',\n        message: '是否删除图片',\n        showCancelButton: true\n      }).then(action => {\n        if (action === 'cancel') {\n          return\n        }\n        that.imgs.splice(index, 1)\n        that.imgData.splice(index, 1)\n      }, function (error) {\n        console.log(error)\n      })\n    },\n    addImg: function () {\n      console.log('addImg')\n      // 设置最多选10张图片\n      this.$refs.tyPhotoPicker.setLimitPhotoNum(10)\n      // 已经选择的图片张数\n      this.$refs.tyPhotoPicker.setCurrentPhotoNum(this.imgs.length)\n      this.$refs.tyPhotoPicker.pickPhoto()\n    },\n    onLoadLocalIds: function (photos) { // 图片选择完毕走这里\n      console.debug('onLoadLocalIds====')\n      console.debug(photos)\n      this.imgData = this.imgData.concat(photos)\n      this.isWeixinJs = photos[0].isWeixinJs\n      if (this.isWeixinJs) {\n        // console.debug('使用微信SDK')\n        var localIds = []\n        for (var j = 0; j < photos.length; j++) {\n          localIds.push(photos[j].localId)\n        }\n        this.imgs = this.imgs.concat(localIds) // 安卓是localId，iOS是base64\n        console.debug('this.imgs----')\n        console.debug(this.imgs)\n      } else {\n        // console.debug('不使用微信SDK')\n        var localDataList = []\n        for (var i = 0; i < photos.length; i++) {\n          if (photos[i].localData) {\n            localDataList.push(photos[i].localData)\n          }\n        }\n        this.imgs = this.imgs.concat(localDataList) // 安卓是localId，iOS是base64\n        console.debug('this.imgs----')\n        console.debug(this.imgs)\n      }\n    }\n  }\n}\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style scoped>\n.demo {\n\n}\n.title {\n  font-size: 20px;\n  font-weight: bold;\n  height: 30px;\n  line-height: 30px;\n  background-color: rgb(215, 215, 215);\n}\n.tip {\n  text-align: left;\n  background-color: rgb(215, 215, 215);\n}\n.item {\n  padding: 20px 0px;\n  border-bottom: dashed 1px #e5e5e5;\n  /*background-color: rgb(254, 88, 183);*/\n  /*border-bottom: solid 1px red;*/\n}\n.question {\n  text-align: left;\n  font-size: 15px;\n  color: #666;\n}\n.img-box {\n  margin-top: 10px;\n  margin-left: 9px;\n  margin-right: 9px;\n  width: 64px;\n  height: 64px;\n  background-color: rgb(204,204,204);\n}\n.background-none {\n  background: none;\n}\n.img {\n  width: 100%;\n  height: 100%;\n  object-fit: scale-down !important;\n  cursor: pointer;\n}\n.display-flex-box {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: -webkit-flex;\n  display: box;\n  display: flex;\n}\n.flex-wrap {\n  -ms-flex-wrap: wrap;\n      flex-wrap: wrap;\n    -webkit-flex-wrap: wrap;\n}\n/*空间不足的时候不压缩*/\n.shrink-none {\n  -ms-flex-negative: 0;\n  -webkit-flex-shrink: 0;\n  -webkit-box-shrink: 0;\n      flex-shrink: 0;\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/Demo.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"photo-picker-container\"},[_c('input',{attrs:{\"id\":\"photo-picker-input\",\"hidden\":\"true\",\"name\":\"file\",\"type\":\"file\",\"accept\":\"image/*\"},on:{\"change\":function($event){_vm.onPickedPhotos($event)}}})])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/.13.5.0@vue-loader/lib/template-compiler?{\"id\":\"data-v-359280eb\",\"hasScoped\":true,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/.13.5.0@vue-loader/lib/selector.js?type=template&index=0!./src/components/photoPicker/PhotoPicker.vue\n// module id = sw+w\n// module chunks = 1","'use strict'\n// 微信js sdk鉴权组件\nvar wx = require('weixin-js-sdk')\nimport tyService from './tyService.js'\nvar EXIF = require('exif-js')\nvar MegaPixImage = require('./megapic-image.js')\n\nvar wxJsComponent = new function () {\n  // 记录配置成功的信息历史\n  this.configHistory = {}\n\n  // 获取访问接口授权\n  this.initConfig = function (configData, callback) {\n    console.warn('initConfig1' + JSON.stringify(configData))\n    if (configData.activeStatus) { // 返回值有效且为激活状态\n      console.warn('initConfig2')\n      var appid = configData.appId\n      var timestamp = configData.timestamp\n      var nonceStr = configData.nonceStr\n      var signature = configData.signature\n      wx.config({\n        debug: true, // 开启调试模式,调用的所有api的返回值会在客户端alert出来，若要查看传入的参数，可以在pc端打开，参数信息会通过log打出，仅在pc端时才会打印。\n        appId: appid, // 必填，企业号的唯一标识，此处填写企业号corpid\n        timestamp: timestamp, // 必填，生成签名的时间戳\n        nonceStr: nonceStr, // 必填，生成签名的随机串\n        signature: signature, // 必填，签名，见附录1\n        jsApiList: ['chooseImage', 'previewImage']\n        // jsApiList: ['checkJsApi'] // 必填，需要使用的JS接口列表，所有JS接口列表见附录2\n      })\n    }\n    var hasError = false\n    wx.error(function (res) {\n      hasError = true\n      console.warn('wx.error:' + JSON.stringify(res))\n      if (callback) {\n        // 如果报错，直接返回false\n        callback(false)\n        callback = null\n      }\n      // config信息验证失败会执行error函数，如签名过期导致验证失败，具体错误信息可以打开config的debug模式查看，也可以在返回的res参数中查看，对于SPA可以在这里更新签名。\n    })\n    wx.ready(function () {\n      console.warn('wx.ready hasError:' + hasError)\n      if (callback) {\n        callback(!hasError)\n      }\n    })\n  }\n\n  this.hasAuthorized = function (pageUrl) {\n    var currentTime = Math.round(new Date().getTime() / 1000)\n    if (navigator.userAgent.toLowerCase().indexOf('iphone os') !== -1) {\n      for (var pageKey in this.configHistory) {\n        if (this.configHistory[pageKey] && this.configHistory[pageKey].lastTime && this.configHistory[pageKey].success) {\n          // 如果这个页面已经获取过config\n          if ((currentTime - this.configHistory[pageKey].lastTime) < 60 * 60 * 1.5) {\n            // 距离上次获取config不超过1.5小时，直接调用接口\n            console.log('wxJSConfig ios has history:' + pageKey)\n            return true\n          } else {\n            this.configHistory[pageKey] = null\n          }\n        }\n        break\n      }\n    } else {\n      // android\n      var pageConfig2 = this.configHistory[pageKey]\n      if (pageConfig2 && pageConfig2.lastTime && pageConfig2.success) {\n        // 如果这个页面已经获取过config\n        if ((currentTime - pageConfig2.lastTime) < 60 * 60 * 1.5) {\n          // 距离上次获取config不超过1.5小时，直接调用接口\n          console.log('wxJSConfig android has history:' + pageUrl)\n          return true\n        } else {\n          this.configHistory[pageKey] = null\n        }\n      }\n    }\n    return false\n  }\n\n  // 访问微信jssdk鉴权\n  this.wxJSConfig = function (callback) {\n    var pageUrl = window.location.href.split('#')[0]\n    console.log('wxJSConfig window.location.href1:' + pageUrl)\n    if (this.hasAuthorized(pageUrl)) {\n      if (callback) {\n        callback(true)\n      }\n      return\n    }\n    var that = this\n    var signURL = pageUrl.replace(/&/g, '%26') // 给链接中所有的&uri编码 encodeURIComponent\n    var appid = 'wxcfd35355d34a1894'\n    var secret = 'c99b4935724d9b4f3c725a94d59a7640'\n    // 获取AccessToken(有效期7200秒，每日200次): 'https://api.weixin.qq.com/cgi-bin/token?grant_type=client_credential&appid=APPID&secret=APPSECRET'\n    // 用AccessToken获取tikcet(有效期7200秒)： 'https://api.weixin.qq.com/cgi-bin/ticket/getticket?access_token=ACCESS_TOKEN&type=jsapi'\n    // 用用AccessToken获取tikcet生成signature：\n    // noncestr=Wm3WZYTPz0wzccnW\n    // jsapi_ticket=sM4AOVdWfPE4DxkXGEs8VMCPGGVi4C3VM0P37wVUCFvkVAy_90u5h9nbSlYy3-Sl-HhTdfl2fzFy1AOcHKP7qg\n    // timestamp=1414587457\n    // url=http://mp.weixin.qq.com?params=value\n    // jsapi_ticket=sM4AOVdWfPE4DxkXGEs8VMCPGGVi4C3VM0P37wVUCFvkVAy_90u5h9nbSlYy3-Sl-HhTdfl2fzFy1AOcHKP7qg&noncestr=Wm3WZYTPz0wzccnW&timestamp=1414587457&url=http://mp.weixin.qq.com?params=value\n    // 进行sha1签名: 得到0f9de62fce790f9a083d5c99e95740ceb90c27ed\n    var accessToken = ''\n    tyService.getWXConfigAccessToken(appid, secret, function (isSuccess, result) {\n      if (isSuccess) {\n        accessToken = result\n        console.debug(result)\n      }\n    })\n    var ticket = ''\n    tyService.getWXConfigTicket(accessToken, function (isSuccess, result) {\n      if (isSuccess) {\n        console.debug(result)\n        ticket = result\n      }\n    })\n    var noncestr = 'Wm3WZYTPz0wzccnW'\n    var timestamp = new Date()\n    tyService.getWXConfigSignature(ticket, noncestr, timestamp, signURL, function (isSuccess, result) {\n      if (isSuccess) {\n        console.log('获取签名 success:' + JSON.stringify(result))\n        // 请求config\n        that.initConfig(result, function (success) {\n          console.log('initConfig 11:' + success)\n          if (success) {\n            // 签名成功，缓存获取配置记录\n            if (pageUrl) {\n              var pageConfig = {}\n              pageConfig.success = true\n              pageConfig.lastTime = Math.round(new Date().getTime() / 1000)\n              that.configHistory[pageUrl] = pageConfig\n            }\n          } else {\n            // 如果签名失败，删除记录\n            var pageConfig2 = that.configHistory[pageUrl]\n            if (pageConfig2 && pageUrl) {\n              that.configHistory[pageUrl] = null\n            }\n          }\n          // 调用回调\n          if (callback) {\n            callback(success)\n          }\n        })\n      } else {\n        console.log('获取签名 fail:' + result)\n        if (callback) {\n          callback(false)\n        }\n      }\n    })\n  }\n\n  // 选择照片\n  this.pickPhoto = function (callback, count) {\n    if (!count || count > 9) {\n      count = 9\n    }\n    console.log('pickPhoto:' + count)\n    this.wxJSConfig(function (success) {\n      console.log('pickPhoto wxJSConfig2:' + success)\n      wx.chooseImage({\n        count: count, // 默认9\n        sizeType: ['original', 'compressed'], // 可以指定是原图还是压缩图，默认二者都有\n        sourceType: ['album', 'camera'], // 可以指定来源是相册还是相机，默认二者都有\n        success: function (res) {\n          if (callback) {\n            callback(true, res.localIds)\n          }\n        },\n        error: function () {\n          console.warn('####chooseImage error')\n        },\n        complete: function () {\n          console.warn('####chooseImage complete')\n        },\n        fail: function () {\n          console.warn('####chooseImage fail')\n        },\n        failed: function () {\n          console.warn('####chooseImage failed')\n        }\n      })\n    })\n  }\n\n  // 查看图片大图\n  this.previewImage = function (photoUrl, photoUrlList) {\n    photoUrlList = photoUrlList || [photoUrl]\n    wx.previewImage({\n      current: photoUrl, // 当前显示图片的http链接\n      urls: photoUrlList // 需要预览的图片http链接列表\n    })\n  }\n\n  // 读取本地图片数据\n  this.loadLocalPhotoData = function (localId, callback) {\n    this.wxJSConfig(function (success) {\n      if (success) {\n        wx.getLocalImgData({\n          localId: localId, // 图片的localID\n          success: function (res) {\n            var localData = res.localData // localData是图片的base64数据，可以用img标签显示\n            if (callback) {\n              callback(true, localData)\n            }\n          }\n        })\n      } else {\n        if (callback) {\n          callback(false)\n        }\n      }\n    })\n  }\n\n  // 读取本地图片数据\n  this.loadLocalPhotoListData = function (localIds, callback, dataList) {\n    if (localIds && localIds.length) {\n      dataList = dataList || []\n      var that = this\n      var loadItem = localIds[0]\n      this.loadLocalPhotoData(loadItem, function (success, data) {\n        var resItem = {}\n        resItem.localId = loadItem\n        resItem.data = data\n        dataList.push(resItem)\n        if (localIds.length > 1) {\n          if (callback) {\n            callback(false, resItem) // 转完一个走一次\n          }\n          that.loadLocalPhotoListData(localIds.slice(1), callback, dataList)\n        } else {\n          if (callback) {\n            callback(true, resItem) // 全部转换完\n          }\n        }\n      })\n    } else { // localId不存在\n      if (callback) {\n        callback(false)\n      }\n    }\n  }\n\n  // 获取input file的文件地址\n  this.getLocalFileURL = function (file) {\n    var url = null\n    if (window.createObjectURL !== undefined) { // basic\n      url = window.createObjectURL(file)\n    } else if (window.URL !== undefined) { // mozilla(firefox)兼容火狐\n      url = window.URL.createObjectURL(file)\n    } else if (window.webkitURL !== undefined) { // webkit or chrome\n      url = window.webkitURL.createObjectURL(file)\n    }\n    return url\n  }\n\n  // 读取图片base64数据，和图片宽高\n  this.loadImageWithUrl = function (url, callback) {\n    var sourceImage = new Image()\n    sourceImage.onload = function () {\n      if (callback) {\n        callback(sourceImage)\n      }\n      sourceImage = null\n    }\n    sourceImage.src = url\n  }\n\n  // 读取图片base64数据，和图片宽高\n  this.getImageBase64Data = function (url, callback) {\n    this.loadImageWithUrl(url, function (sourceImage) {\n      var imageWidth = sourceImage.width\n      var imageHeight = sourceImage.height\n      console.info('resizeImage width:' + imageWidth)\n      console.info('resizeImage height:' + imageHeight)\n      var canvas = document.createElement('canvas')\n      canvas.width = imageWidth\n      canvas.height = imageHeight\n\n      canvas.getContext('2d').drawImage(sourceImage, 0, 0, imageWidth, imageHeight)\n      var dataURL = canvas.toDataURL('image/jpeg')\n      if (callback) {\n        callback(dataURL, imageWidth, imageHeight)\n      }\n      canvas = null\n      dataURL = null\n    })\n  }\n  // 加载input选取的图片信息，压缩图片\n  this.loadAndCompressInputImageData = function (file, callback) {\n    console.warn('loadAndCompressInputImageData:' + file.name + ', size:' + file.size)\n    var orientation\n    var that = this\n    EXIF.getData(file, function () {\n      orientation = EXIF.getTag(file, 'Orientation')\n      console.warn('EXIF.getData orientation:' + orientation)\n    })\n    var reader = new FileReader()\n    reader.readAsDataURL(file)\n    reader.onload = function (e) {\n      var image = new Image()\n      image.src = e.target.result\n      image.onload = function () {\n        var expectWidth = this.naturalWidth\n        var expectHeight = this.naturalHeight\n        // 适当压缩图片，规范尺寸\n        if (this.naturalWidth > this.naturalHeight && this.naturalWidth > 800) {\n          expectWidth = 800\n          expectHeight = expectWidth * this.naturalHeight / this.naturalWidth\n        } else if (this.naturalHeight > this.naturalWidth && this.naturalHeight > 1200) {\n          expectHeight = 1200\n          expectWidth = expectHeight * this.naturalWidth / this.naturalHeight\n        }\n        var canvas = document.createElement('canvas')\n        var ctx = canvas.getContext('2d')\n        canvas.width = expectWidth\n        canvas.height = expectHeight\n        ctx.drawImage(this, 0, 0, expectWidth, expectHeight)\n        // 修复ios上传图片的时候 被旋转的问题\n        var base64 = null\n        if (orientation && orientation !== 1) {\n          var mpImg = new MegaPixImage(image)\n          mpImg.render(canvas, {\n            maxWidth: 800,\n            maxHeight: 1200,\n            quality: 0.8,\n            orientation: orientation\n          })\n        }\n        base64 = canvas.toDataURL('image/jpeg', 0.8)\n        var fileLength = parseInt(base64.length - (base64.length / 8) * 2)\n        if (fileLength / 1024000 > 1) { // 如果图片仍然大于1M，压缩图片\n          // 压缩图片\n          that.imgScale(base64, 4, callback)\n        } else {\n          if (callback) {\n            callback(base64, canvas.width, canvas.height)\n          }\n        }\n      }\n    }\n  }\n  // 压缩图片\n  this.imgScale = function (imgUrl, quality, callback) {\n    console.warn('imgScale')\n    var img = new Image()\n    var canvas = document.createElement('canvas')\n    var cxt = canvas.getContext('2d')\n    img.src = imgUrl\n    img.onload = function () {\n      // 缩放后图片的宽高\n      var width = img.naturalWidth / quality\n      var height = img.naturalHeight / quality\n      canvas.width = width\n      canvas.height = height\n      cxt.drawImage(this, 0, 0, width, height)\n      if (callback) {\n        callback(canvas.toDataURL('image/jpeg'), width, height)\n      }\n    }\n  }\n  // 选择图片方向\n  this.rotateImg = function (img, direction, canvas) { // 图片旋转\n    console.warn('rotateImg1:' + direction)\n    var minStep = 0\n    var maxStep = 3\n    if (img === null) return\n    var height = img.height\n    var width = img.width\n    var step = 2\n    if (step === null) {\n      step = minStep\n    }\n    if (direction === 'right') {\n      step++\n      step > maxStep && (step = minStep)\n    } else {\n      step--\n      step < minStep && (step = maxStep)\n    }\n    console.warn('rotateImg2')\n    var degree = step * 90 * Math.PI / 180\n    var ctx = canvas.getContext('2d')\n    console.warn('rotateImg3')\n    switch (step) {\n      case 0:\n        canvas.width = width\n        canvas.height = height\n        ctx.drawImage(img, 0, 0)\n        break\n      case 1:\n        canvas.width = height\n        canvas.height = width\n        ctx.rotate(degree)\n        ctx.drawImage(img, 0, -height)\n        break\n      case 2:\n        canvas.width = width\n        canvas.height = height\n        ctx.rotate(degree)\n        ctx.drawImage(img, -width, -height)\n        break\n      case 3:\n        canvas.width = height\n        canvas.height = width\n        ctx.rotate(degree)\n        ctx.drawImage(img, -width, 0)\n        break\n    }\n    console.warn('rotateImg6')\n  }\n}\n\nexport default wxJsComponent\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./static/wxJsComponent.js\n// module id = uVNh\n// module chunks = 1"],"sourceRoot":""}