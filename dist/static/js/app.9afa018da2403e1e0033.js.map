{"version":3,"sources":["webpack:///static/js/app.9afa018da2403e1e0033.js","webpack:///./src/components/Demo.vue","webpack:///./src/components/photoPicker/icon_content_n_pc.png","webpack:///./src/components/Demo.vue?2bd8","webpack:///./static/tyService.js","webpack:///./src/assets/测试公众号二维码.jpg","webpack:///./src/components/photoPicker/PhotoPicker.vue","webpack:///./src/components/photoPicker/PhotoPicker.vue?9aa1","webpack:///./src/App.vue","webpack:///./src/main.js","webpack:///./static/megapic-image.js","webpack:///src/App.vue","webpack:///src/components/photoPicker/PhotoPicker.vue","webpack:///./src/router/index.js","webpack:///./src/App.vue?4131","webpack:///src/components/Demo.vue","webpack:///./static/wxJsComponent.js"],"names":["webpackJsonp","/Q2z","module","exports","26cW","__webpack_exports__","__webpack_require__","injectStyle","ssrContext","__WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_13_5_0_vue_loader_lib_selector_type_script_index_0_Demo_vue__","__WEBPACK_IMPORTED_MODULE_1__node_modules_13_5_0_vue_loader_lib_template_compiler_index_id_data_v_fbfd6244_hasScoped_true_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_13_5_0_vue_loader_lib_selector_type_template_index_0_Demo_vue__","normalizeComponent","__vue_styles__","Component","2Y24","7Wvr","render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","attrs","src","qrImg","width","height","alt","_l","item","index","on","click","$event","deleteImg","imgs","length","addMoreImg","addImg","_e","ref","hidden","onLoadLocalIds","staticRenderFns","esExports","8CGt","$","tyService","appId","commonRequest","requestType","isAsync","addtionalUrl","jsonData","callback","url","console","log","ajax","type","async","data","dataType","headers","Content-Type","success","result","JSON","stringify","code","error","XMLHttpRequest","textStatus","errorThrown","status","getWXConfigAccessToken","appid","secret","warn","accessTokenUrl","getWXConfigTicket","accessToken","jsapiTicketUrl","getWXConfigSignature","ticket","noncestr","timestamp","pageUrl","str","sha1","activeStatus","nonceStr","signature","coreSha1","blockArray","x","w","Array","a","b","c","d","e","i","olda","oldb","oldc","oldd","olde","j","rol","t","safeAdd","sha1Ft","sha1Kt","y","lsw","num","cnt","alignSHA1","nblk","blks","charCodeAt","binb2hex","binarray","hexTab","hexcase","charAt","s","8mmz","p","H3lr","__WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_13_5_0_vue_loader_lib_selector_type_script_index_0_PhotoPicker_vue__","__WEBPACK_IMPORTED_MODULE_1__node_modules_13_5_0_vue_loader_lib_template_compiler_index_id_data_v_f1bef6a4_hasScoped_true_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_13_5_0_vue_loader_lib_selector_type_template_index_0_PhotoPicker_vue__","I0PP","id","name","accept","change","onPickedPhotos","KtrQ","M93x","__WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_13_5_0_vue_loader_lib_selector_type_script_index_0_App_vue__","__WEBPACK_IMPORTED_MODULE_1__node_modules_13_5_0_vue_loader_lib_template_compiler_index_id_data_v_f715737c_hasScoped_false_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_13_5_0_vue_loader_lib_selector_type_template_index_0_App_vue__","NHnr","Object","defineProperty","value","__WEBPACK_IMPORTED_MODULE_0_vue__","__WEBPACK_IMPORTED_MODULE_1__App__","__WEBPACK_IMPORTED_MODULE_2__router__","__WEBPACK_IMPORTED_MODULE_3_mint_ui__","__WEBPACK_IMPORTED_MODULE_3_mint_ui___default","n","__WEBPACK_IMPORTED_MODULE_4_mint_ui_lib_style_css__","config","productionTip","use","el","router","h","QEa4","detectSubsampling","img","iw","naturalWidth","naturalHeight","canvas","document","createElement","ctx","getContext","drawImage","getImageData","detectVerticalSquash","ih","sy","ey","py","ratio","renderImageToDataURL","options","doSquash","renderImageToCanvas","toDataURL","quality","save","transformCoordinate","orientation","tmpCanvas","tmpCtx","vertSquashRatio","dw","Math","ceil","dh","dy","sx","dx","clearRect","restore","translate","scale","rotate","PI","MegaPixImage","srcImage","window","Blob","Image","URL","createObjectURL","webkitURL","Error","blob","_this","onload","listeners","imageLoadListeners","len","prototype","target","push","imgWidth","imgHeight","maxWidth","maxHeight","opt","k","tagName","toLowerCase","onrender","T4DX","__WEBPACK_IMPORTED_MODULE_0_eruda__","__WEBPACK_IMPORTED_MODULE_0_eruda___default","created","body","appendChild","init","container","tool","Y6LL","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_get_iterator__","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_get_iterator___default","__WEBPACK_IMPORTED_MODULE_1__static_wxJsComponent_js__","__WEBPACK_IMPORTED_MODULE_1__static_wxJsComponent_js___default","__WEBPACK_IMPORTED_MODULE_2_mint_ui__","iosWeixin","isAndroid","navigator","userAgent","indexOf","isIOS","isSafari","selectedPhotoNum","maxPhotoNum","photoList","methods","setCurrentPhotoNum","setLimitPhotoNum","pickPhoto","showWeixinPicker","getElementById","loadPhotoInfo","localIdOrFile","isWeixinJs","loadImageWithUrl","sourceImage","localId","originWidth","originHeight","getImageBase64Data","photoData","imageWidth","imageHeight","localData","loadAndCompressInputImageData","fileName","loadPhotoListInfo","photoUrlList","that","loadItem","photoItem","slice","avaiNum","localIds","$emit","message","duration","event","files","currentTarget","fileItem","photos","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","next","done","err","return","mounted","YaEn","__WEBPACK_IMPORTED_MODULE_1_vue_router__","__WEBPACK_IMPORTED_MODULE_2__components_Demo__","routes","path","component","ffUS","kouS","__WEBPACK_IMPORTED_MODULE_0__photoPicker_PhotoPicker_vue__","__WEBPACK_IMPORTED_MODULE_1_mint_ui__","imgData","components","photo-picker","title","showCancelButton","then","action","splice","$refs","tyPhotoPicker","debug","concat","localDataList","uSV6","uVNh","wx","EXIF","wxJsComponent","configHistory","Map","initConfig","configData","jsApiList","hasError","res","ready","hasAuthorized","currentTime","round","Date","getTime","pageKey","lastTime","delete","pageConfig2","get","wxJSConfig","location","href","split","signURL","replace","isSuccess","pageConfig","set","count","chooseImage","sizeType","sourceType","complete","fail","failed","previewImage","photoUrl","current","urls","loadLocalPhotoData","getLocalImgData","loadLocalPhotoListData","dataList","resItem","getLocalFileURL","file","info","dataURL","size","getData","getTag","reader","FileReader","readAsDataURL","image","expectWidth","expectHeight","base64","parseInt","imgScale","imgUrl","cxt","rotateImg","direction","step","degree","yrGq"],"mappings":"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","file":"static/js/app.9afa018da2403e1e0033.js","sourcesContent":["webpackJsonp([1],{\n\n/***/ \"/Q2z\":\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ \"26cW\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_13_5_0_vue_loader_lib_selector_type_script_index_0_Demo_vue__ = __webpack_require__(\"kouS\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__node_modules_13_5_0_vue_loader_lib_template_compiler_index_id_data_v_fbfd6244_hasScoped_true_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_13_5_0_vue_loader_lib_selector_type_template_index_0_Demo_vue__ = __webpack_require__(\"7Wvr\");\nfunction injectStyle (ssrContext) {\n  __webpack_require__(\"uSV6\")\n}\nvar normalizeComponent = __webpack_require__(\"XAIM\")\n/* script */\n\n/* template */\n\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-fbfd6244\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_13_5_0_vue_loader_lib_selector_type_script_index_0_Demo_vue__[\"a\" /* default */],\n  __WEBPACK_IMPORTED_MODULE_1__node_modules_13_5_0_vue_loader_lib_template_compiler_index_id_data_v_fbfd6244_hasScoped_true_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_13_5_0_vue_loader_lib_selector_type_template_index_0_Demo_vue__[\"a\" /* default */],\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Component.exports);\n\n\n/***/ }),\n\n/***/ \"2Y24\":\n/***/ (function(module, exports) {\n\nmodule.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAYAAADDPmHLAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMDY3IDc5LjE1Nzc0NywgMjAxNS8wMy8zMC0yMzo0MDo0MiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTUgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjhGNzFGQUMyQjdGMzExRTdCRjMwRDhEQTY4MDNBRTVDIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjhGNzFGQUMzQjdGMzExRTdCRjMwRDhEQTY4MDNBRTVDIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6OEY3MUZBQzBCN0YzMTFFN0JGMzBEOERBNjgwM0FFNUMiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6OEY3MUZBQzFCN0YzMTFFN0JGMzBEOERBNjgwM0FFNUMiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz60Iy/8AAABxElEQVR42uzcQU7CQBSA4WJYinILOYIHIBxAbsPe4+gBCGHNohcwXoIQ9zgmY0KItLGLaTvzfcnb0I1O/9Ti4k3quj5XFOvOEQgAASAABIAAEAACQAAIAAEgAASAABAAAkAACAABIAAEgAAQAAIYn88w6zCPcdbxs+JMC/ydP8I8hzlefPYeZh/mEObJEyBvm6ub/+sYr/kTkLldw7WtAPJ3arj2JQAEgAAQAAJAAAgAASAABIAAEAACQAAIAAEgAASAABAAAkAACAABIAAEgAAQAAJAAAiAggO43Mkz6Xna9P3zJd1ZlGJH0F87ebjtZ4FFsp1FKZ4AGze/kyQ7i1IEsHMvO9vmEACFvwQuHXNnqxwCeA0zdy//bR7PbvQBLOLb7EuYmfvaahbP6hDPbvRfA6v4VeZtIAfc9r+As3cABIAAEAACQAAIAAEgAASAABAAAkAACAABIAAEgAAQAAJAAAgAASAABIAAEAACQAAIAAH07qHh2r0A8te0s2glgPzd2lmUZCePAPp3vbMo6U6eoZlWZRrSziJPAASAABAAAkAACAABIAAEgAAQAAJAAAgAASAABIAAEAACQAAIgK6+BRgAAUMpKcJwzJgAAAAASUVORK5CYII=\"\n\n/***/ }),\n\n/***/ \"7Wvr\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nvar render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"demo\"},[_c('div',{staticClass:\"title\"},[_vm._v(\"\\n    TYPhotoPicker1\\n  \")]),_vm._v(\" \"),_c('div',{staticClass:\"tip\"},[_vm._v(\"\\n    1. 能够在微信之外运行，但主要还是为了在微信页面内调用相册选择器而设计的 \"),_c('br'),_vm._v(\"\\n    2. 在微信中使用，由于iOS平台中的图片转码缓慢，所以弃用调用微信js，通过设置PhotoPicker.iosWeixin也能够调用微信JS \"),_c('br'),_vm._v(\"\\n    关注这个微信号：关注后才允许调用weixin-js-sdk \"),_c('br'),_vm._v(\" \"),_c('img',{attrs:{\"src\":_vm.qrImg,\"width\":\"200\",\"height\":\"200\",\"alt\":\"\"}}),_vm._v(\" \"),_c('br'),_vm._v(\"\\n    因为测试账号限制了只允许被100人关注, 当发现不能在微信中运行的时候请来到下面，自行申请测试账号， \"),_c('br'),_vm._v(\"\\n    申请微信测试公众号：https://mp.weixin.qq.com/debug/cgi-bin/sandbox?t=sandbox/login \"),_c('br'),_vm._v(\"\\n    申请账号之后填写测试域名（一个测试账号允许有一个域名调用weixin-js-sdk），并调整wxJsComponen中对appid、secret的赋值\\n  \")]),_vm._v(\" \"),_c('div',{staticClass:\"item\"},[_c('div',{staticClass:\"question\"},[_vm._v(\"\\n      请选择图片：\\n    \")]),_vm._v(\" \"),_c('div',{staticClass:\"display-flex-box flex-wrap\"},[_vm._l((_vm.imgs),function(item,index){return _c('div',{staticClass:\"img-box\"},[_c('img',{staticClass:\"img shrink-none\",attrs:{\"src\":item},on:{\"click\":function($event){_vm.deleteImg(index)}}})])}),_vm._v(\" \"),(_vm.imgs.length < 10)?_c('div',{staticClass:\"img-box background-none\"},[_c('img',{staticClass:\"img shrink-none\",attrs:{\"src\":_vm.addMoreImg},on:{\"click\":_vm.addImg}})]):_vm._e(),_vm._v(\" \"),_c('photo-picker',{ref:\"tyPhotoPicker\",attrs:{\"hidden\":\"true\"},on:{\"onLoadLocalIds\":_vm.onLoadLocalIds}})],2)])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\n/* harmony default export */ __webpack_exports__[\"a\"] = (esExports);\n\n/***/ }),\n\n/***/ \"8CGt\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar $ = __webpack_require__(\"bXvV\")\n\nvar tyService = new function () {\n  var appId = ''\n  // 接口前半段\n  const baseUrl = 'https://api.weixin.qq.com'\n  // 获取AccessToken\n  const accessTokenUrl = '/cgi-bin/token'\n  // 获取jsapi_ticket\n  const jsapiTicketUrl = '/cgi-bin/ticket/getticket'\n  // 发送请求\n  this.commonRequest = function (requestType, isAsync, addtionalUrl, jsonData, callback) {\n    var url = baseUrl + addtionalUrl\n    console.log('commonRequest #url:' + url + '#isAsync:' + isAsync + '#jsonData:' + jsonData)\n    $.ajax({\n      type: requestType,\n      url: url,\n      async: isAsync,\n      data: jsonData,\n      dataType: 'JSON',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      success: function (result) {\n        console.log('commonRequest success url:' + url + ' 结果：' + JSON.stringify(result))\n        if (result && result.code === 100) {\n          if (callback) {\n            callback(true, result)\n          }\n        } else {\n          if (callback) {\n            callback(false, result)\n          }\n        }\n      },\n      error: function (XMLHttpRequest, textStatus, errorThrown) {\n        console.log('commonRequest error url:' + url + ' 失败：' + XMLHttpRequest.status)\n        if (callback) {\n          callback(false)\n        }\n      }\n    })\n  }\n  // 获取微信AccessToken（实际开发中，应该由后台获取AccessToken）\n  this.getWXConfigAccessToken = function (appid, secret, callback) {\n    appId = appid\n    console.warn('getWXConfigAccessToken')\n    this.commonRequest('GET', false, (accessTokenUrl + '?grant_type=client_credential' + '&appid=' + appid + '&secret=' + secret), '', function (success, result) {\n      if (success) {\n        if (callback) {\n          callback(true, result.data)\n        }\n      } else {\n        if (callback) {\n          callback(false)\n        }\n      }\n    })\n  }\n\n  // 获取微信jsapi_ticket（实际开发中，应该由后台获取jsapi_ticket）\n  this.getWXConfigTicket = function (accessToken, callback) {\n    console.warn('getWXConfigTicket')\n    this.commonRequest('GET', false, (jsapiTicketUrl + '?type=jsapi' + '&access_token=' + accessToken), '', function (success, result) {\n      if (success) {\n        if (callback) {\n          callback(true, result.data)\n        }\n      } else {\n        if (callback) {\n          callback(false)\n        }\n      }\n    })\n  }\n\n  // 获取微信config签名（实际开发中，应该由后台实现生成签名的逻辑）\n  this.getWXConfigSignature = function (ticket, noncestr, timestamp, pageUrl, callback) {\n    console.warn('getWXConfigSignature:' + pageUrl)\n    var str = 'jsapi_ticket=' + ticket + '&noncestr=' + noncestr + '&timestamp=' + timestamp + '&url=' + pageUrl\n    var sha1 = this.sha1(str)\n    if (sha1) {\n      var response = {\n        'activeStatus': true,\n        'appId': appId,\n        'timestamp': timestamp,\n        'nonceStr': noncestr,\n        'signature': sha1\n      }\n      callback(true, response)\n    } else {\n      callback(false)\n    }\n  }\n\n  // SHA-1算法（实际开发中，应该由后台实现SHA-1算法）\n  this.sha1 = function (str) {\n    hexSha1(str)\n\n    var hexcase = 0  /* hex output format. 0 - lowercase 1 - uppercase */\n    function hexSha1 (s) {\n      return binb2hex(coreSha1(alignSHA1(s)))\n    }\n\n    /*\n     *\n     * Calculate the SHA-1 of an array of big-endian words, and a bit length\n     *\n     */\n    function coreSha1 (blockArray) {\n      var x = blockArray // append padding\n      var w = Array(80)\n      var a = 1732584193\n      var b = -271733879\n      var c = -1732584194\n      var d = 271733878\n      var e = -1009589776\n      for (var i = 0; i < x.length; i += 16) { // 每次处理512位 16*32\n        var olda = a\n        var oldb = b\n        var oldc = c\n        var oldd = d\n        var olde = e\n        for (var j = 0; j < 80; j++) { // 对每个512位进行80步操作\n          if (j < 16) {\n            w[j] = x[i + j]\n          } else {\n            w[j] = rol(w[j - 3] ^ w[j - 8] ^ w[j - 14] ^ w[j - 16], 1)\n          }\n          var t = safeAdd(safeAdd(rol(a, 5), sha1Ft(j, b, c, d)), safeAdd(safeAdd(e, w[j]), sha1Kt(j)))\n          e = d\n          d = c\n          c = rol(b, 30)\n          b = a\n          a = t\n        }\n        a = safeAdd(a, olda)\n        b = safeAdd(b, oldb)\n        c = safeAdd(c, oldc)\n        d = safeAdd(d, oldd)\n        e = safeAdd(e, olde)\n      }\n      return [a, b, c, d, e]\n    }\n\n    /*\n     *\n     * 返回对应F函数的值\n     *\n     */\n    function sha1Ft (t, b, c, d) {\n      if (t < 20) {\n        return (b & c) | ((~b) & d)\n      }\n      if (t < 40) {\n        return b ^ c ^ d\n      }\n      if (t < 60) {\n        return (b & c) | (b & d) | (c & d)\n      }\n      return b ^ c ^ d // t<80\n    }\n\n    /*\n     * 返回对应的Kt值\n     *\n     */\n    function sha1Kt (t) {\n      return (t < 20) ? 1518500249 : (t < 40) ? 1859775393 : (t < 60) ? -1894007588 : -899497514\n    }\n\n    /*\n     *\n     * 将32位数拆成高16位和低16位分别进行相加，从而实现 MOD 2^32 的加法\n     *\n     */\n    function safeAdd (x, y) {\n      var lsw = (x & 0xFFFF) + (y & 0xFFFF)\n      var msw = (x >> 16) + (y >> 16) + (lsw >> 16)\n      return (msw << 16) | (lsw & 0xFFFF)\n    }\n\n    /*\n     *\n     * 32位二进制数循环左移\n     *\n     */\n    function rol (num, cnt) {\n      return (num << cnt) | (num >>> (32 - cnt))\n    }\n\n    /*\n     *\n     * The standard SHA1 needs the input string to fit into a block\n     * This function align the input string to meet the requirement\n     *\n     */\n    function alignSHA1 (str) {\n      var nblk = ((str.length + 8) >> 6) + 1\n      var blks = new Array(nblk * 16)\n      for (var i = 0; i < nblk * 16; i++) {\n        blks[i] = 0\n      }\n      for (i = 0; i < str.length; i++) {\n        blks[i >> 2] |= str.charCodeAt(i) << (24 - (i & 3) * 8)\n      }\n      blks[i >> 2] |= 0x80 << (24 - (i & 3) * 8)\n      blks[nblk * 16 - 1] = str.length * 8\n      return blks\n    }\n\n    /*\n     *\n     * Convert an array of big-endian words to a hex string.\n     *\n     */\n    function binb2hex (binarray) {\n      var hexTab = hexcase ? '0123456789ABCDEF' : '0123456789abcdef'\n      var str = ''\n      for (var i = 0; i < binarray.length * 4; i++) {\n        str += hexTab.charAt((binarray[i >> 2] >> ((3 - i % 4) * 8 + 4)) & 0xF) + hexTab.charAt((binarray[i >> 2] >> ((3 - i % 4) * 8)) & 0xF)\n      }\n      return str\n    }\n  }\n}\n\nmodule.exports = {\n  tyService: tyService,\n  $: $\n}\n\n\n/***/ }),\n\n/***/ \"8mmz\":\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__.p + \"static/img/测试公众号二维码.f327aa5.jpg\";\n\n/***/ }),\n\n/***/ \"H3lr\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_13_5_0_vue_loader_lib_selector_type_script_index_0_PhotoPicker_vue__ = __webpack_require__(\"Y6LL\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__node_modules_13_5_0_vue_loader_lib_template_compiler_index_id_data_v_f1bef6a4_hasScoped_true_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_13_5_0_vue_loader_lib_selector_type_template_index_0_PhotoPicker_vue__ = __webpack_require__(\"I0PP\");\nfunction injectStyle (ssrContext) {\n  __webpack_require__(\"/Q2z\")\n}\nvar normalizeComponent = __webpack_require__(\"XAIM\")\n/* script */\n\n/* template */\n\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-f1bef6a4\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_13_5_0_vue_loader_lib_selector_type_script_index_0_PhotoPicker_vue__[\"a\" /* default */],\n  __WEBPACK_IMPORTED_MODULE_1__node_modules_13_5_0_vue_loader_lib_template_compiler_index_id_data_v_f1bef6a4_hasScoped_true_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_13_5_0_vue_loader_lib_selector_type_template_index_0_PhotoPicker_vue__[\"a\" /* default */],\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Component.exports);\n\n\n/***/ }),\n\n/***/ \"I0PP\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nvar render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"photo-picker-container\"},[_c('input',{attrs:{\"id\":\"photo-picker-input\",\"hidden\":\"true\",\"name\":\"file\",\"type\":\"file\",\"accept\":\"image/*\"},on:{\"change\":function($event){_vm.onPickedPhotos($event)}}})])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\n/* harmony default export */ __webpack_exports__[\"a\"] = (esExports);\n\n/***/ }),\n\n/***/ \"KtrQ\":\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ \"M93x\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_13_5_0_vue_loader_lib_selector_type_script_index_0_App_vue__ = __webpack_require__(\"T4DX\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__node_modules_13_5_0_vue_loader_lib_template_compiler_index_id_data_v_f715737c_hasScoped_false_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_13_5_0_vue_loader_lib_selector_type_template_index_0_App_vue__ = __webpack_require__(\"ffUS\");\nfunction injectStyle (ssrContext) {\n  __webpack_require__(\"KtrQ\")\n}\nvar normalizeComponent = __webpack_require__(\"XAIM\")\n/* script */\n\n/* template */\n\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_13_5_0_vue_loader_lib_selector_type_script_index_0_App_vue__[\"a\" /* default */],\n  __WEBPACK_IMPORTED_MODULE_1__node_modules_13_5_0_vue_loader_lib_template_compiler_index_id_data_v_f715737c_hasScoped_false_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_13_5_0_vue_loader_lib_selector_type_template_index_0_App_vue__[\"a\" /* default */],\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Component.exports);\n\n\n/***/ }),\n\n/***/ \"NHnr\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_vue__ = __webpack_require__(\"I+zW\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__App__ = __webpack_require__(\"M93x\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__router__ = __webpack_require__(\"YaEn\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_mint_ui__ = __webpack_require__(\"gxss\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_mint_ui___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_mint_ui__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_mint_ui_lib_style_css__ = __webpack_require__(\"yrGq\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_mint_ui_lib_style_css___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4_mint_ui_lib_style_css__);\n\n\n\n\n\n\n__WEBPACK_IMPORTED_MODULE_0_vue__[\"default\"].config.productionTip = false;\n\n__WEBPACK_IMPORTED_MODULE_0_vue__[\"default\"].use(__WEBPACK_IMPORTED_MODULE_3_mint_ui___default.a);\n\n/* eslint-disable no-new */\nnew __WEBPACK_IMPORTED_MODULE_0_vue__[\"default\"]({\n  el: '#app',\n  router: __WEBPACK_IMPORTED_MODULE_2__router__[\"a\" /* default */],\n  render: function render(h) {\n    return h(__WEBPACK_IMPORTED_MODULE_1__App__[\"a\" /* default */]);\n  }\n});\n\n/***/ }),\n\n/***/ \"QEa4\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/**\n * Mega pixel image rendering library for iOS6 Safari\n *\n * Fixes iOS6 Safari's image file rendering issue for large size image (over mega-pixel),\n * which causes unexpected subsampling when drawing it in canvas.\n * By using this library, you can safely render the image with proper stretching.\n *\n * Copyright (c) 2012 Shinichi Tomita <shinichi.tomita@gmail.com>\n * Released under the MIT license\n */\n \n// (function() {\n\n\t/**\n\t * Detect subsampling in loaded image.\n\t * In iOS, larger images than 2M pixels may be subsampled in rendering.\n\t */\n\tfunction detectSubsampling(img) {\n\t\tvar iw = img.naturalWidth,\n\t\t\tih = img.naturalHeight;\n\t\tif (iw * ih > 1024 * 1024) { // subsampling may happen over megapixel image\n\t\t\tvar canvas = document.createElement('canvas');\n\t\t\tcanvas.width = canvas.height = 1;\n\t\t\tvar ctx = canvas.getContext('2d');\n\t\t\tctx.drawImage(img, -iw + 1, 0);\n\t\t\t// subsampled image becomes half smaller in rendering size.\n\t\t\t// check alpha channel value to confirm image is covering edge pixel or not.\n\t\t\t// if alpha value is 0 image is not covering, hence subsampled.\n\t\t\treturn ctx.getImageData(0, 0, 1, 1).data[3] === 0;\n\t\t} else {\n\t\t\treturn false;\n\t\t}\n\t}\n\n\t/**\n\t * Detecting vertical squash in loaded image.\n\t * Fixes a bug which squash image vertically while drawing into canvas for some images.\n\t */\n\tfunction detectVerticalSquash(img, iw, ih) {\n\t\tvar canvas = document.createElement('canvas');\n\t\tcanvas.width = 1;\n\t\tcanvas.height = ih;\n\t\tvar ctx = canvas.getContext('2d');\n\t\tctx.drawImage(img, 0, 0);\n\t\tvar data = ctx.getImageData(0, 0, 1, ih).data;\n\t\t// search image edge pixel position in case it is squashed vertically.\n\t\tvar sy = 0;\n\t\tvar ey = ih;\n\t\tvar py = ih;\n\t\twhile (py > sy) {\n\t\t\tvar alpha = data[(py - 1) * 4 + 3];\n\t\t\tif (alpha === 0) {\n\t\t\t\tey = py;\n\t\t\t} else {\n\t\t\t\tsy = py;\n\t\t\t}\n\t\t\tpy = (ey + sy) >> 1;\n\t\t}\n\t\tvar ratio = (py / ih);\n\t\treturn (ratio === 0) ? 1 : ratio;\n\t}\n\n\t/**\n\t * Rendering image element (with resizing) and get its data URL\n\t */\n\tfunction renderImageToDataURL(img, options, doSquash) {\n\t\tvar canvas = document.createElement('canvas');\n\t\trenderImageToCanvas(img, canvas, options, doSquash);\n\t\treturn canvas.toDataURL(\"image/jpeg\", options.quality || 0.8);\n\t}\n\n\t/**\n\t * Rendering image element (with resizing) into the canvas element\n\t */\n\tfunction renderImageToCanvas(img, canvas, options, doSquash) {\n\t\tvar iw = img.naturalWidth,\n\t\t\tih = img.naturalHeight;\n\t\tvar width = options.width,\n\t\t\theight = options.height;\n\t\tvar ctx = canvas.getContext('2d');\n\t\tctx.save();\n\t\ttransformCoordinate(canvas, ctx, width, height, options.orientation);\n\t\tvar subsampled = detectSubsampling(img);\n\t\tif (subsampled) {\n\t\t\tiw /= 2;\n\t\t\tih /= 2;\n\t\t}\n\t\tvar d = 1024; // size of tiling canvas\n\t\tvar tmpCanvas = document.createElement('canvas');\n\t\ttmpCanvas.width = tmpCanvas.height = d;\n\t\tvar tmpCtx = tmpCanvas.getContext('2d');\n\t\tvar vertSquashRatio = doSquash ? detectVerticalSquash(img, iw, ih) : 1;\n\t\tvar dw = Math.ceil(d * width / iw);\n\t\tvar dh = Math.ceil(d * height / ih / vertSquashRatio);\n\t\tvar sy = 0;\n\t\tvar dy = 0;\n\t\twhile (sy < ih) {\n\t\t\tvar sx = 0;\n\t\t\tvar dx = 0;\n\t\t\twhile (sx < iw) {\n\t\t\t\ttmpCtx.clearRect(0, 0, d, d);\n\t\t\t\ttmpCtx.drawImage(img, -sx, -sy);\n\t\t\t\tctx.drawImage(tmpCanvas, 0, 0, d, d, dx, dy, dw, dh);\n\t\t\t\tsx += d;\n\t\t\t\tdx += dw;\n\t\t\t}\n\t\t\tsy += d;\n\t\t\tdy += dh;\n\t\t}\n\t\tctx.restore();\n\t\ttmpCanvas = tmpCtx = null;\n\t}\n\n\t/**\n\t * Transform canvas coordination according to specified frame size and orientation\n\t * Orientation value is from EXIF tag\n\t */\n\tfunction transformCoordinate(canvas, ctx, width, height, orientation) {\n\t\tswitch (orientation) {\n\t\t\tcase 5:\n\t\t\tcase 6:\n\t\t\tcase 7:\n\t\t\tcase 8:\n\t\t\t\tcanvas.width = height;\n\t\t\t\tcanvas.height = width;\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tcanvas.width = width;\n\t\t\t\tcanvas.height = height;\n\t\t}\n\t\tswitch (orientation) {\n\t\t\tcase 2:\n\t\t\t\t// horizontal flip\n\t\t\t\tctx.translate(width, 0);\n\t\t\t\tctx.scale(-1, 1);\n\t\t\t\tbreak;\n\t\t\tcase 3:\n\t\t\t\t// 180 rotate left\n\t\t\t\tctx.translate(width, height);\n\t\t\t\tctx.rotate(Math.PI);\n\t\t\t\tbreak;\n\t\t\tcase 4:\n\t\t\t\t// vertical flip\n\t\t\t\tctx.translate(0, height);\n\t\t\t\tctx.scale(1, -1);\n\t\t\t\tbreak;\n\t\t\tcase 5:\n\t\t\t\t// vertical flip + 90 rotate right\n\t\t\t\tctx.rotate(0.5 * Math.PI);\n\t\t\t\tctx.scale(1, -1);\n\t\t\t\tbreak;\n\t\t\tcase 6:\n\t\t\t\t// 90 rotate right\n\t\t\t\tctx.rotate(0.5 * Math.PI);\n\t\t\t\tctx.translate(0, -height);\n\t\t\t\tbreak;\n\t\t\tcase 7:\n\t\t\t\t// horizontal flip + 90 rotate right\n\t\t\t\tctx.rotate(0.5 * Math.PI);\n\t\t\t\tctx.translate(width, -height);\n\t\t\t\tctx.scale(-1, 1);\n\t\t\t\tbreak;\n\t\t\tcase 8:\n\t\t\t\t// 90 rotate left\n\t\t\t\tctx.rotate(-0.5 * Math.PI);\n\t\t\t\tctx.translate(-width, 0);\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\n\t/**\n\t * MegaPixImage class\n\t */\n\tfunction MegaPixImage(srcImage) {\n\t\tif (window.Blob && srcImage instanceof Blob) {\n\t\t\tvar img = new Image();\n\t\t\tvar URL = window.URL && window.URL.createObjectURL ? window.URL :\n\t\t\t\twindow.webkitURL && window.webkitURL.createObjectURL ? window.webkitURL :\n\t\t\t\tnull;\n\t\t\tif (!URL) {\n\t\t\t\tthrow Error(\"No createObjectURL function found to create blob url\");\n\t\t\t}\n\t\t\timg.src = URL.createObjectURL(srcImage);\n\t\t\tthis.blob = srcImage;\n\t\t\tsrcImage = img;\n\t\t}\n\t\tif (!srcImage.naturalWidth && !srcImage.naturalHeight) {\n\t\t\tvar _this = this;\n\t\t\tsrcImage.onload = function() {\n\t\t\t\tvar listeners = _this.imageLoadListeners;\n\t\t\t\tif (listeners) {\n\t\t\t\t\t_this.imageLoadListeners = null;\n\t\t\t\t\tfor (var i = 0, len = listeners.length; i < len; i++) {\n\t\t\t\t\t\tlisteners[i]();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\t\tthis.imageLoadListeners = [];\n\t\t}\n\t\tthis.srcImage = srcImage;\n\t}\n\n\t/**\n\t * Rendering megapix image into specified target element\n\t */\n\tMegaPixImage.prototype.render = function(target, options) {\n\t\tif (this.imageLoadListeners) {\n\t\t\tvar _this = this;\n\t\t\tthis.imageLoadListeners.push(function() {\n\t\t\t\t_this.render(target, options)\n\t\t\t});\n\t\t\treturn;\n\t\t}\n\t\toptions = options || {};\n\t\tvar imgWidth = this.srcImage.naturalWidth,\n\t\t\timgHeight = this.srcImage.naturalHeight,\n\t\t\twidth = options.width,\n\t\t\theight = options.height,\n\t\t\tmaxWidth = options.maxWidth,\n\t\t\tmaxHeight = options.maxHeight,\n\t\t\tdoSquash = !this.blob || this.blob.type === 'image / jpeg';\n\t\tif (width && !height) {\n\t\t\theight = (imgHeight * width / imgWidth) << 0;\n\t\t} else if (height && !width) {\n\t\t\twidth = (imgWidth * height / imgHeight) << 0;\n\t\t} else {\n\t\t\twidth = imgWidth;\n\t\t\theight = imgHeight;\n\t\t}\n\t\tif (maxWidth && width > maxWidth) {\n\t\t\twidth = maxWidth;\n\t\t\theight = (imgHeight * width / imgWidth) << 0;\n\t\t}\n\t\tif (maxHeight && height > maxHeight) {\n\t\t\theight = maxHeight;\n\t\t\twidth = (imgWidth * height / imgHeight) << 0;\n\t\t}\n\t\tvar opt = {\n\t\t\twidth: width,\n\t\t\theight: height\n\t\t};\n\t\tfor (var k in options) opt[k] = options[k];\n\n\t\tvar tagName = target.tagName.toLowerCase();\n\t\tif (tagName === 'img') {\n\t\t\ttarget.src = renderImageToDataURL(this.srcImage, opt, doSquash);\n\t\t} else if (tagName === 'canvas') {\n\t\t\trenderImageToCanvas(this.srcImage, target, opt, doSquash);\n\t\t}\n\t\tif (typeof this.onrender === ' function') {\n\t\t\tthis.onrender(target);\n\t\t}\n\t};\n\n\t/**\n\t * Export class to global\n\t */\n// \tif (typeof define === ' function' && define.amd) {\n// \t\tdefine([], function() {\n// \t\t\treturn MegaPixImage;\n// \t\t}); // for AMD loader\n// \t} else {\n// \t\tthis.MegaPixImage = MegaPixImage;\n// \t}\n// })();\n\nmodule.exports = MegaPixImage;\n\n\n/***/ }),\n\n/***/ \"T4DX\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_eruda__ = __webpack_require__(\"Gnhh\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_eruda___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_eruda__);\n//\n//\n//\n//\n//\n//\n\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n  name: 'app',\n  created: function created() {\n    // 日志查看\n    var el = document.createElement('div');\n    document.body.appendChild(el);\n    __WEBPACK_IMPORTED_MODULE_0_eruda___default.a.init({\n      container: el,\n      tool: ['console', 'elements']\n    });\n  }\n});\n\n/***/ }),\n\n/***/ \"Y6LL\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_get_iterator__ = __webpack_require__(\"u6qr\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_get_iterator___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_get_iterator__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__static_wxJsComponent_js__ = __webpack_require__(\"uVNh\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__static_wxJsComponent_js___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1__static_wxJsComponent_js__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_mint_ui__ = __webpack_require__(\"gxss\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_mint_ui___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_mint_ui__);\n\n//\n//\n//\n//\n//\n//\n//\n\n\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n  name: 'PhotoPicker',\n  data: function data() {\n    return {\n      iosWeixin: false, // ios是否使用微信js sdk选取图片\n      isAndroid: navigator.userAgent.toLowerCase().indexOf('android') !== -1,\n      isIOS: navigator.userAgent.toLowerCase().indexOf('iphone os') !== -1,\n      isSafari: navigator.userAgent.toLowerCase().indexOf('safari') !== -1,\n      selectedPhotoNum: 0, // 已经选取的图片张数\n      maxPhotoNum: 9, // 最大图片张数限制 默认9张，参考微信的最大限制\n      photoList: []\n    };\n  },\n\n  methods: {\n    // 设置已经选择的图片张数\n    setCurrentPhotoNum: function setCurrentPhotoNum(num) {\n      if (num) {\n        this.selectedPhotoNum = num;\n      }\n    },\n    // 设置最大可选张数\n    setLimitPhotoNum: function setLimitPhotoNum(num) {\n      if (num) {\n        this.maxPhotoNum = num;\n      }\n    },\n    // 选取图片点击事件\n    pickPhoto: function pickPhoto() {\n      // 清空图片列表\n      this.photoList = [];\n      // android使用微信js接口选图片\n      if (this.isAndroid || this.iosWeixin) {\n        console.warn('pickPhoto1');\n        this.showWeixinPicker();\n      } else {\n        // 使用系统input选图片\n        console.warn('pickPhoto3');\n        document.getElementById('photo-picker-input').click();\n      }\n    },\n    // 加载图片信息\n    loadPhotoInfo: function loadPhotoInfo(localIdOrFile, isWeixinJs, callback) {\n      if (!isWeixinJs) {\n        if (this.isIOS || this.isSafari) {\n          __WEBPACK_IMPORTED_MODULE_1__static_wxJsComponent_js___default.a.loadAndCompressInputImageData(localIdOrFile, function (photoData, imageWidth, imageHeight) {\n            if (callback) {\n              console.warn('wxJsComponent.loadAndCompressInputImageData imageWidth:' + imageWidth + ', imageHeight:' + imageHeight);\n              callback({ 'isWeixinJs': false, 'fileName': localIdOrFile.name, 'localData': photoData, 'originWidth': imageWidth, 'originHeight': imageHeight });\n            }\n          });\n        } else {\n          __WEBPACK_IMPORTED_MODULE_1__static_wxJsComponent_js___default.a.loadAndCompressInputImageData(localIdOrFile, function (photoData, imageWidth, imageHeight) {\n            if (callback) {\n              console.warn('wxJsComponent.loadAndCompressInputImageData imageWidth:' + imageWidth + ', imageHeight:' + imageHeight);\n              callback({ 'isWeixinJs': false, 'fileName': localIdOrFile.name, 'localData': photoData, 'originWidth': imageWidth, 'originHeight': imageHeight });\n            }\n          });\n        }\n      } else {\n        if (this.isAndroid) {\n          __WEBPACK_IMPORTED_MODULE_1__static_wxJsComponent_js___default.a.loadImageWithUrl(localIdOrFile, function (sourceImage) {\n            if (callback) {\n              callback({ 'isWeixinJs': true, 'localId': localIdOrFile, 'originWidth': sourceImage.width, 'originHeight': sourceImage.height });\n            }\n          });\n        } else {\n          __WEBPACK_IMPORTED_MODULE_1__static_wxJsComponent_js___default.a.getImageBase64Data(localIdOrFile, function (photoData, imageWidth, imageHeight) {\n            if (callback) {\n              callback({ 'isWeixinJs': true, 'localId': localIdOrFile, 'localData': photoData, 'originWidth': imageWidth, 'originHeight': imageHeight });\n            }\n          });\n        }\n      }\n    },\n    // 加载图片信息\n    loadPhotoListInfo: function loadPhotoListInfo(photoUrlList, isWeixinJs, callback) {\n      if (photoUrlList && photoUrlList.length) {\n        var that = this;\n        var loadItem = photoUrlList[0];\n        this.loadPhotoInfo(loadItem, isWeixinJs, function (photoItem) {\n          that.photoList.push(photoItem);\n          if (photoUrlList.length > 1) {\n            that.loadPhotoListInfo(photoUrlList.slice(1), isWeixinJs, callback);\n          } else {\n            if (callback) {\n              callback(); // 全部加载完\n            }\n          }\n        });\n      } else {\n        if (callback) {\n          callback();\n        }\n      }\n    },\n    // 微信Js选图片\n    showWeixinPicker: function showWeixinPicker() {\n      console.log('onTapShowMore');\n      var that = this;\n      var avaiNum = this.maxPhotoNum - this.selectedPhotoNum;\n      __WEBPACK_IMPORTED_MODULE_1__static_wxJsComponent_js___default.a.pickPhoto(function (success, localIds) {\n        if (success) {\n          if (localIds && localIds.length) {\n            that.loadPhotoListInfo(localIds, true, function () {\n              that.$emit('onLoadLocalIds', that.photoList);\n              that.photoList = null;\n            });\n          }\n        } else {\n          Object(__WEBPACK_IMPORTED_MODULE_2_mint_ui__[\"Toast\"])({\n            message: '添加图片失败',\n            duration: 600\n          });\n        }\n      }, avaiNum);\n    },\n    // 系统input选取图片\n    onPickedPhotos: function onPickedPhotos(event) {\n      var files = event.currentTarget.files;\n      console.log('onPickedPhotos');\n      var that = this;\n      if (files && files.length) {\n        // 限制图片张数\n        if (files.length + this.selectedPhotoNum > this.maxPhotoNum) {\n          // alert('最多可以选取' + this.maxPhotoNum + '张图片')\n          Object(__WEBPACK_IMPORTED_MODULE_2_mint_ui__[\"Toast\"])({\n            message: '最多可以选取' + this.maxPhotoNum + '张图片',\n            duration: 600\n          });\n          return;\n        }\n        var photos = [];\n        var fileItem;\n        var _iteratorNormalCompletion = true;\n        var _didIteratorError = false;\n        var _iteratorError = undefined;\n\n        try {\n          for (var _iterator = __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_get_iterator___default()(files), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n            fileItem = _step.value;\n\n            photos.push(fileItem);\n          }\n        } catch (err) {\n          _didIteratorError = true;\n          _iteratorError = err;\n        } finally {\n          try {\n            if (!_iteratorNormalCompletion && _iterator.return) {\n              _iterator.return();\n            }\n          } finally {\n            if (_didIteratorError) {\n              throw _iteratorError;\n            }\n          }\n        }\n\n        this.loadPhotoListInfo(photos, false, function () {\n          that.$emit('onLoadLocalIds', that.photoList);\n        });\n      }\n    }\n  },\n  mounted: function mounted() {},\n  created: function created() {}\n});\n\n/***/ }),\n\n/***/ \"YaEn\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_vue__ = __webpack_require__(\"I+zW\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_vue_router__ = __webpack_require__(\"1eSk\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__components_Demo__ = __webpack_require__(\"26cW\");\n\n\n\n\n__WEBPACK_IMPORTED_MODULE_0_vue__[\"default\"].use(__WEBPACK_IMPORTED_MODULE_1_vue_router__[\"a\" /* default */]);\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (new __WEBPACK_IMPORTED_MODULE_1_vue_router__[\"a\" /* default */]({\n  routes: [{\n    path: '/',\n    name: 'Demo',\n    component: __WEBPACK_IMPORTED_MODULE_2__components_Demo__[\"a\" /* default */]\n  }]\n}));\n\n/***/ }),\n\n/***/ \"ffUS\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nvar render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('router-view')],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\n/* harmony default export */ __webpack_exports__[\"a\"] = (esExports);\n\n/***/ }),\n\n/***/ \"kouS\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__photoPicker_PhotoPicker_vue__ = __webpack_require__(\"H3lr\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_mint_ui__ = __webpack_require__(\"gxss\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_mint_ui___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_mint_ui__);\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n  name: 'Demo',\n  data: function data() {\n    return {\n      isWeixinJs: false, // 是否在调用微信Js\n      addMoreImg: __webpack_require__(\"2Y24\"),\n      imgs: [], // 界面展示的图片本地地址\n      imgData: [], // 需要上传图片的数据\n      // http://mmbiz.qpic.cn/mmbiz_jpg/52qI3slqMgEQ0sucicop1LAYAjTTc7GBecpTxGYn6jBXpw3P8xoh2O1AwsPrAgHzSqmgk8EQnjicAhm0OTJ2M9tA/0\n      qrImg: __webpack_require__(\"8mmz\")\n    };\n  },\n\n  components: {\n    'photo-picker': __WEBPACK_IMPORTED_MODULE_0__photoPicker_PhotoPicker_vue__[\"a\" /* default */]\n  },\n  methods: {\n    deleteImg: function deleteImg(index) {\n      var that = this;\n      Object(__WEBPACK_IMPORTED_MODULE_1_mint_ui__[\"MessageBox\"])({\n        title: '提示',\n        message: '是否删除图片',\n        showCancelButton: true\n      }).then(function (action) {\n        if (action === 'cancel') {\n          return;\n        }\n        that.imgs.splice(index, 1);\n        that.imgData.splice(index, 1);\n      }, function (error) {\n        console.log(error);\n      });\n    },\n    addImg: function addImg() {\n      console.log('addImg');\n      // 设置最多选10张图片\n      this.$refs.tyPhotoPicker.setLimitPhotoNum(10);\n      // 已经选择的图片张数\n      this.$refs.tyPhotoPicker.setCurrentPhotoNum(this.imgs.length);\n      this.$refs.tyPhotoPicker.pickPhoto();\n    },\n    onLoadLocalIds: function onLoadLocalIds(photos) {\n      // 图片选择完毕走这里\n      console.debug('onLoadLocalIds====');\n      console.debug(photos);\n      this.imgData = this.imgData.concat(photos);\n      this.isWeixinJs = photos[0].isWeixinJs;\n      if (this.isWeixinJs) {\n        // console.debug('使用微信SDK')\n        var localIds = [];\n        for (var j = 0; j < photos.length; j++) {\n          localIds.push(photos[j].localId);\n        }\n        this.imgs = this.imgs.concat(localIds); // 安卓是localId，iOS是base64\n        console.debug('this.imgs----');\n        console.debug(this.imgs);\n      } else {\n        // console.debug('不使用微信SDK')\n        var localDataList = [];\n        for (var i = 0; i < photos.length; i++) {\n          if (photos[i].localData) {\n            localDataList.push(photos[i].localData);\n          }\n        }\n        this.imgs = this.imgs.concat(localDataList); // 安卓是localId，iOS是base64\n        console.debug('this.imgs----');\n        console.debug(this.imgs);\n      }\n    }\n  }\n});\n\n/***/ }),\n\n/***/ \"uSV6\":\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ \"uVNh\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n// 微信js sdk鉴权组件\nvar wx = __webpack_require__(\"C/he\")\nvar tyService = __webpack_require__(\"8CGt\")\nvar EXIF = __webpack_require__(\"SWMY\")\nvar MegaPixImage = __webpack_require__(\"QEa4\")\n\nvar wxJsComponent = new function () {\n  // 记录配置成功的信息历史\n  this.configHistory = new Map()\n\n  // 获取访问接口授权\n  this.initConfig = function (configData, callback) {\n    console.warn('initConfig1' + JSON.stringify(configData))\n    if (configData.activeStatus) { // 返回值有效且为激活状态\n      console.warn('initConfig2')\n      var appid = configData.appId\n      var timestamp = configData.timestamp\n      var nonceStr = configData.nonceStr\n      var signature = configData.signature\n      wx.config({\n        debug: true, // 开启调试模式,调用的所有api的返回值会在客户端alert出来，若要查看传入的参数，可以在pc端打开，参数信息会通过log打出，仅在pc端时才会打印。\n        appId: appid, // 必填，企业号的唯一标识，此处填写企业号corpid\n        timestamp: timestamp, // 必填，生成签名的时间戳\n        nonceStr: nonceStr, // 必填，生成签名的随机串\n        signature: signature, // 必填，签名，见附录1\n        jsApiList: ['chooseImage', 'previewImage']\n        // jsApiList: ['checkJsApi'] // 必填，需要使用的JS接口列表，所有JS接口列表见附录2\n      })\n    }\n    var hasError = false\n    wx.error(function (res) {\n      hasError = true\n      console.warn('wx.error:' + JSON.stringify(res))\n      if (callback) {\n        // 如果报错，直接返回false\n        callback(false)\n        callback = null\n      }\n      // config信息验证失败会执行error函数，如签名过期导致验证失败，具体错误信息可以打开config的debug模式查看，也可以在返回的res参数中查看，对于SPA可以在这里更新签名。\n    })\n    wx.ready(function () {\n      console.warn('wx.ready hasError:' + hasError)\n      if (callback) {\n        callback(!hasError)\n      }\n    })\n  }\n\n  this.hasAuthorized = function (pageUrl) {\n    var currentTime = Math.round(new Date().getTime() / 1000)\n    if (navigator.userAgent.toLowerCase().indexOf('iphone os') !== -1) {\n      for (var pageKey in this.configHistory) {\n        if (this.configHistory[pageKey] && this.configHistory[pageKey].lastTime && this.configHistory[pageKey].success) {\n          // 如果这个页面已经获取过config\n          if ((currentTime - this.configHistory[pageKey].lastTime) < 60 * 60 * 1.5) {\n            // 距离上次获取config不超过1.5小时，直接调用接口\n            console.log('wxJSConfig ios has history:' + pageKey)\n            return true\n          } else {\n            this.configHistory.delete(pageKey)\n          }\n        }\n        break\n      }\n    } else {\n      // android\n      var pageConfig2 = this.configHistory.get(pageUrl)\n      if (pageConfig2 && pageConfig2.lastTime && pageConfig2.success) {\n        // 如果这个页面已经获取过config\n        if ((currentTime - pageConfig2.lastTime) < 60 * 60 * 1.5) {\n          // 距离上次获取config不超过1.5小时，直接调用接口\n          console.log('wxJSConfig android has history:' + pageUrl)\n          return true\n        } else {\n          this.configHistory.delete(pageUrl)\n        }\n      }\n    }\n    return false\n  }\n\n  // 访问微信jssdk鉴权\n  this.wxJSConfig = function (callback) {\n    var pageUrl = window.location.href.split('#')[0]\n    console.log('wxJSConfig window.location.href1:' + pageUrl)\n    if (this.hasAuthorized(pageUrl)) {\n      if (callback) {\n        callback(true)\n      }\n      return\n    }\n    var that = this\n    var signURL = pageUrl.replace(/&/g, '%26') // 给链接中所有的&uri编码 encodeURIComponent\n    var appid = 'wxcfd35355d34a1894'\n    var secret = 'c99b4935724d9b4f3c725a94d59a7640'\n    // 获取AccessToken(有效期7200秒，每日200次): 'https://api.weixin.qq.com/cgi-bin/token?grant_type=client_credential&appid=APPID&secret=APPSECRET'\n    // 用AccessToken获取tikcet(有效期7200秒)： 'https://api.weixin.qq.com/cgi-bin/ticket/getticket?access_token=ACCESS_TOKEN&type=jsapi'\n    // 用用AccessToken获取tikcet生成signature：\n    // noncestr=Wm3WZYTPz0wzccnW\n    // jsapi_ticket=sM4AOVdWfPE4DxkXGEs8VMCPGGVi4C3VM0P37wVUCFvkVAy_90u5h9nbSlYy3-Sl-HhTdfl2fzFy1AOcHKP7qg\n    // timestamp=1414587457\n    // url=http://mp.weixin.qq.com?params=value\n    // jsapi_ticket=sM4AOVdWfPE4DxkXGEs8VMCPGGVi4C3VM0P37wVUCFvkVAy_90u5h9nbSlYy3-Sl-HhTdfl2fzFy1AOcHKP7qg&noncestr=Wm3WZYTPz0wzccnW&timestamp=1414587457&url=http://mp.weixin.qq.com?params=value\n    // 进行sha1签名: 得到0f9de62fce790f9a083d5c99e95740ceb90c27ed\n    var accessToken = ''\n    tyService.getWXConfigAccessToken(appid, secret, function (isSuccess, result) {\n      if (isSuccess) {\n        accessToken = result\n        console.debug(result)\n      }\n    })\n    var ticket = ''\n    tyService.getWXConfigTicket(accessToken, function (isSuccess, result) {\n      if (isSuccess) {\n        console.debug(result)\n        ticket = result\n      }\n    })\n    var noncestr = 'Wm3WZYTPz0wzccnW'\n    var timestamp = new Date()\n    tyService.getWXConfigSignature(ticket, noncestr, timestamp, signURL, function (isSuccess, result) {\n      if (isSuccess) {\n        console.log('获取签名 success:' + JSON.stringify(result))\n        // 请求config\n        that.initConfig(result, function (success) {\n          console.log('initConfig 11:' + success)\n          if (success) {\n            // 签名成功，缓存获取配置记录\n            if (pageUrl) {\n              var pageConfig = {}\n              pageConfig.success = true\n              pageConfig.lastTime = Math.round(new Date().getTime() / 1000)\n              that.configHistory.set(pageUrl, pageConfig)\n            }\n          } else {\n            // 如果签名失败，删除记录\n            var pageConfig2 = that.configHistory.get(pageUrl)\n            if (pageConfig2 && pageUrl) {\n              that.configHistory.delete(pageUrl)\n            }\n          }\n          // 调用回调\n          if (callback) {\n            callback(success)\n          }\n        })\n      } else {\n        console.log('获取签名 fail:' + result)\n        if (callback) {\n          callback(false)\n        }\n      }\n    })\n  }\n\n  // 选择照片\n  this.pickPhoto = function (callback, count) {\n    if (!count || count > 9) {\n      count = 9\n    }\n    console.log('pickPhoto:' + count)\n    this.wxJSConfig(function (success) {\n      console.log('pickPhoto wxJSConfig2:' + success)\n      wx.chooseImage({\n        count: count, // 默认9\n        sizeType: ['original', 'compressed'], // 可以指定是原图还是压缩图，默认二者都有\n        sourceType: ['album', 'camera'], // 可以指定来源是相册还是相机，默认二者都有\n        success: function (res) {\n          if (callback) {\n            callback(true, res.localIds)\n          }\n        },\n        error: function () {\n          console.warn('####chooseImage error')\n        },\n        complete: function () {\n          console.warn('####chooseImage complete')\n        },\n        fail: function () {\n          console.warn('####chooseImage fail')\n        },\n        failed: function () {\n          console.warn('####chooseImage failed')\n        }\n      })\n    })\n  }\n\n  // 查看图片大图\n  this.previewImage = function (photoUrl, photoUrlList) {\n    photoUrlList = photoUrlList || [photoUrl]\n    wx.previewImage({\n      current: photoUrl, // 当前显示图片的http链接\n      urls: photoUrlList // 需要预览的图片http链接列表\n    })\n  }\n\n  // 读取本地图片数据\n  this.loadLocalPhotoData = function (localId, callback) {\n    this.wxJSConfig(function (success) {\n      if (success) {\n        wx.getLocalImgData({\n          localId: localId, // 图片的localID\n          success: function (res) {\n            var localData = res.localData // localData是图片的base64数据，可以用img标签显示\n            if (callback) {\n              callback(true, localData)\n            }\n          }\n        })\n      } else {\n        if (callback) {\n          callback(false)\n        }\n      }\n    })\n  }\n\n  // 读取本地图片数据\n  this.loadLocalPhotoListData = function (localIds, callback, dataList) {\n    if (localIds && localIds.length) {\n      dataList = dataList || []\n      var that = this\n      var loadItem = localIds[0]\n      this.loadLocalPhotoData(loadItem, function (success, data) {\n        var resItem = {}\n        resItem.localId = loadItem\n        resItem.data = data\n        dataList.push(resItem)\n        if (localIds.length > 1) {\n          if (callback) {\n            callback(false, resItem) // 转完一个走一次\n          }\n          that.loadLocalPhotoListData(localIds.slice(1), callback, dataList)\n        } else {\n          if (callback) {\n            callback(true, resItem) // 全部转换完\n          }\n        }\n      })\n    } else { // localId不存在\n      if (callback) {\n        callback(false)\n      }\n    }\n  }\n\n  // 获取input file的文件地址\n  this.getLocalFileURL = function (file) {\n    var url = null\n    if (window.createObjectURL !== undefined) { // basic\n      url = window.createObjectURL(file)\n    } else if (window.URL !== undefined) { // mozilla(firefox)兼容火狐\n      url = window.URL.createObjectURL(file)\n    } else if (window.webkitURL !== undefined) { // webkit or chrome\n      url = window.webkitURL.createObjectURL(file)\n    }\n    return url\n  }\n\n  // 读取图片base64数据，和图片宽高\n  this.loadImageWithUrl = function (url, callback) {\n    var sourceImage = new Image()\n    sourceImage.onload = function () {\n      if (callback) {\n        callback(sourceImage)\n      }\n      sourceImage = null\n    }\n    sourceImage.src = url\n  }\n\n  // 读取图片base64数据，和图片宽高\n  this.getImageBase64Data = function (url, callback) {\n    this.loadImageWithUrl(url, function (sourceImage) {\n      var imageWidth = sourceImage.width\n      var imageHeight = sourceImage.height\n      console.info('resizeImage width:' + imageWidth)\n      console.info('resizeImage height:' + imageHeight)\n      var canvas = document.createElement('canvas')\n      canvas.width = imageWidth\n      canvas.height = imageHeight\n\n      canvas.getContext('2d').drawImage(sourceImage, 0, 0, imageWidth, imageHeight)\n      var dataURL = canvas.toDataURL('image/jpeg')\n      if (callback) {\n        callback(dataURL, imageWidth, imageHeight)\n      }\n      canvas = null\n      dataURL = null\n    })\n  }\n  // 加载input选取的图片信息，压缩图片\n  this.loadAndCompressInputImageData = function (file, callback) {\n    console.warn('loadAndCompressInputImageData:' + file.name + ', size:' + file.size)\n    var orientation\n    var that = this\n    EXIF.getData(file, function () {\n      orientation = EXIF.getTag(file, 'Orientation')\n      console.warn('EXIF.getData orientation:' + orientation)\n    })\n    var reader = new FileReader()\n    reader.readAsDataURL(file)\n    reader.onload = function (e) {\n      var image = new Image()\n      image.src = e.target.result\n      image.onload = function () {\n        var expectWidth = this.naturalWidth\n        var expectHeight = this.naturalHeight\n        // 适当压缩图片，规范尺寸\n        if (this.naturalWidth > this.naturalHeight && this.naturalWidth > 800) {\n          expectWidth = 800\n          expectHeight = expectWidth * this.naturalHeight / this.naturalWidth\n        } else if (this.naturalHeight > this.naturalWidth && this.naturalHeight > 1200) {\n          expectHeight = 1200\n          expectWidth = expectHeight * this.naturalWidth / this.naturalHeight\n        }\n        var canvas = document.createElement('canvas')\n        var ctx = canvas.getContext('2d')\n        canvas.width = expectWidth\n        canvas.height = expectHeight\n        ctx.drawImage(this, 0, 0, expectWidth, expectHeight)\n        // 修复ios上传图片的时候 被旋转的问题\n        var base64 = null\n        if (orientation && orientation !== 1) {\n          var mpImg = new MegaPixImage(image)\n          mpImg.render(canvas, {\n            maxWidth: 800,\n            maxHeight: 1200,\n            quality: 0.8,\n            orientation: orientation\n          })\n        }\n        base64 = canvas.toDataURL('image/jpeg', 0.8)\n        var fileLength = parseInt(base64.length - (base64.length / 8) * 2)\n        if (fileLength / 1024000 > 1) { // 如果图片仍然大于1M，压缩图片\n          // 压缩图片\n          that.imgScale(base64, 4, callback)\n        } else {\n          if (callback) {\n            callback(base64, canvas.width, canvas.height)\n          }\n        }\n      }\n    }\n  }\n  // 压缩图片\n  this.imgScale = function (imgUrl, quality, callback) {\n    console.warn('imgScale')\n    var img = new Image()\n    var canvas = document.createElement('canvas')\n    var cxt = canvas.getContext('2d')\n    img.src = imgUrl\n    img.onload = function () {\n      // 缩放后图片的宽高\n      var width = img.naturalWidth / quality\n      var height = img.naturalHeight / quality\n      canvas.width = width\n      canvas.height = height\n      cxt.drawImage(this, 0, 0, width, height)\n      if (callback) {\n        callback(canvas.toDataURL('image/jpeg'), width, height)\n      }\n    }\n  }\n  // 选择图片方向\n  this.rotateImg = function (img, direction, canvas) { // 图片旋转\n    console.warn('rotateImg1:' + direction)\n    var minStep = 0\n    var maxStep = 3\n    if (img === null) return\n    var height = img.height\n    var width = img.width\n    var step = 2\n    if (step === null) {\n      step = minStep\n    }\n    if (direction === 'right') {\n      step++\n      step > maxStep && (step = minStep)\n    } else {\n      step--\n      step < minStep && (step = maxStep)\n    }\n    console.warn('rotateImg2')\n    var degree = step * 90 * Math.PI / 180\n    var ctx = canvas.getContext('2d')\n    console.warn('rotateImg3')\n    switch (step) {\n      case 0:\n        canvas.width = width\n        canvas.height = height\n        ctx.drawImage(img, 0, 0)\n        break\n      case 1:\n        canvas.width = height\n        canvas.height = width\n        ctx.rotate(degree)\n        ctx.drawImage(img, 0, -height)\n        break\n      case 2:\n        canvas.width = width\n        canvas.height = height\n        ctx.rotate(degree)\n        ctx.drawImage(img, -width, -height)\n        break\n      case 3:\n        canvas.width = height\n        canvas.height = width\n        ctx.rotate(degree)\n        ctx.drawImage(img, -width, 0)\n        break\n    }\n    console.warn('rotateImg6')\n  }\n}\n\nmodule.exports = wxJsComponent\n\n\n/***/ }),\n\n/***/ \"yrGq\":\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ })\n\n},[\"NHnr\"]);\n\n\n// WEBPACK FOOTER //\n// static/js/app.9afa018da2403e1e0033.js","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/.3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../node_modules/.13.5.0@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-fbfd6244\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../node_modules/.13.5.0@vue-loader/lib/selector?type=styles&index=0!./Demo.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/.13.5.0@vue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!babel-loader!../../node_modules/.13.5.0@vue-loader/lib/selector?type=script&index=0!./Demo.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/.13.5.0@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-fbfd6244\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":\\\"src\\\",\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/.13.5.0@vue-loader/lib/selector?type=template&index=0!./Demo.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-fbfd6244\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/Demo.vue\n// module id = 26cW\n// module chunks = 1","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAYAAADDPmHLAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMDY3IDc5LjE1Nzc0NywgMjAxNS8wMy8zMC0yMzo0MDo0MiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTUgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjhGNzFGQUMyQjdGMzExRTdCRjMwRDhEQTY4MDNBRTVDIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjhGNzFGQUMzQjdGMzExRTdCRjMwRDhEQTY4MDNBRTVDIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6OEY3MUZBQzBCN0YzMTFFN0JGMzBEOERBNjgwM0FFNUMiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6OEY3MUZBQzFCN0YzMTFFN0JGMzBEOERBNjgwM0FFNUMiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz60Iy/8AAABxElEQVR42uzcQU7CQBSA4WJYinILOYIHIBxAbsPe4+gBCGHNohcwXoIQ9zgmY0KItLGLaTvzfcnb0I1O/9Ti4k3quj5XFOvOEQgAASAABIAAEAACQAAIAAEgAASAABAAAkAACAABIAAEgAAQAAIYn88w6zCPcdbxs+JMC/ydP8I8hzlefPYeZh/mEObJEyBvm6ub/+sYr/kTkLldw7WtAPJ3arj2JQAEgAAQAAJAAAgAASAABIAAEAACQAAIAAEgAASAABAAAkAACAABIAAEgAAQAAJAAAiAggO43Mkz6Xna9P3zJd1ZlGJH0F87ebjtZ4FFsp1FKZ4AGze/kyQ7i1IEsHMvO9vmEACFvwQuHXNnqxwCeA0zdy//bR7PbvQBLOLb7EuYmfvaahbP6hDPbvRfA6v4VeZtIAfc9r+As3cABIAAEAACQAAIAAEgAASAABAAAkAACAABIAAEgAAQAAJAAAgAASAABIAAEAACQAAIAAH07qHh2r0A8te0s2glgPzd2lmUZCePAPp3vbMo6U6eoZlWZRrSziJPAASAABAAAkAACAABIAAEgAAQAAJAAAgAASAABIAAEAACQAAIgK6+BRgAAUMpKcJwzJgAAAAASUVORK5CYII=\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/photoPicker/icon_content_n_pc.png\n// module id = 2Y24\n// module chunks = 1","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"demo\"},[_c('div',{staticClass:\"title\"},[_vm._v(\"\\n    TYPhotoPicker1\\n  \")]),_vm._v(\" \"),_c('div',{staticClass:\"tip\"},[_vm._v(\"\\n    1. 能够在微信之外运行，但主要还是为了在微信页面内调用相册选择器而设计的 \"),_c('br'),_vm._v(\"\\n    2. 在微信中使用，由于iOS平台中的图片转码缓慢，所以弃用调用微信js，通过设置PhotoPicker.iosWeixin也能够调用微信JS \"),_c('br'),_vm._v(\"\\n    关注这个微信号：关注后才允许调用weixin-js-sdk \"),_c('br'),_vm._v(\" \"),_c('img',{attrs:{\"src\":_vm.qrImg,\"width\":\"200\",\"height\":\"200\",\"alt\":\"\"}}),_vm._v(\" \"),_c('br'),_vm._v(\"\\n    因为测试账号限制了只允许被100人关注, 当发现不能在微信中运行的时候请来到下面，自行申请测试账号， \"),_c('br'),_vm._v(\"\\n    申请微信测试公众号：https://mp.weixin.qq.com/debug/cgi-bin/sandbox?t=sandbox/login \"),_c('br'),_vm._v(\"\\n    申请账号之后填写测试域名（一个测试账号允许有一个域名调用weixin-js-sdk），并调整wxJsComponen中对appid、secret的赋值\\n  \")]),_vm._v(\" \"),_c('div',{staticClass:\"item\"},[_c('div',{staticClass:\"question\"},[_vm._v(\"\\n      请选择图片：\\n    \")]),_vm._v(\" \"),_c('div',{staticClass:\"display-flex-box flex-wrap\"},[_vm._l((_vm.imgs),function(item,index){return _c('div',{staticClass:\"img-box\"},[_c('img',{staticClass:\"img shrink-none\",attrs:{\"src\":item},on:{\"click\":function($event){_vm.deleteImg(index)}}})])}),_vm._v(\" \"),(_vm.imgs.length < 10)?_c('div',{staticClass:\"img-box background-none\"},[_c('img',{staticClass:\"img shrink-none\",attrs:{\"src\":_vm.addMoreImg},on:{\"click\":_vm.addImg}})]):_vm._e(),_vm._v(\" \"),_c('photo-picker',{ref:\"tyPhotoPicker\",attrs:{\"hidden\":\"true\"},on:{\"onLoadLocalIds\":_vm.onLoadLocalIds}})],2)])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/.13.5.0@vue-loader/lib/template-compiler?{\"id\":\"data-v-fbfd6244\",\"hasScoped\":true,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/.13.5.0@vue-loader/lib/selector.js?type=template&index=0!./src/components/Demo.vue\n// module id = 7Wvr\n// module chunks = 1","'use strict'\n\nvar $ = require('jquery')\n\nvar tyService = new function () {\n  var appId = ''\n  // 接口前半段\n  const baseUrl = 'https://api.weixin.qq.com'\n  // 获取AccessToken\n  const accessTokenUrl = '/cgi-bin/token'\n  // 获取jsapi_ticket\n  const jsapiTicketUrl = '/cgi-bin/ticket/getticket'\n  // 发送请求\n  this.commonRequest = function (requestType, isAsync, addtionalUrl, jsonData, callback) {\n    var url = baseUrl + addtionalUrl\n    console.log('commonRequest #url:' + url + '#isAsync:' + isAsync + '#jsonData:' + jsonData)\n    $.ajax({\n      type: requestType,\n      url: url,\n      async: isAsync,\n      data: jsonData,\n      dataType: 'JSON',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      success: function (result) {\n        console.log('commonRequest success url:' + url + ' 结果：' + JSON.stringify(result))\n        if (result && result.code === 100) {\n          if (callback) {\n            callback(true, result)\n          }\n        } else {\n          if (callback) {\n            callback(false, result)\n          }\n        }\n      },\n      error: function (XMLHttpRequest, textStatus, errorThrown) {\n        console.log('commonRequest error url:' + url + ' 失败：' + XMLHttpRequest.status)\n        if (callback) {\n          callback(false)\n        }\n      }\n    })\n  }\n  // 获取微信AccessToken（实际开发中，应该由后台获取AccessToken）\n  this.getWXConfigAccessToken = function (appid, secret, callback) {\n    appId = appid\n    console.warn('getWXConfigAccessToken')\n    this.commonRequest('GET', false, (accessTokenUrl + '?grant_type=client_credential' + '&appid=' + appid + '&secret=' + secret), '', function (success, result) {\n      if (success) {\n        if (callback) {\n          callback(true, result.data)\n        }\n      } else {\n        if (callback) {\n          callback(false)\n        }\n      }\n    })\n  }\n\n  // 获取微信jsapi_ticket（实际开发中，应该由后台获取jsapi_ticket）\n  this.getWXConfigTicket = function (accessToken, callback) {\n    console.warn('getWXConfigTicket')\n    this.commonRequest('GET', false, (jsapiTicketUrl + '?type=jsapi' + '&access_token=' + accessToken), '', function (success, result) {\n      if (success) {\n        if (callback) {\n          callback(true, result.data)\n        }\n      } else {\n        if (callback) {\n          callback(false)\n        }\n      }\n    })\n  }\n\n  // 获取微信config签名（实际开发中，应该由后台实现生成签名的逻辑）\n  this.getWXConfigSignature = function (ticket, noncestr, timestamp, pageUrl, callback) {\n    console.warn('getWXConfigSignature:' + pageUrl)\n    var str = 'jsapi_ticket=' + ticket + '&noncestr=' + noncestr + '&timestamp=' + timestamp + '&url=' + pageUrl\n    var sha1 = this.sha1(str)\n    if (sha1) {\n      var response = {\n        'activeStatus': true,\n        'appId': appId,\n        'timestamp': timestamp,\n        'nonceStr': noncestr,\n        'signature': sha1\n      }\n      callback(true, response)\n    } else {\n      callback(false)\n    }\n  }\n\n  // SHA-1算法（实际开发中，应该由后台实现SHA-1算法）\n  this.sha1 = function (str) {\n    hexSha1(str)\n\n    var hexcase = 0  /* hex output format. 0 - lowercase 1 - uppercase */\n    function hexSha1 (s) {\n      return binb2hex(coreSha1(alignSHA1(s)))\n    }\n\n    /*\n     *\n     * Calculate the SHA-1 of an array of big-endian words, and a bit length\n     *\n     */\n    function coreSha1 (blockArray) {\n      var x = blockArray // append padding\n      var w = Array(80)\n      var a = 1732584193\n      var b = -271733879\n      var c = -1732584194\n      var d = 271733878\n      var e = -1009589776\n      for (var i = 0; i < x.length; i += 16) { // 每次处理512位 16*32\n        var olda = a\n        var oldb = b\n        var oldc = c\n        var oldd = d\n        var olde = e\n        for (var j = 0; j < 80; j++) { // 对每个512位进行80步操作\n          if (j < 16) {\n            w[j] = x[i + j]\n          } else {\n            w[j] = rol(w[j - 3] ^ w[j - 8] ^ w[j - 14] ^ w[j - 16], 1)\n          }\n          var t = safeAdd(safeAdd(rol(a, 5), sha1Ft(j, b, c, d)), safeAdd(safeAdd(e, w[j]), sha1Kt(j)))\n          e = d\n          d = c\n          c = rol(b, 30)\n          b = a\n          a = t\n        }\n        a = safeAdd(a, olda)\n        b = safeAdd(b, oldb)\n        c = safeAdd(c, oldc)\n        d = safeAdd(d, oldd)\n        e = safeAdd(e, olde)\n      }\n      return [a, b, c, d, e]\n    }\n\n    /*\n     *\n     * 返回对应F函数的值\n     *\n     */\n    function sha1Ft (t, b, c, d) {\n      if (t < 20) {\n        return (b & c) | ((~b) & d)\n      }\n      if (t < 40) {\n        return b ^ c ^ d\n      }\n      if (t < 60) {\n        return (b & c) | (b & d) | (c & d)\n      }\n      return b ^ c ^ d // t<80\n    }\n\n    /*\n     * 返回对应的Kt值\n     *\n     */\n    function sha1Kt (t) {\n      return (t < 20) ? 1518500249 : (t < 40) ? 1859775393 : (t < 60) ? -1894007588 : -899497514\n    }\n\n    /*\n     *\n     * 将32位数拆成高16位和低16位分别进行相加，从而实现 MOD 2^32 的加法\n     *\n     */\n    function safeAdd (x, y) {\n      var lsw = (x & 0xFFFF) + (y & 0xFFFF)\n      var msw = (x >> 16) + (y >> 16) + (lsw >> 16)\n      return (msw << 16) | (lsw & 0xFFFF)\n    }\n\n    /*\n     *\n     * 32位二进制数循环左移\n     *\n     */\n    function rol (num, cnt) {\n      return (num << cnt) | (num >>> (32 - cnt))\n    }\n\n    /*\n     *\n     * The standard SHA1 needs the input string to fit into a block\n     * This function align the input string to meet the requirement\n     *\n     */\n    function alignSHA1 (str) {\n      var nblk = ((str.length + 8) >> 6) + 1\n      var blks = new Array(nblk * 16)\n      for (var i = 0; i < nblk * 16; i++) {\n        blks[i] = 0\n      }\n      for (i = 0; i < str.length; i++) {\n        blks[i >> 2] |= str.charCodeAt(i) << (24 - (i & 3) * 8)\n      }\n      blks[i >> 2] |= 0x80 << (24 - (i & 3) * 8)\n      blks[nblk * 16 - 1] = str.length * 8\n      return blks\n    }\n\n    /*\n     *\n     * Convert an array of big-endian words to a hex string.\n     *\n     */\n    function binb2hex (binarray) {\n      var hexTab = hexcase ? '0123456789ABCDEF' : '0123456789abcdef'\n      var str = ''\n      for (var i = 0; i < binarray.length * 4; i++) {\n        str += hexTab.charAt((binarray[i >> 2] >> ((3 - i % 4) * 8 + 4)) & 0xF) + hexTab.charAt((binarray[i >> 2] >> ((3 - i % 4) * 8)) & 0xF)\n      }\n      return str\n    }\n  }\n}\n\nmodule.exports = {\n  tyService: tyService,\n  $: $\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./static/tyService.js\n// module id = 8CGt\n// module chunks = 1","module.exports = __webpack_public_path__ + \"static/img/测试公众号二维码.f327aa5.jpg\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/assets/测试公众号二维码.jpg\n// module id = 8mmz\n// module chunks = 1","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/.3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../../node_modules/.13.5.0@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-f1bef6a4\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../node_modules/.13.5.0@vue-loader/lib/selector?type=styles&index=0!./PhotoPicker.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/.13.5.0@vue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/.13.5.0@vue-loader/lib/selector?type=script&index=0!./PhotoPicker.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/.13.5.0@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-f1bef6a4\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":\\\"src\\\",\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/.13.5.0@vue-loader/lib/selector?type=template&index=0!./PhotoPicker.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-f1bef6a4\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/photoPicker/PhotoPicker.vue\n// module id = H3lr\n// module chunks = 1","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"photo-picker-container\"},[_c('input',{attrs:{\"id\":\"photo-picker-input\",\"hidden\":\"true\",\"name\":\"file\",\"type\":\"file\",\"accept\":\"image/*\"},on:{\"change\":function($event){_vm.onPickedPhotos($event)}}})])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/.13.5.0@vue-loader/lib/template-compiler?{\"id\":\"data-v-f1bef6a4\",\"hasScoped\":true,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/.13.5.0@vue-loader/lib/selector.js?type=template&index=0!./src/components/photoPicker/PhotoPicker.vue\n// module id = I0PP\n// module chunks = 1","function injectStyle (ssrContext) {\n  require(\"!!../node_modules/.3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../node_modules/.13.5.0@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-f715737c\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../node_modules/.13.5.0@vue-loader/lib/selector?type=styles&index=0!./App.vue\")\n}\nvar normalizeComponent = require(\"!../node_modules/.13.5.0@vue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!babel-loader!../node_modules/.13.5.0@vue-loader/lib/selector?type=script&index=0!./App.vue\"\n/* template */\nimport __vue_template__ from \"!!../node_modules/.13.5.0@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-f715737c\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":\\\"src\\\",\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../node_modules/.13.5.0@vue-loader/lib/selector?type=template&index=0!./App.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/App.vue\n// module id = M93x\n// module chunks = 1","import Vue from 'vue'\nimport App from './App'\nimport router from './router'\nimport MintUI from 'mint-ui'\nimport 'mint-ui/lib/style.css'\n\nVue.config.productionTip = false\n\nVue.use(MintUI)\n\n/* eslint-disable no-new */\nnew Vue({\n  el: '#app',\n  router,\n  render: h => h(App)\n})\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.js","/**\n * Mega pixel image rendering library for iOS6 Safari\n *\n * Fixes iOS6 Safari's image file rendering issue for large size image (over mega-pixel),\n * which causes unexpected subsampling when drawing it in canvas.\n * By using this library, you can safely render the image with proper stretching.\n *\n * Copyright (c) 2012 Shinichi Tomita <shinichi.tomita@gmail.com>\n * Released under the MIT license\n */\n 'use strict'\n// (function() {\n\n\t/**\n\t * Detect subsampling in loaded image.\n\t * In iOS, larger images than 2M pixels may be subsampled in rendering.\n\t */\n\tfunction detectSubsampling(img) {\n\t\tvar iw = img.naturalWidth,\n\t\t\tih = img.naturalHeight;\n\t\tif (iw * ih > 1024 * 1024) { // subsampling may happen over megapixel image\n\t\t\tvar canvas = document.createElement('canvas');\n\t\t\tcanvas.width = canvas.height = 1;\n\t\t\tvar ctx = canvas.getContext('2d');\n\t\t\tctx.drawImage(img, -iw + 1, 0);\n\t\t\t// subsampled image becomes half smaller in rendering size.\n\t\t\t// check alpha channel value to confirm image is covering edge pixel or not.\n\t\t\t// if alpha value is 0 image is not covering, hence subsampled.\n\t\t\treturn ctx.getImageData(0, 0, 1, 1).data[3] === 0;\n\t\t} else {\n\t\t\treturn false;\n\t\t}\n\t}\n\n\t/**\n\t * Detecting vertical squash in loaded image.\n\t * Fixes a bug which squash image vertically while drawing into canvas for some images.\n\t */\n\tfunction detectVerticalSquash(img, iw, ih) {\n\t\tvar canvas = document.createElement('canvas');\n\t\tcanvas.width = 1;\n\t\tcanvas.height = ih;\n\t\tvar ctx = canvas.getContext('2d');\n\t\tctx.drawImage(img, 0, 0);\n\t\tvar data = ctx.getImageData(0, 0, 1, ih).data;\n\t\t// search image edge pixel position in case it is squashed vertically.\n\t\tvar sy = 0;\n\t\tvar ey = ih;\n\t\tvar py = ih;\n\t\twhile (py > sy) {\n\t\t\tvar alpha = data[(py - 1) * 4 + 3];\n\t\t\tif (alpha === 0) {\n\t\t\t\tey = py;\n\t\t\t} else {\n\t\t\t\tsy = py;\n\t\t\t}\n\t\t\tpy = (ey + sy) >> 1;\n\t\t}\n\t\tvar ratio = (py / ih);\n\t\treturn (ratio === 0) ? 1 : ratio;\n\t}\n\n\t/**\n\t * Rendering image element (with resizing) and get its data URL\n\t */\n\tfunction renderImageToDataURL(img, options, doSquash) {\n\t\tvar canvas = document.createElement('canvas');\n\t\trenderImageToCanvas(img, canvas, options, doSquash);\n\t\treturn canvas.toDataURL(\"image/jpeg\", options.quality || 0.8);\n\t}\n\n\t/**\n\t * Rendering image element (with resizing) into the canvas element\n\t */\n\tfunction renderImageToCanvas(img, canvas, options, doSquash) {\n\t\tvar iw = img.naturalWidth,\n\t\t\tih = img.naturalHeight;\n\t\tvar width = options.width,\n\t\t\theight = options.height;\n\t\tvar ctx = canvas.getContext('2d');\n\t\tctx.save();\n\t\ttransformCoordinate(canvas, ctx, width, height, options.orientation);\n\t\tvar subsampled = detectSubsampling(img);\n\t\tif (subsampled) {\n\t\t\tiw /= 2;\n\t\t\tih /= 2;\n\t\t}\n\t\tvar d = 1024; // size of tiling canvas\n\t\tvar tmpCanvas = document.createElement('canvas');\n\t\ttmpCanvas.width = tmpCanvas.height = d;\n\t\tvar tmpCtx = tmpCanvas.getContext('2d');\n\t\tvar vertSquashRatio = doSquash ? detectVerticalSquash(img, iw, ih) : 1;\n\t\tvar dw = Math.ceil(d * width / iw);\n\t\tvar dh = Math.ceil(d * height / ih / vertSquashRatio);\n\t\tvar sy = 0;\n\t\tvar dy = 0;\n\t\twhile (sy < ih) {\n\t\t\tvar sx = 0;\n\t\t\tvar dx = 0;\n\t\t\twhile (sx < iw) {\n\t\t\t\ttmpCtx.clearRect(0, 0, d, d);\n\t\t\t\ttmpCtx.drawImage(img, -sx, -sy);\n\t\t\t\tctx.drawImage(tmpCanvas, 0, 0, d, d, dx, dy, dw, dh);\n\t\t\t\tsx += d;\n\t\t\t\tdx += dw;\n\t\t\t}\n\t\t\tsy += d;\n\t\t\tdy += dh;\n\t\t}\n\t\tctx.restore();\n\t\ttmpCanvas = tmpCtx = null;\n\t}\n\n\t/**\n\t * Transform canvas coordination according to specified frame size and orientation\n\t * Orientation value is from EXIF tag\n\t */\n\tfunction transformCoordinate(canvas, ctx, width, height, orientation) {\n\t\tswitch (orientation) {\n\t\t\tcase 5:\n\t\t\tcase 6:\n\t\t\tcase 7:\n\t\t\tcase 8:\n\t\t\t\tcanvas.width = height;\n\t\t\t\tcanvas.height = width;\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tcanvas.width = width;\n\t\t\t\tcanvas.height = height;\n\t\t}\n\t\tswitch (orientation) {\n\t\t\tcase 2:\n\t\t\t\t// horizontal flip\n\t\t\t\tctx.translate(width, 0);\n\t\t\t\tctx.scale(-1, 1);\n\t\t\t\tbreak;\n\t\t\tcase 3:\n\t\t\t\t// 180 rotate left\n\t\t\t\tctx.translate(width, height);\n\t\t\t\tctx.rotate(Math.PI);\n\t\t\t\tbreak;\n\t\t\tcase 4:\n\t\t\t\t// vertical flip\n\t\t\t\tctx.translate(0, height);\n\t\t\t\tctx.scale(1, -1);\n\t\t\t\tbreak;\n\t\t\tcase 5:\n\t\t\t\t// vertical flip + 90 rotate right\n\t\t\t\tctx.rotate(0.5 * Math.PI);\n\t\t\t\tctx.scale(1, -1);\n\t\t\t\tbreak;\n\t\t\tcase 6:\n\t\t\t\t// 90 rotate right\n\t\t\t\tctx.rotate(0.5 * Math.PI);\n\t\t\t\tctx.translate(0, -height);\n\t\t\t\tbreak;\n\t\t\tcase 7:\n\t\t\t\t// horizontal flip + 90 rotate right\n\t\t\t\tctx.rotate(0.5 * Math.PI);\n\t\t\t\tctx.translate(width, -height);\n\t\t\t\tctx.scale(-1, 1);\n\t\t\t\tbreak;\n\t\t\tcase 8:\n\t\t\t\t// 90 rotate left\n\t\t\t\tctx.rotate(-0.5 * Math.PI);\n\t\t\t\tctx.translate(-width, 0);\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\n\t/**\n\t * MegaPixImage class\n\t */\n\tfunction MegaPixImage(srcImage) {\n\t\tif (window.Blob && srcImage instanceof Blob) {\n\t\t\tvar img = new Image();\n\t\t\tvar URL = window.URL && window.URL.createObjectURL ? window.URL :\n\t\t\t\twindow.webkitURL && window.webkitURL.createObjectURL ? window.webkitURL :\n\t\t\t\tnull;\n\t\t\tif (!URL) {\n\t\t\t\tthrow Error(\"No createObjectURL function found to create blob url\");\n\t\t\t}\n\t\t\timg.src = URL.createObjectURL(srcImage);\n\t\t\tthis.blob = srcImage;\n\t\t\tsrcImage = img;\n\t\t}\n\t\tif (!srcImage.naturalWidth && !srcImage.naturalHeight) {\n\t\t\tvar _this = this;\n\t\t\tsrcImage.onload = function() {\n\t\t\t\tvar listeners = _this.imageLoadListeners;\n\t\t\t\tif (listeners) {\n\t\t\t\t\t_this.imageLoadListeners = null;\n\t\t\t\t\tfor (var i = 0, len = listeners.length; i < len; i++) {\n\t\t\t\t\t\tlisteners[i]();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\t\tthis.imageLoadListeners = [];\n\t\t}\n\t\tthis.srcImage = srcImage;\n\t}\n\n\t/**\n\t * Rendering megapix image into specified target element\n\t */\n\tMegaPixImage.prototype.render = function(target, options) {\n\t\tif (this.imageLoadListeners) {\n\t\t\tvar _this = this;\n\t\t\tthis.imageLoadListeners.push(function() {\n\t\t\t\t_this.render(target, options)\n\t\t\t});\n\t\t\treturn;\n\t\t}\n\t\toptions = options || {};\n\t\tvar imgWidth = this.srcImage.naturalWidth,\n\t\t\timgHeight = this.srcImage.naturalHeight,\n\t\t\twidth = options.width,\n\t\t\theight = options.height,\n\t\t\tmaxWidth = options.maxWidth,\n\t\t\tmaxHeight = options.maxHeight,\n\t\t\tdoSquash = !this.blob || this.blob.type === 'image / jpeg';\n\t\tif (width && !height) {\n\t\t\theight = (imgHeight * width / imgWidth) << 0;\n\t\t} else if (height && !width) {\n\t\t\twidth = (imgWidth * height / imgHeight) << 0;\n\t\t} else {\n\t\t\twidth = imgWidth;\n\t\t\theight = imgHeight;\n\t\t}\n\t\tif (maxWidth && width > maxWidth) {\n\t\t\twidth = maxWidth;\n\t\t\theight = (imgHeight * width / imgWidth) << 0;\n\t\t}\n\t\tif (maxHeight && height > maxHeight) {\n\t\t\theight = maxHeight;\n\t\t\twidth = (imgWidth * height / imgHeight) << 0;\n\t\t}\n\t\tvar opt = {\n\t\t\twidth: width,\n\t\t\theight: height\n\t\t};\n\t\tfor (var k in options) opt[k] = options[k];\n\n\t\tvar tagName = target.tagName.toLowerCase();\n\t\tif (tagName === 'img') {\n\t\t\ttarget.src = renderImageToDataURL(this.srcImage, opt, doSquash);\n\t\t} else if (tagName === 'canvas') {\n\t\t\trenderImageToCanvas(this.srcImage, target, opt, doSquash);\n\t\t}\n\t\tif (typeof this.onrender === ' function') {\n\t\t\tthis.onrender(target);\n\t\t}\n\t};\n\n\t/**\n\t * Export class to global\n\t */\n// \tif (typeof define === ' function' && define.amd) {\n// \t\tdefine([], function() {\n// \t\t\treturn MegaPixImage;\n// \t\t}); // for AMD loader\n// \t} else {\n// \t\tthis.MegaPixImage = MegaPixImage;\n// \t}\n// })();\n\nmodule.exports = MegaPixImage;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./static/megapic-image.js\n// module id = QEa4\n// module chunks = 1","<template>\n  <div id=\"app\">\n    <router-view/>\n  </div>\n</template>\n\n<script>\nimport eruda from 'eruda'\n\nexport default {\n  name: 'app',\n  created: function () {\n    // 日志查看\n    var el = document.createElement('div')\n    document.body.appendChild(el)\n    eruda.init({\n      container: el,\n      tool: ['console', 'elements']\n    })\n  }\n}\n</script>\n\n<style>\n#app {\n  font-family: 'Avenir', Helvetica, Arial, sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  text-align: center;\n  color: #2c3e50;\n  margin-top: 60px;\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/App.vue","<!-- 图片选择控件 -->\n<template>\n  <div class=\"photo-picker-container\">\n    <input id=\"photo-picker-input\" hidden=\"true\" name=\"file\" type=\"file\" v-on:change=\"onPickedPhotos($event)\" accept=\"image/*\">\n  </div>\n</template>\n\n<script>\nimport wxJsComponent from '../../../static/wxJsComponent.js'\nimport {Toast} from 'mint-ui'\n\nexport default {\n  name: 'PhotoPicker',\n  data () {\n    return {\n      iosWeixin: false, // ios是否使用微信js sdk选取图片\n      isAndroid: navigator.userAgent.toLowerCase().indexOf('android') !== -1,\n      isIOS: navigator.userAgent.toLowerCase().indexOf('iphone os') !== -1,\n      isSafari: navigator.userAgent.toLowerCase().indexOf('safari') !== -1,\n      selectedPhotoNum: 0, // 已经选取的图片张数\n      maxPhotoNum: 9, // 最大图片张数限制 默认9张，参考微信的最大限制\n      photoList: []\n    }\n  },\n  methods: {\n    // 设置已经选择的图片张数\n    setCurrentPhotoNum: function (num) {\n      if (num) {\n        this.selectedPhotoNum = num\n      }\n    },\n    // 设置最大可选张数\n    setLimitPhotoNum: function (num) {\n      if (num) {\n        this.maxPhotoNum = num\n      }\n    },\n    // 选取图片点击事件\n    pickPhoto: function () {\n      // 清空图片列表\n      this.photoList = []\n      // android使用微信js接口选图片\n      if (this.isAndroid || this.iosWeixin) {\n        console.warn('pickPhoto1')\n        this.showWeixinPicker()\n      } else {\n        // 使用系统input选图片\n        console.warn('pickPhoto3')\n        document.getElementById('photo-picker-input').click()\n      }\n    },\n    // 加载图片信息\n    loadPhotoInfo: function (localIdOrFile, isWeixinJs, callback) {\n      if (!isWeixinJs) {\n        if (this.isIOS || this.isSafari) {\n          wxJsComponent.loadAndCompressInputImageData(localIdOrFile, function (photoData, imageWidth, imageHeight) {\n            if (callback) {\n              console.warn('wxJsComponent.loadAndCompressInputImageData imageWidth:' + imageWidth + ', imageHeight:' + imageHeight)\n              callback({'isWeixinJs': false, 'fileName': localIdOrFile.name, 'localData': photoData, 'originWidth': imageWidth, 'originHeight': imageHeight})\n            }\n          })\n        } else {\n          wxJsComponent.loadAndCompressInputImageData(localIdOrFile, function (photoData, imageWidth, imageHeight) {\n            if (callback) {\n              console.warn('wxJsComponent.loadAndCompressInputImageData imageWidth:' + imageWidth + ', imageHeight:' + imageHeight)\n              callback({'isWeixinJs': false, 'fileName': localIdOrFile.name, 'localData': photoData, 'originWidth': imageWidth, 'originHeight': imageHeight})\n            }\n          })\n        }\n      } else {\n        if (this.isAndroid) {\n          wxJsComponent.loadImageWithUrl(localIdOrFile, function (sourceImage) {\n            if (callback) {\n              callback({'isWeixinJs': true, 'localId': localIdOrFile, 'originWidth': sourceImage.width, 'originHeight': sourceImage.height})\n            }\n          })\n        } else {\n          wxJsComponent.getImageBase64Data(localIdOrFile, function (photoData, imageWidth, imageHeight) {\n            if (callback) {\n              callback({'isWeixinJs': true, 'localId': localIdOrFile, 'localData': photoData, 'originWidth': imageWidth, 'originHeight': imageHeight})\n            }\n          })\n        }\n      }\n    },\n    // 加载图片信息\n    loadPhotoListInfo: function (photoUrlList, isWeixinJs, callback) {\n      if (photoUrlList && photoUrlList.length) {\n        var that = this\n        var loadItem = photoUrlList[0]\n        this.loadPhotoInfo(loadItem, isWeixinJs, function (photoItem) {\n          that.photoList.push(photoItem)\n          if (photoUrlList.length > 1) {\n            that.loadPhotoListInfo(photoUrlList.slice(1), isWeixinJs, callback)\n          } else {\n            if (callback) {\n              callback() // 全部加载完\n            }\n          }\n        })\n      } else {\n        if (callback) {\n          callback()\n        }\n      }\n    },\n    // 微信Js选图片\n    showWeixinPicker: function () {\n      console.log('onTapShowMore')\n      var that = this\n      var avaiNum = this.maxPhotoNum - this.selectedPhotoNum\n      wxJsComponent.pickPhoto(function (success, localIds) {\n        if (success) {\n          if (localIds && localIds.length) {\n            that.loadPhotoListInfo(localIds, true, function () {\n              that.$emit('onLoadLocalIds', that.photoList)\n              that.photoList = null\n            })\n          }\n        } else {\n          Toast({\n            message: '添加图片失败',\n            duration: 600\n          })\n        }\n      }, avaiNum)\n    },\n    // 系统input选取图片\n    onPickedPhotos: function (event) {\n      var files = event.currentTarget.files\n      console.log('onPickedPhotos')\n      var that = this\n      if (files && files.length) {\n        // 限制图片张数\n        if (files.length + this.selectedPhotoNum > this.maxPhotoNum) {\n          // alert('最多可以选取' + this.maxPhotoNum + '张图片')\n          Toast({\n            message: '最多可以选取' + this.maxPhotoNum + '张图片',\n            duration: 600\n          })\n          return\n        }\n        var photos = []\n        var fileItem\n        for (fileItem of files) {\n          photos.push(fileItem)\n        }\n        this.loadPhotoListInfo(photos, false, function () {\n          that.$emit('onLoadLocalIds', that.photoList)\n        })\n      }\n    }\n  },\n  mounted: function () {\n  },\n  created: function () {\n  }\n}\n</script>\n\n<style scoped>\n.photo-picker-container {\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/photoPicker/PhotoPicker.vue","import Vue from 'vue'\nimport Router from 'vue-router'\nimport Demo from '@/components/Demo'\n\nVue.use(Router)\n\nexport default new Router({\n  routes: [\n    {\n      path: '/',\n      name: 'Demo',\n      component: Demo\n    }\n  ]\n})\n\n\n\n// WEBPACK FOOTER //\n// ./src/router/index.js","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('router-view')],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/.13.5.0@vue-loader/lib/template-compiler?{\"id\":\"data-v-f715737c\",\"hasScoped\":false,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/.13.5.0@vue-loader/lib/selector.js?type=template&index=0!./src/App.vue\n// module id = ffUS\n// module chunks = 1","<template>\n  <div class=\"demo\">\n    <div class=\"title\">\n      TYPhotoPicker1\n    </div>\n    <div class=\"tip\">\n      1. 能够在微信之外运行，但主要还是为了在微信页面内调用相册选择器而设计的 <br>\n      2. 在微信中使用，由于iOS平台中的图片转码缓慢，所以弃用调用微信js，通过设置PhotoPicker.iosWeixin也能够调用微信JS <br>\n      关注这个微信号：关注后才允许调用weixin-js-sdk <br>\n      <img :src=\"qrImg\" width=\"200\" height=\"200\" alt=\"\"> <br>\n      因为测试账号限制了只允许被100人关注, 当发现不能在微信中运行的时候请来到下面，自行申请测试账号， <br>\n      申请微信测试公众号：https://mp.weixin.qq.com/debug/cgi-bin/sandbox?t=sandbox/login <br>\n      申请账号之后填写测试域名（一个测试账号允许有一个域名调用weixin-js-sdk），并调整wxJsComponen中对appid、secret的赋值\n    </div>\n    <div class=\"item\">\n      <div class=\"question\">\n        请选择图片：\n      </div>\n      <div class=\"display-flex-box flex-wrap\">\n        <div v-for=\"(item, index) in imgs\" class=\"img-box\">\n          <img :src=\"item\" class=\"img shrink-none\" @click=\"deleteImg(index)\">\n        </div>\n        <div v-if=\"imgs.length < 10\" class=\"img-box background-none\">\n          <img :src=\"addMoreImg\" class=\"img shrink-none\" @click=\"addImg\">\n        </div>\n        <photo-picker ref=\"tyPhotoPicker\" hidden=\"true\" @onLoadLocalIds=\"onLoadLocalIds\"></photo-picker>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport PhotoPicker from './photoPicker/PhotoPicker.vue'\nimport { MessageBox } from 'mint-ui'\n\nexport default {\n  name: 'Demo',\n  data () {\n    return {\n      isWeixinJs: false, // 是否在调用微信Js\n      addMoreImg: require('./photoPicker/icon_content_n_pc.png'),\n      imgs: [], // 界面展示的图片本地地址\n      imgData: [], // 需要上传图片的数据\n      // http://mmbiz.qpic.cn/mmbiz_jpg/52qI3slqMgEQ0sucicop1LAYAjTTc7GBecpTxGYn6jBXpw3P8xoh2O1AwsPrAgHzSqmgk8EQnjicAhm0OTJ2M9tA/0\n      qrImg: require('../assets/测试公众号二维码.jpg')\n    }\n  },\n  components: {\n    'photo-picker': PhotoPicker\n  },\n  methods: {\n    deleteImg: function (index) {\n      var that = this\n      MessageBox({\n        title: '提示',\n        message: '是否删除图片',\n        showCancelButton: true\n      }).then(action => {\n        if (action === 'cancel') {\n          return\n        }\n        that.imgs.splice(index, 1)\n        that.imgData.splice(index, 1)\n      }, function (error) {\n        console.log(error)\n      })\n    },\n    addImg: function () {\n      console.log('addImg')\n      // 设置最多选10张图片\n      this.$refs.tyPhotoPicker.setLimitPhotoNum(10)\n      // 已经选择的图片张数\n      this.$refs.tyPhotoPicker.setCurrentPhotoNum(this.imgs.length)\n      this.$refs.tyPhotoPicker.pickPhoto()\n    },\n    onLoadLocalIds: function (photos) { // 图片选择完毕走这里\n      console.debug('onLoadLocalIds====')\n      console.debug(photos)\n      this.imgData = this.imgData.concat(photos)\n      this.isWeixinJs = photos[0].isWeixinJs\n      if (this.isWeixinJs) {\n        // console.debug('使用微信SDK')\n        var localIds = []\n        for (var j = 0; j < photos.length; j++) {\n          localIds.push(photos[j].localId)\n        }\n        this.imgs = this.imgs.concat(localIds) // 安卓是localId，iOS是base64\n        console.debug('this.imgs----')\n        console.debug(this.imgs)\n      } else {\n        // console.debug('不使用微信SDK')\n        var localDataList = []\n        for (var i = 0; i < photos.length; i++) {\n          if (photos[i].localData) {\n            localDataList.push(photos[i].localData)\n          }\n        }\n        this.imgs = this.imgs.concat(localDataList) // 安卓是localId，iOS是base64\n        console.debug('this.imgs----')\n        console.debug(this.imgs)\n      }\n    }\n  }\n}\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style scoped>\n.title {\n  font-size: 20px;\n  font-weight: bold;\n  height: 30px;\n  line-height: 30px;\n  background-color: rgb(215, 215, 215);\n}\n.tip {\n  text-align: left;\n  background-color: rgb(215, 215, 215);\n}\n.item {\n  padding: 20px 0px;\n  border-bottom: dashed 1px #e5e5e5;\n  /*background-color: rgb(254, 88, 183);*/\n  /*border-bottom: solid 1px red;*/\n}\n.question {\n  text-align: left;\n  font-size: 15px;\n  color: #666;\n}\n.img-box {\n  margin-top: 10px;\n  margin-left: 9px;\n  margin-right: 9px;\n  width: 64px;\n  height: 64px;\n  background-color: rgb(204,204,204);\n}\n.background-none {\n  background: none;\n}\n.img {\n  width: 100%;\n  height: 100%;\n  object-fit: scale-down !important;\n  cursor: pointer;\n}\n.display-flex-box {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: -webkit-flex;\n  display: box;\n  display: flex;\n}\n.flex-wrap {\n  -ms-flex-wrap: wrap;\n      flex-wrap: wrap;\n    -webkit-flex-wrap: wrap;\n}\n/*空间不足的时候不压缩*/\n.shrink-none {\n  -ms-flex-negative: 0;\n  -webkit-flex-shrink: 0;\n  -webkit-box-shrink: 0;\n      flex-shrink: 0;\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/Demo.vue","'use strict'\n// 微信js sdk鉴权组件\nvar wx = require('weixin-js-sdk')\nvar tyService = require('./tyService.js')\nvar EXIF = require('exif-js')\nvar MegaPixImage = require('./megapic-image.js')\n\nvar wxJsComponent = new function () {\n  // 记录配置成功的信息历史\n  this.configHistory = new Map()\n\n  // 获取访问接口授权\n  this.initConfig = function (configData, callback) {\n    console.warn('initConfig1' + JSON.stringify(configData))\n    if (configData.activeStatus) { // 返回值有效且为激活状态\n      console.warn('initConfig2')\n      var appid = configData.appId\n      var timestamp = configData.timestamp\n      var nonceStr = configData.nonceStr\n      var signature = configData.signature\n      wx.config({\n        debug: true, // 开启调试模式,调用的所有api的返回值会在客户端alert出来，若要查看传入的参数，可以在pc端打开，参数信息会通过log打出，仅在pc端时才会打印。\n        appId: appid, // 必填，企业号的唯一标识，此处填写企业号corpid\n        timestamp: timestamp, // 必填，生成签名的时间戳\n        nonceStr: nonceStr, // 必填，生成签名的随机串\n        signature: signature, // 必填，签名，见附录1\n        jsApiList: ['chooseImage', 'previewImage']\n        // jsApiList: ['checkJsApi'] // 必填，需要使用的JS接口列表，所有JS接口列表见附录2\n      })\n    }\n    var hasError = false\n    wx.error(function (res) {\n      hasError = true\n      console.warn('wx.error:' + JSON.stringify(res))\n      if (callback) {\n        // 如果报错，直接返回false\n        callback(false)\n        callback = null\n      }\n      // config信息验证失败会执行error函数，如签名过期导致验证失败，具体错误信息可以打开config的debug模式查看，也可以在返回的res参数中查看，对于SPA可以在这里更新签名。\n    })\n    wx.ready(function () {\n      console.warn('wx.ready hasError:' + hasError)\n      if (callback) {\n        callback(!hasError)\n      }\n    })\n  }\n\n  this.hasAuthorized = function (pageUrl) {\n    var currentTime = Math.round(new Date().getTime() / 1000)\n    if (navigator.userAgent.toLowerCase().indexOf('iphone os') !== -1) {\n      for (var pageKey in this.configHistory) {\n        if (this.configHistory[pageKey] && this.configHistory[pageKey].lastTime && this.configHistory[pageKey].success) {\n          // 如果这个页面已经获取过config\n          if ((currentTime - this.configHistory[pageKey].lastTime) < 60 * 60 * 1.5) {\n            // 距离上次获取config不超过1.5小时，直接调用接口\n            console.log('wxJSConfig ios has history:' + pageKey)\n            return true\n          } else {\n            this.configHistory.delete(pageKey)\n          }\n        }\n        break\n      }\n    } else {\n      // android\n      var pageConfig2 = this.configHistory.get(pageUrl)\n      if (pageConfig2 && pageConfig2.lastTime && pageConfig2.success) {\n        // 如果这个页面已经获取过config\n        if ((currentTime - pageConfig2.lastTime) < 60 * 60 * 1.5) {\n          // 距离上次获取config不超过1.5小时，直接调用接口\n          console.log('wxJSConfig android has history:' + pageUrl)\n          return true\n        } else {\n          this.configHistory.delete(pageUrl)\n        }\n      }\n    }\n    return false\n  }\n\n  // 访问微信jssdk鉴权\n  this.wxJSConfig = function (callback) {\n    var pageUrl = window.location.href.split('#')[0]\n    console.log('wxJSConfig window.location.href1:' + pageUrl)\n    if (this.hasAuthorized(pageUrl)) {\n      if (callback) {\n        callback(true)\n      }\n      return\n    }\n    var that = this\n    var signURL = pageUrl.replace(/&/g, '%26') // 给链接中所有的&uri编码 encodeURIComponent\n    var appid = 'wxcfd35355d34a1894'\n    var secret = 'c99b4935724d9b4f3c725a94d59a7640'\n    // 获取AccessToken(有效期7200秒，每日200次): 'https://api.weixin.qq.com/cgi-bin/token?grant_type=client_credential&appid=APPID&secret=APPSECRET'\n    // 用AccessToken获取tikcet(有效期7200秒)： 'https://api.weixin.qq.com/cgi-bin/ticket/getticket?access_token=ACCESS_TOKEN&type=jsapi'\n    // 用用AccessToken获取tikcet生成signature：\n    // noncestr=Wm3WZYTPz0wzccnW\n    // jsapi_ticket=sM4AOVdWfPE4DxkXGEs8VMCPGGVi4C3VM0P37wVUCFvkVAy_90u5h9nbSlYy3-Sl-HhTdfl2fzFy1AOcHKP7qg\n    // timestamp=1414587457\n    // url=http://mp.weixin.qq.com?params=value\n    // jsapi_ticket=sM4AOVdWfPE4DxkXGEs8VMCPGGVi4C3VM0P37wVUCFvkVAy_90u5h9nbSlYy3-Sl-HhTdfl2fzFy1AOcHKP7qg&noncestr=Wm3WZYTPz0wzccnW&timestamp=1414587457&url=http://mp.weixin.qq.com?params=value\n    // 进行sha1签名: 得到0f9de62fce790f9a083d5c99e95740ceb90c27ed\n    var accessToken = ''\n    tyService.getWXConfigAccessToken(appid, secret, function (isSuccess, result) {\n      if (isSuccess) {\n        accessToken = result\n        console.debug(result)\n      }\n    })\n    var ticket = ''\n    tyService.getWXConfigTicket(accessToken, function (isSuccess, result) {\n      if (isSuccess) {\n        console.debug(result)\n        ticket = result\n      }\n    })\n    var noncestr = 'Wm3WZYTPz0wzccnW'\n    var timestamp = new Date()\n    tyService.getWXConfigSignature(ticket, noncestr, timestamp, signURL, function (isSuccess, result) {\n      if (isSuccess) {\n        console.log('获取签名 success:' + JSON.stringify(result))\n        // 请求config\n        that.initConfig(result, function (success) {\n          console.log('initConfig 11:' + success)\n          if (success) {\n            // 签名成功，缓存获取配置记录\n            if (pageUrl) {\n              var pageConfig = {}\n              pageConfig.success = true\n              pageConfig.lastTime = Math.round(new Date().getTime() / 1000)\n              that.configHistory.set(pageUrl, pageConfig)\n            }\n          } else {\n            // 如果签名失败，删除记录\n            var pageConfig2 = that.configHistory.get(pageUrl)\n            if (pageConfig2 && pageUrl) {\n              that.configHistory.delete(pageUrl)\n            }\n          }\n          // 调用回调\n          if (callback) {\n            callback(success)\n          }\n        })\n      } else {\n        console.log('获取签名 fail:' + result)\n        if (callback) {\n          callback(false)\n        }\n      }\n    })\n  }\n\n  // 选择照片\n  this.pickPhoto = function (callback, count) {\n    if (!count || count > 9) {\n      count = 9\n    }\n    console.log('pickPhoto:' + count)\n    this.wxJSConfig(function (success) {\n      console.log('pickPhoto wxJSConfig2:' + success)\n      wx.chooseImage({\n        count: count, // 默认9\n        sizeType: ['original', 'compressed'], // 可以指定是原图还是压缩图，默认二者都有\n        sourceType: ['album', 'camera'], // 可以指定来源是相册还是相机，默认二者都有\n        success: function (res) {\n          if (callback) {\n            callback(true, res.localIds)\n          }\n        },\n        error: function () {\n          console.warn('####chooseImage error')\n        },\n        complete: function () {\n          console.warn('####chooseImage complete')\n        },\n        fail: function () {\n          console.warn('####chooseImage fail')\n        },\n        failed: function () {\n          console.warn('####chooseImage failed')\n        }\n      })\n    })\n  }\n\n  // 查看图片大图\n  this.previewImage = function (photoUrl, photoUrlList) {\n    photoUrlList = photoUrlList || [photoUrl]\n    wx.previewImage({\n      current: photoUrl, // 当前显示图片的http链接\n      urls: photoUrlList // 需要预览的图片http链接列表\n    })\n  }\n\n  // 读取本地图片数据\n  this.loadLocalPhotoData = function (localId, callback) {\n    this.wxJSConfig(function (success) {\n      if (success) {\n        wx.getLocalImgData({\n          localId: localId, // 图片的localID\n          success: function (res) {\n            var localData = res.localData // localData是图片的base64数据，可以用img标签显示\n            if (callback) {\n              callback(true, localData)\n            }\n          }\n        })\n      } else {\n        if (callback) {\n          callback(false)\n        }\n      }\n    })\n  }\n\n  // 读取本地图片数据\n  this.loadLocalPhotoListData = function (localIds, callback, dataList) {\n    if (localIds && localIds.length) {\n      dataList = dataList || []\n      var that = this\n      var loadItem = localIds[0]\n      this.loadLocalPhotoData(loadItem, function (success, data) {\n        var resItem = {}\n        resItem.localId = loadItem\n        resItem.data = data\n        dataList.push(resItem)\n        if (localIds.length > 1) {\n          if (callback) {\n            callback(false, resItem) // 转完一个走一次\n          }\n          that.loadLocalPhotoListData(localIds.slice(1), callback, dataList)\n        } else {\n          if (callback) {\n            callback(true, resItem) // 全部转换完\n          }\n        }\n      })\n    } else { // localId不存在\n      if (callback) {\n        callback(false)\n      }\n    }\n  }\n\n  // 获取input file的文件地址\n  this.getLocalFileURL = function (file) {\n    var url = null\n    if (window.createObjectURL !== undefined) { // basic\n      url = window.createObjectURL(file)\n    } else if (window.URL !== undefined) { // mozilla(firefox)兼容火狐\n      url = window.URL.createObjectURL(file)\n    } else if (window.webkitURL !== undefined) { // webkit or chrome\n      url = window.webkitURL.createObjectURL(file)\n    }\n    return url\n  }\n\n  // 读取图片base64数据，和图片宽高\n  this.loadImageWithUrl = function (url, callback) {\n    var sourceImage = new Image()\n    sourceImage.onload = function () {\n      if (callback) {\n        callback(sourceImage)\n      }\n      sourceImage = null\n    }\n    sourceImage.src = url\n  }\n\n  // 读取图片base64数据，和图片宽高\n  this.getImageBase64Data = function (url, callback) {\n    this.loadImageWithUrl(url, function (sourceImage) {\n      var imageWidth = sourceImage.width\n      var imageHeight = sourceImage.height\n      console.info('resizeImage width:' + imageWidth)\n      console.info('resizeImage height:' + imageHeight)\n      var canvas = document.createElement('canvas')\n      canvas.width = imageWidth\n      canvas.height = imageHeight\n\n      canvas.getContext('2d').drawImage(sourceImage, 0, 0, imageWidth, imageHeight)\n      var dataURL = canvas.toDataURL('image/jpeg')\n      if (callback) {\n        callback(dataURL, imageWidth, imageHeight)\n      }\n      canvas = null\n      dataURL = null\n    })\n  }\n  // 加载input选取的图片信息，压缩图片\n  this.loadAndCompressInputImageData = function (file, callback) {\n    console.warn('loadAndCompressInputImageData:' + file.name + ', size:' + file.size)\n    var orientation\n    var that = this\n    EXIF.getData(file, function () {\n      orientation = EXIF.getTag(file, 'Orientation')\n      console.warn('EXIF.getData orientation:' + orientation)\n    })\n    var reader = new FileReader()\n    reader.readAsDataURL(file)\n    reader.onload = function (e) {\n      var image = new Image()\n      image.src = e.target.result\n      image.onload = function () {\n        var expectWidth = this.naturalWidth\n        var expectHeight = this.naturalHeight\n        // 适当压缩图片，规范尺寸\n        if (this.naturalWidth > this.naturalHeight && this.naturalWidth > 800) {\n          expectWidth = 800\n          expectHeight = expectWidth * this.naturalHeight / this.naturalWidth\n        } else if (this.naturalHeight > this.naturalWidth && this.naturalHeight > 1200) {\n          expectHeight = 1200\n          expectWidth = expectHeight * this.naturalWidth / this.naturalHeight\n        }\n        var canvas = document.createElement('canvas')\n        var ctx = canvas.getContext('2d')\n        canvas.width = expectWidth\n        canvas.height = expectHeight\n        ctx.drawImage(this, 0, 0, expectWidth, expectHeight)\n        // 修复ios上传图片的时候 被旋转的问题\n        var base64 = null\n        if (orientation && orientation !== 1) {\n          var mpImg = new MegaPixImage(image)\n          mpImg.render(canvas, {\n            maxWidth: 800,\n            maxHeight: 1200,\n            quality: 0.8,\n            orientation: orientation\n          })\n        }\n        base64 = canvas.toDataURL('image/jpeg', 0.8)\n        var fileLength = parseInt(base64.length - (base64.length / 8) * 2)\n        if (fileLength / 1024000 > 1) { // 如果图片仍然大于1M，压缩图片\n          // 压缩图片\n          that.imgScale(base64, 4, callback)\n        } else {\n          if (callback) {\n            callback(base64, canvas.width, canvas.height)\n          }\n        }\n      }\n    }\n  }\n  // 压缩图片\n  this.imgScale = function (imgUrl, quality, callback) {\n    console.warn('imgScale')\n    var img = new Image()\n    var canvas = document.createElement('canvas')\n    var cxt = canvas.getContext('2d')\n    img.src = imgUrl\n    img.onload = function () {\n      // 缩放后图片的宽高\n      var width = img.naturalWidth / quality\n      var height = img.naturalHeight / quality\n      canvas.width = width\n      canvas.height = height\n      cxt.drawImage(this, 0, 0, width, height)\n      if (callback) {\n        callback(canvas.toDataURL('image/jpeg'), width, height)\n      }\n    }\n  }\n  // 选择图片方向\n  this.rotateImg = function (img, direction, canvas) { // 图片旋转\n    console.warn('rotateImg1:' + direction)\n    var minStep = 0\n    var maxStep = 3\n    if (img === null) return\n    var height = img.height\n    var width = img.width\n    var step = 2\n    if (step === null) {\n      step = minStep\n    }\n    if (direction === 'right') {\n      step++\n      step > maxStep && (step = minStep)\n    } else {\n      step--\n      step < minStep && (step = maxStep)\n    }\n    console.warn('rotateImg2')\n    var degree = step * 90 * Math.PI / 180\n    var ctx = canvas.getContext('2d')\n    console.warn('rotateImg3')\n    switch (step) {\n      case 0:\n        canvas.width = width\n        canvas.height = height\n        ctx.drawImage(img, 0, 0)\n        break\n      case 1:\n        canvas.width = height\n        canvas.height = width\n        ctx.rotate(degree)\n        ctx.drawImage(img, 0, -height)\n        break\n      case 2:\n        canvas.width = width\n        canvas.height = height\n        ctx.rotate(degree)\n        ctx.drawImage(img, -width, -height)\n        break\n      case 3:\n        canvas.width = height\n        canvas.height = width\n        ctx.rotate(degree)\n        ctx.drawImage(img, -width, 0)\n        break\n    }\n    console.warn('rotateImg6')\n  }\n}\n\nmodule.exports = wxJsComponent\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./static/wxJsComponent.js\n// module id = uVNh\n// module chunks = 1"],"sourceRoot":""}